<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>YL&#39;s Blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://yl.frontjs.cc/"/>
  <updated>2021-01-12T12:13:35.758Z</updated>
  <id>https://yl.frontjs.cc/</id>
  
  <author>
    <name>YL2014</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>pymysql.err.InternalError) (1366, &quot;Incorrect string valueè§£å†³æ–¹æ³•</title>
    <link href="https://yl.frontjs.cc/2020/04/19/2020-04-19-mysql-1366/"/>
    <id>https://yl.frontjs.cc/2020/04/19/2020-04-19-mysql-1366/</id>
    <published>2020-04-19T10:14:02.000Z</published>
    <updated>2021-01-12T12:13:35.758Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©å°è¯•ç”¨äº†ä¸‹flaskï¼Œç»“æœè¿mysqlæŠ¥é”™ï¼ŒæŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼š<code>pymysql.err.InternalError) (1366, &quot;Incorrect string value:</code>ï¼Œçœ‹èµ·æ¥åƒæ˜¯å­—ç¬¦é›†çš„é—®é¢˜ï¼Œä¹ŸGoogleäº†ä¸‹</p><a id="more"></a><p>ç¡®å®æ˜¯å­—ç¬¦é›†çš„é—®é¢˜ï¼Œæˆ‘è¿™é‡Œå®šä¹‰çš„å­—æ®µæ˜¯Stringï¼Œinsertä¸­æ–‡å°±ä¸OKã€‚Googleç»“è®ºæ˜¯MySQLé»˜è®¤çš„charset utf8 ä¸º utf8mb3ï¼Œéœ€è¦è°ƒæ•´ä¸ºutf8mb4ï¼Œå…·ä½“çš„å¤§å®¶çœ‹è¿™ä¸ªå›ç­”<a href="https://stackoverflow.com/questions/10957238/incorrect-string-value-when-trying-to-insert-utf-8-into-mysql-via-jdbc" target="_blank" rel="noopener">https://stackoverflow.com/questions/10957238/incorrect-string-value-when-trying-to-insert-utf-8-into-mysql-via-jdbc</a>ã€‚</p><p>æ€ä¹ˆä¿®æ”¹ï¼Ÿå°è¯•æ­¥éª¤å¦‚ä¸‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">$ mysql&gt; show variables like &apos;character%&apos;;</span><br><span class="line">+--------------------------+-----------------------------------------------------------+</span><br><span class="line">| Variable_name            | Value                                                     |</span><br><span class="line">+--------------------------+-----------------------------------------------------------+</span><br><span class="line">| character_set_client     | utf8                                                   </span><br><span class="line">|</span><br><span class="line">| character_set_connection | utf8                                                   </span><br><span class="line">|</span><br><span class="line">| character_set_database   | latin1                                                    </span><br><span class="line">|</span><br><span class="line">| character_set_filesystem | binary                                                    </span><br><span class="line">|</span><br><span class="line">| character_set_results    | utf8                                                   </span><br><span class="line">|</span><br><span class="line">| character_set_server     | utf8                                                   </span><br><span class="line">|</span><br><span class="line">| character_set_system     | utf8                                                      |</span><br><span class="line">| character_sets_dir       | /usr/local/mysql-5.7.25-macos10.14-x86_64/share/charsets/ |</span><br><span class="line">+--------------------------+-----------------------------------------------------------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">$ alter database test charset utf8mb4;</span><br><span class="line">$ show variables like &apos;character%&apos;;</span><br><span class="line">+--------------------------+-----------------------------------------------------------+</span><br><span class="line">| Variable_name            | Value                                                     |</span><br><span class="line">+--------------------------+-----------------------------------------------------------+</span><br><span class="line">| character_set_client     | utf8                                                   </span><br><span class="line">|</span><br><span class="line">| character_set_connection | utf8                                                   </span><br><span class="line">|</span><br><span class="line">| character_set_database   | utf8mb64                                                  </span><br><span class="line">|</span><br><span class="line">| character_set_filesystem | binary                                                    </span><br><span class="line">|</span><br><span class="line">| character_set_results    | utf8                                                   </span><br><span class="line">|</span><br><span class="line">| character_set_server     | utf8                                                   </span><br><span class="line">|</span><br><span class="line">| character_set_system     | utf8                                                      |</span><br><span class="line">| character_sets_dir       | /usr/local/mysql-5.7.25-macos10.14-x86_64/share/charsets/ |</span><br><span class="line">+--------------------------+-----------------------------------------------------------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure><p>ç„¶åå°è¯•insertä¸­æ–‡ï¼Œè¿˜æ˜¯ä¸è¡Œï¼Œåæ¥åˆalertäº†tableï¼Œæœ€åalertè¡¨é‡Œå…·ä½“çš„columnï¼Œä½†æ˜¯è¿™ä¹ˆæä¸èƒ½ä¸€åŠ³æ°¸é€¸å•Šï¼Œæ€ä¹ˆåŠï¼Ÿè¿™é‡Œå›åˆ°æœ€å¼€å§‹ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹çš„æ˜¯mysqlçš„å­—ç¬¦é›†ï¼Œæ‰€ä»¥åº”è¯¥æ”¹mysqlçš„é…ç½®æ–‡ä»¶ã€‚</p><p>ç½‘ä¸Šæœç´¢äº†ä¸‹ï¼ŒMacä¸ŠMySQLçš„é…ç½®æ–‡ä»¶è·¯å¾„ä¸º<code>/usr/local/mysql/support-files/my-default.cnf</code>ï¼Œå¯æ˜¯æˆ‘è¿™å¹¶æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œé‚æ–°å»ºäº†<code>/etc/my.cnf</code>ï¼Œå†…å®¹å¦‚ä¸‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[client]</span><br><span class="line">default-character-set=utf8mb4</span><br><span class="line">[mysqld]</span><br><span class="line">character-set-server=utf8mb4</span><br></pre></td></tr></table></figure></p><p>æ–°å»ºå‰éœ€è¦stopä¸‹MySQLï¼Œæ–°å»ºå®Œæˆåé‡å¯MySQLï¼Œç„¶åå°±okäº†å—ï¼ŸæŒ‰ç†åº”è¯¥æ˜¯çš„ï¼Œä¸è¿‡æˆ‘è¿™é‡Œå¹¶æ²¡æœ‰okå•Šï¼ï¼ï¼</p><p>æƒ³äº†ä¸€æƒ³ï¼Œåˆšæ‰æ–°å»ºçš„testæ•°æ®åº“åº”è¯¥éœ€è¦é‡å»ºï¼Œæˆ–è€…é‡å»ºå¯¹åº”çš„tableã€‚ç²—æš´äº†ä¸€ç‚¹ï¼Œ<code>drop database test;</code>ï¼Œç„¶åå†createï¼Œç„¶åç„¶åå°±okäº†ï¼Œå“ˆå“ˆå“ˆğŸ˜</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ mysql&gt; select * from role;</span><br><span class="line">+----+-----------------+-------+---------------------+</span><br><span class="line">| id | name            | auths | addtime             |</span><br><span class="line">+----+-----------------+-------+---------------------+</span><br><span class="line">|  1 | è¶…çº§ç®¡ç†å‘˜      |       | 2020-04-18 10:07:48 |</span><br><span class="line">+----+-----------------+-------+---------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure><p>è¿™é‡Œä»…åšè®°å½•ï¼Œé‡åˆ°ç›¸åŒé—®é¢˜çš„åŒå­¦å¯ä»¥å‚è€ƒä¸‹ã€‚</p><p>ç”Ÿäº§é¡¹ç›®æ²¡è¿™ä¹ˆéº»çƒ¦ï¼Œç›´æ¥äº‘æ•°æ®åº“å°±å¥½ğŸ˜‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»Šå¤©å°è¯•ç”¨äº†ä¸‹flaskï¼Œç»“æœè¿mysqlæŠ¥é”™ï¼ŒæŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼š&lt;code&gt;pymysql.err.InternalError) (1366, &amp;quot;Incorrect string value:&lt;/code&gt;ï¼Œçœ‹èµ·æ¥åƒæ˜¯å­—ç¬¦é›†çš„é—®é¢˜ï¼Œä¹ŸGoogleäº†ä¸‹&lt;/p&gt;
    
    </summary>
    
    
      <category term="mysql" scheme="https://yl.frontjs.cc/tags/mysql/"/>
    
      <category term="python" scheme="https://yl.frontjs.cc/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>NVM is not compatible with the npm config &quot;prefix&quot; option warning (OS X)</title>
    <link href="https://yl.frontjs.cc/2019/03/13/2019-03-13-nvm-warning/"/>
    <id>https://yl.frontjs.cc/2019/03/13/2019-03-13-nvm-warning/</id>
    <published>2019-03-13T07:35:31.000Z</published>
    <updated>2021-01-12T12:13:35.757Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nvm is not compatible with the npm config <span class="string">"prefix"</span> option: currently <span class="built_in">set</span> to <span class="string">"/usr/local"</span></span><br><span class="line">Run `npm config delete prefix` or `nvm use --delete-prefix v8.11.2 --silent` to <span class="built_in">unset</span> it.</span><br></pre></td></tr></table></figure><p>æœ€è¿‘åœ¨<code>vscode</code>çš„ç»ˆç«¯ç»å¸¸ä¼šçœ‹åˆ°è¿™ä¸ªè­¦å‘Šï¼Œ<code>nvm ls</code>ä¸€ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°ï¼ŒIDEé‡Œçš„ç»ˆç«¯é»˜è®¤ä½¿ç”¨çš„<code>node</code>æŒ‡å‘äº†<code>system</code>ã€‚</p><a id="more"></a><p>æˆ‘ä»¬çŸ¥é“ï¼Œä¸ºäº†å¼€å‘æ–¹ä¾¿ä»¥åŠç‰ˆæœ¬åˆ‡æ¢ï¼Œ<code>nodejs</code>åŸºæœ¬éƒ½æ˜¯ç”¨<code>nvm</code>æ¥å®‰è£…äº†ï¼Œä¸ä¼šç›´æ¥å»å®˜ç½‘ä¸‹è½½å®‰è£…æ–‡ä»¶è¿›è¡Œå®‰è£…ï¼Œé‚£ä¹ˆæŒ‡å‘<code>system</code>çš„<code>nodejs</code>æ˜¯å“ªé‡Œæ¥çš„ï¼Ÿ</p><p>OKï¼Œæˆ‘ä»¬çœ‹çœ‹<code>brew list</code>ï¼Œå¯ä»¥çœ‹åˆ°<code>node</code>åœ¨<code>brew</code>çš„å®‰è£…åˆ—è¡¨é‡Œï¼Œä¸è¿‡æˆ‘ä»¬å¹¶æ²¡æœ‰é€šè¿‡<code>brew install node</code>æ¥å®‰è£…è¿‡<code>nodejs</code>ã€‚</p><p>å°è¯•å¸è½½<code>system</code>çš„<code>nodejs</code>, <code>brew uninstall node</code>ï¼Œä¼šå¾—åˆ°å‘Šè­¦ï¼Œè¯¥<code>node</code>æ˜¯<code>yarn</code>çš„ä¾èµ–ï¼Œä¸èƒ½å¸è½½ï¼Œè¿™å°±å¯¹ä¸Šäº†ï¼Œçœ‹çœ‹æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><ul><li><p>å¸è½½<code>yarn</code>å’Œ<code>node</code>ï¼Œç„¶åå†å®‰è£…<code>yarn</code>ï¼ŒåŒæ—¶åŠ ä¸Šå»æ‰ä¾èµ–å®‰è£…å‚æ•°</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ brew uninstall yarn</span><br><span class="line">$ brew uninstall node</span><br><span class="line">$ brew cleanup --prune-prefix</span><br><span class="line">$ brew install yarn --ignore-dependencies</span><br></pre></td></tr></table></figure></li><li><p>æ¸…é™¤<code>system</code>çš„<code>node</code>æ®‹ç•™æ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ rm -rf  /usr/<span class="built_in">local</span>/lib/node_modules</span><br><span class="line">$ rm /usr/<span class="built_in">local</span>/bin/npm</span><br></pre></td></tr></table></figure></li></ul><p>é‡æ–°æ‰“å¼€ç»ˆç«¯ï¼ŒåŸºæœ¬ä¸Šå°±ä¸ä¼šæœ‰è¿™ä¸ªè­¦å‘Šå‡ºç°äº†ã€‚</p><blockquote><p>å‚è€ƒï¼š<a href="https://github.com/creationix/nvm/issues/1245#issuecomment-387460769" target="_blank" rel="noopener">https://github.com/creationix/nvm/issues/1245#issuecomment-387460769</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;nvm is not compatible with the npm config &lt;span class=&quot;string&quot;&gt;&quot;prefix&quot;&lt;/span&gt; option: currently &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; to &lt;span class=&quot;string&quot;&gt;&quot;/usr/local&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Run `npm config delete prefix` or `nvm use --delete-prefix v8.11.2 --silent` to &lt;span class=&quot;built_in&quot;&gt;unset&lt;/span&gt; it.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æœ€è¿‘åœ¨&lt;code&gt;vscode&lt;/code&gt;çš„ç»ˆç«¯ç»å¸¸ä¼šçœ‹åˆ°è¿™ä¸ªè­¦å‘Šï¼Œ&lt;code&gt;nvm ls&lt;/code&gt;ä¸€ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°ï¼ŒIDEé‡Œçš„ç»ˆç«¯é»˜è®¤ä½¿ç”¨çš„&lt;code&gt;node&lt;/code&gt;æŒ‡å‘äº†&lt;code&gt;system&lt;/code&gt;ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="nodejs" scheme="https://yl.frontjs.cc/tags/nodejs/"/>
    
  </entry>
  
  <entry>
    <title>openresty(åŠ¨æ€)æ·»åŠ nginxæ¨¡å—</title>
    <link href="https://yl.frontjs.cc/2018/12/12/2018-12-12-openrestry-nginx-http2-module/"/>
    <id>https://yl.frontjs.cc/2018/12/12/2018-12-12-openrestry-nginx-http2-module/</id>
    <published>2018-12-12T07:35:31.000Z</published>
    <updated>2021-01-12T12:13:35.757Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æ¢äº†æœåŠ¡å™¨åï¼Œé‡æ–°æ­å»ºäº†<code>nginx</code>ç¯å¢ƒï¼Œè¿™æ¬¡ä½¿ç”¨çš„æ˜¯<code>openrestry</code>ã€‚åœ¨é…ç½®<code>https</code>ï¼Œå¼€å¯<code>http2</code>çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°ç¼ºå°‘<code>ngx_http_v2_module</code>è¿™ä¸ª<code>nginx</code>æ¨¡å—ã€‚é‚£ä¹ˆå¦‚æœæ·»åŠ è¿™ä¸ªæ¨¡å—å‘¢ï¼Ÿ</p></blockquote><a id="more"></a><p>åœ¨ç½‘ä¸ŠæŸ¥äº†ä¸€ç•ªï¼Œå¤§æ¦‚éƒ½æ˜¯é‡æ–°ç¼–è¯‘ã€‚é¡ºç€è¿™ä¸ªæ€è·¯æ¥å®è·µä¸‹ã€‚</p><p>é¦–å…ˆæŸ¥çœ‹ä¸‹æˆ‘ä»¬å·²ç»å®‰è£…çš„æ¨¡å—<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ -V</span><br><span class="line">nginx version: openresty/1.13.6.1</span><br><span class="line">built by gcc 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.9)</span><br><span class="line">built with OpenSSL 1.0.2g  1 Mar 2016</span><br><span class="line">TLS SNI support enabled</span><br><span class="line">configure arguments: --prefix=/usr/local/openresty/nginx --with-cc-opt=-O2 --add-module=../ngx_devel_kit-0.3.0 --add-module=../echo-nginx-module-0.61 --add-module=../xss-nginx-module-0.05 --add-module=../ngx_coolkit-0.2rc3 --add-module=../set-misc-nginx-module-0.31 --add-module=../form-input-nginx-module-0.12 --add-module=../encrypted-session-nginx-module-0.07 --add-module=../srcache-nginx-module-0.31 --add-module=../ngx_lua-0.10.11 --add-module=../ngx_lua_upstream-0.07 --add-module=../headers-more-nginx-module-0.33 --add-module=../array-var-nginx-module-0.05 --add-module=../memc-nginx-module-0.18 --add-module=../redis2-nginx-module-0.14 --add-module=../redis-nginx-module-0.3.7 --add-module=../rds-json-nginx-module-0.15 --add-module=../rds-csv-nginx-module-0.08 --add-module=../ngx_stream_lua-0.0.3 --with-ld-opt=-Wl,-rpath,/usr/local/openresty/luajit/lib --with-stream --with-stream_ssl_module --with-http_ssl_module</span><br></pre></td></tr></table></figure></p><p>ç¡®å®æ²¡æœ‰<code>http2</code>ç›¸å…³æ¨¡å—</p><p>ä¹‹å‰å®‰è£…<code>openrestry</code>å°±æ˜¯ä¸‹è½½æºç ç¼–è¯‘å®‰è£…çš„ï¼Œåˆ‡æ¢åˆ°<code>openrestry</code>æºç ç›®å½•ï¼Œé‡æ–°ç¼–è¯‘ï¼Œå¸¦ä¸Šæ¨¡å—å‚æ•°<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./configure --with-ngx_http_v2_module -j2</span><br></pre></td></tr></table></figure></p><p>ç»“æœä¼šæŠ¥é”™ï¼Œ<code>openrestry</code>æ²¡æœ‰<code>ngx_http_v2_module</code>è¿™ä¸ªæ¨¡å—ï¼Œæ ¹æ®æç¤ºï¼Œæ‰§è¡Œ<code>./configure --help</code>ï¼Œå¯ä»¥æŸ¥çœ‹åˆ°æ”¯æŒå“ªäº›æ¨¡å—ã€‚åœ¨ç°å®çš„åˆ—è¡¨ä¸­å‘ç°ï¼Œ<code>openrestry</code>çš„<code>http2</code>æ¨¡å—æ˜¯<code>http_v2_module</code>ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œé‡æ–°ç¼–è¯‘<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure --with-http_v2_module -j2</span><br></pre></td></tr></table></figure></p><p>ç„¶åæ‰§è¡Œ<code>make</code>æ“ä½œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ make</span><br></pre></td></tr></table></figure></p><p>å®Œæˆåä¼šæœ‰å¦‚ä¸‹æç¤ºï¼ˆç‰ˆæœ¬å·æ˜¾ç¤ºä¸ºè‡ªå·±å®‰è£…çš„å¯¹åº”ç‰ˆæœ¬å·ï¼‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">make[2]: Leaving directory &apos;soft/openresty-1.13.6.1/build/nginx-1.13.6&apos;</span><br><span class="line">make[1]: Leaving directory &apos;soft/openresty-1.13.6.1/build/nginx-1.13.6&apos;</span><br></pre></td></tr></table></figure></p><p>é‡æ–°ç¼–è¯‘åçš„<code>nginx</code>çš„äºŒè¿›åˆ¶æ–‡ä»¶å°±åœ¨ä¸Šé¢æç¤ºçš„ç›®å½•ä¸‹é¢çš„<code>objs</code>ä¸‹é¢ï¼ŒæŸ¥çœ‹ä¸‹ç³»ç»Ÿç¯å¢ƒçš„<code>nginx</code>åœ¨å“ª<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ which nginx</span><br><span class="line">/usr/local/openresty/nginx/sbin/nginx</span><br></pre></td></tr></table></figure></p><p>æ‹·è´ç¼–è¯‘åçš„<code>nginx</code>äºŒè¿›åˆ¶æ–‡ä»¶è¦†ç›–ç³»ç»Ÿç¯å¢ƒçš„<code>nginx</code>ï¼Œå¹¶é‡å¯<code>nginx</code>æœåŠ¡<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ nginx -s stop</span><br><span class="line">$ cp soft/openresty-1.13.6.1/build/nginx-1.13.6/objs/nginx /usr/local/openresty/nginx/sbin/</span><br></pre></td></tr></table></figure></p><p>å†çœ‹çœ‹<code>nginx</code>é…ç½®<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    #listen[::]:80;</span><br><span class="line"></span><br><span class="line">    #SSL configuration</span><br><span class="line"></span><br><span class="line">    listen 443 ssl http2;</span><br><span class="line">    #listen [::]443 ssl http2;</span><br><span class="line">    ##ssl on;</span><br><span class="line">    ssl_certificate /etc/letsencrypt/live/frontjs.cc/fullchain.pem;</span><br><span class="line">    ssl_certificate_key /etc/letsencrypt/live/frontjs.cc/privkey.pem;</span><br><span class="line"></span><br><span class="line">    root /www/html;</span><br><span class="line">    index index.html index.htm index;</span><br><span class="line"></span><br><span class="line">    server_name frontjs.cc;</span><br><span class="line"></span><br><span class="line">    #force https</span><br><span class="line">    #rewrite ^(.*)$ https://$host$1 permanent;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        try_files $uri $uri/ =404;</span><br><span class="line">        #proxy_pass http://127.0.0.1:8000;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ç°åœ¨æ‰§è¡Œ<code>nginx -t</code>å°±ä¸ä¼šæŠ¥ç¼ºå°‘æ¨¡å—çš„é”™è¯¯äº†</p><p>å¯åŠ¨<code>nginx</code>æœåŠ¡<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ nginx</span><br></pre></td></tr></table></figure></p><p>Done~</p><h5 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h5><p><a href="https://openresty.org/en/installation.html" target="_blank" rel="noopener">https://openresty.org/en/installation.html</a></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;æ¢äº†æœåŠ¡å™¨åï¼Œé‡æ–°æ­å»ºäº†&lt;code&gt;nginx&lt;/code&gt;ç¯å¢ƒï¼Œè¿™æ¬¡ä½¿ç”¨çš„æ˜¯&lt;code&gt;openrestry&lt;/code&gt;ã€‚åœ¨é…ç½®&lt;code&gt;https&lt;/code&gt;ï¼Œå¼€å¯&lt;code&gt;http2&lt;/code&gt;çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°ç¼ºå°‘&lt;code&gt;ngx_http_v2_module&lt;/code&gt;è¿™ä¸ª&lt;code&gt;nginx&lt;/code&gt;æ¨¡å—ã€‚é‚£ä¹ˆå¦‚æœæ·»åŠ è¿™ä¸ªæ¨¡å—å‘¢ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="nginx" scheme="https://yl.frontjs.cc/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>è¿·å®«é—®é¢˜ - å¹¿åº¦ä¼˜å…ˆæœç´¢(BFS)</title>
    <link href="https://yl.frontjs.cc/2018/11/17/2018-11-17-bfs/"/>
    <id>https://yl.frontjs.cc/2018/11/17/2018-11-17-bfs/</id>
    <published>2018-11-17T07:35:31.000Z</published>
    <updated>2021-01-12T12:13:35.757Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è®°å½•è¿·å®«é—®é¢˜è§£æ³•JavaScriptå®ç°</p></blockquote><h3 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h3><p>ç»™å®šä¸€ä¸ªè¿·å®«ï¼ŒæŒ‡æ˜èµ·ç‚¹å’Œç»ˆç‚¹ï¼Œæ‰¾å‡ºä»èµ·ç‚¹å‡ºå‘åˆ°ç»ˆç‚¹çš„æœ‰æ•ˆå¯è¡Œè·¯å¾„ï¼Œå°±æ˜¯è¿·å®«é—®é¢˜ï¼ˆmaze problemï¼‰</p><p>è¿·å®«å¯ä»¥ä»¥äºŒç»´æ•°ç»„æ¥å­˜å‚¨è¡¨ç¤ºã€‚0è¡¨ç¤ºé€šè·¯ï¼Œ1è¡¨ç¤ºéšœç¢ã€‚æ³¨æ„è¿™é‡Œè§„å®šç§»åŠ¨å¯ä»¥ä»ä¸Šã€ä¸‹ã€å·¦ã€å³å››æ–¹æ–¹å‘ç§»åŠ¨ã€‚åæ ‡ä»¥è¡Œå’Œåˆ—è¡¨ç¤ºï¼Œå‡ä»0å¼€å§‹ï¼Œç»™å®šèµ·ç‚¹ï¼ˆ0,0ï¼‰å’Œç»ˆç‚¹ï¼ˆ4,4ï¼‰ï¼Œè¿·å®«è¡¨ç¤ºå¦‚ä¸‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> maze = [</span><br><span class="line">  [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">  [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>],</span><br><span class="line">  [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">  [<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>],</span><br><span class="line">  [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>],</span><br><span class="line">]</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="å¹¿åº¦ä¼˜å…ˆæœç´¢è§£æ³•"><a href="#å¹¿åº¦ä¼˜å…ˆæœç´¢è§£æ³•" class="headerlink" title="å¹¿åº¦ä¼˜å…ˆæœç´¢è§£æ³•"></a>å¹¿åº¦ä¼˜å…ˆæœç´¢è§£æ³•</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MAX_ROW = <span class="number">5</span></span><br><span class="line"><span class="keyword">const</span> MAX_COL = <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> head = <span class="number">0</span> <span class="comment">// å¤´æŒ‡é’ˆ</span></span><br><span class="line"><span class="keyword">let</span> tail = <span class="number">0</span> <span class="comment">// å°¾æŒ‡é’ˆ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> queue = [] <span class="comment">// visité˜Ÿåˆ—</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// èµ°è¿‡ç‚¹çš„æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Point</span> (<span class="params">row, col, predecessor</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.row = row</span><br><span class="line">  <span class="keyword">this</span>.col = col</span><br><span class="line">  <span class="keyword">this</span>.predecessor = predecessor</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿›é˜Ÿï¼Œç§»åŠ¨å°¾æŒ‡é’ˆï¼Œæ·»åŠ ç‚¹å®ä¾‹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">enQueue</span> (<span class="params">point</span>) </span>&#123;</span><br><span class="line">  queue[tail++] = point</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡ºé˜Ÿï¼Œç§»åŠ¨å¤´æŒ‡é’ˆ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deQueue</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> queue[head++]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é˜Ÿåˆ—åˆ¤ç©ºï¼šå¤´å°¾æŒ‡é’ˆç›¸ç­‰</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isEmpty</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> head === tail</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿·å®«åœ°å›¾</span></span><br><span class="line"><span class="keyword">const</span> maze = [</span><br><span class="line">  [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">  [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>],</span><br><span class="line">  [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">  [<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>],</span><br><span class="line">  [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>],</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“å°åœ°å›¾</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printMaze</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; MAX_ROW; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> printRow = []</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; MAX_COL; j++) &#123;</span><br><span class="line">      printRow.push(maze[i][j])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(printRow)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'/************************/'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// èµ°ä¸€ä¸ªç‚¹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">visit</span> (<span class="params">row, col</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// predecessorè®¾ç½®ä¸º head - 1ï¼Œè®°å½•åˆ°è¾¾å½“å‰çš„å¤´æŒ‡é’ˆï¼Œç”¨äºè·¯å¾„å›æº¯</span></span><br><span class="line">  <span class="keyword">const</span> point = <span class="keyword">new</span> Point(row, col, head - <span class="number">1</span>)</span><br><span class="line">  maze[row][col] = <span class="number">6</span></span><br><span class="line">  enQueue(point)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4ä¸ªæ–¹å‘</span></span><br><span class="line"><span class="keyword">const</span> dirs = [</span><br><span class="line">  [<span class="number">1</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">1</span>], [<span class="number">-1</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">-1</span>]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¥å£å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> p = <span class="keyword">new</span> Point(<span class="number">0</span>, <span class="number">0</span>, <span class="number">-1</span>)</span><br><span class="line">  maze[p.row][p.col] = <span class="number">6</span></span><br><span class="line">  enQueue(p)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (!isEmpty()) &#123;</span><br><span class="line">    p = deQueue()</span><br><span class="line">    <span class="keyword">if</span> (p.row === MAX_ROW - <span class="number">1</span> &amp;&amp; p.col === MAX_COL - <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; dirs.length; i++) &#123;</span><br><span class="line">      <span class="keyword">const</span> nexRow = p.row + dirs[i][<span class="number">0</span>]</span><br><span class="line">      <span class="keyword">const</span> nexCol = p.col + dirs[i][<span class="number">1</span>]</span><br><span class="line">      <span class="keyword">if</span> (</span><br><span class="line">        nexRow &gt;= <span class="number">0</span> &amp;&amp;</span><br><span class="line">        nexCol &gt;= <span class="number">0</span> &amp;&amp;</span><br><span class="line">        nexRow &lt; MAX_ROW &amp;&amp;</span><br><span class="line">        nexCol &lt; MAX_COL &amp;&amp;</span><br><span class="line">        maze[nexRow][nexCol] == <span class="number">0</span></span><br><span class="line">      ) &#123;</span><br><span class="line">        visit(nexRow, nexCol)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    printMaze()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (p.row === MAX_ROW - <span class="number">1</span> &amp;&amp; p.col === MAX_COL - <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(p.row, p.col)</span><br><span class="line">    <span class="keyword">while</span> (p.predecessor !== <span class="number">-1</span>) &#123;</span><br><span class="line">      p = queue[p.predecessor]</span><br><span class="line">      <span class="built_in">console</span>.log(p.row, p.col)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'No path!'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main()</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœå¦‚ä¸‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">[ 6, 1, 0, 0, 0 ]</span><br><span class="line">[ 6, 1, 0, 1, 0 ]</span><br><span class="line">[ 0, 0, 0, 0, 0 ]</span><br><span class="line">[ 0, 1, 1, 1, 0 ]</span><br><span class="line">[ 0, 0, 0, 1, 0 ]</span><br><span class="line">/************************/</span><br><span class="line">[ 6, 1, 0, 0, 0 ]</span><br><span class="line">[ 6, 1, 0, 1, 0 ]</span><br><span class="line">[ 6, 0, 0, 0, 0 ]</span><br><span class="line">[ 0, 1, 1, 1, 0 ]</span><br><span class="line">[ 0, 0, 0, 1, 0 ]</span><br><span class="line">/************************/</span><br><span class="line">[ 6, 1, 0, 0, 0 ]</span><br><span class="line">[ 6, 1, 0, 1, 0 ]</span><br><span class="line">[ 6, 6, 0, 0, 0 ]</span><br><span class="line">[ 6, 1, 1, 1, 0 ]</span><br><span class="line">[ 0, 0, 0, 1, 0 ]</span><br><span class="line">/************************/</span><br><span class="line">[ 6, 1, 0, 0, 0 ]</span><br><span class="line">[ 6, 1, 0, 1, 0 ]</span><br><span class="line">[ 6, 6, 0, 0, 0 ]</span><br><span class="line">[ 6, 1, 1, 1, 0 ]</span><br><span class="line">[ 6, 0, 0, 1, 0 ]</span><br><span class="line">/************************/</span><br><span class="line">[ 6, 1, 0, 0, 0 ]</span><br><span class="line">[ 6, 1, 0, 1, 0 ]</span><br><span class="line">[ 6, 6, 6, 0, 0 ]</span><br><span class="line">[ 6, 1, 1, 1, 0 ]</span><br><span class="line">[ 6, 0, 0, 1, 0 ]</span><br><span class="line">/************************/</span><br><span class="line">[ 6, 1, 0, 0, 0 ]</span><br><span class="line">[ 6, 1, 0, 1, 0 ]</span><br><span class="line">[ 6, 6, 6, 0, 0 ]</span><br><span class="line">[ 6, 1, 1, 1, 0 ]</span><br><span class="line">[ 6, 6, 0, 1, 0 ]</span><br><span class="line">/************************/</span><br><span class="line">[ 6, 1, 0, 0, 0 ]</span><br><span class="line">[ 6, 1, 6, 1, 0 ]</span><br><span class="line">[ 6, 6, 6, 6, 0 ]</span><br><span class="line">[ 6, 1, 1, 1, 0 ]</span><br><span class="line">[ 6, 6, 0, 1, 0 ]</span><br><span class="line">/************************/</span><br><span class="line">[ 6, 1, 0, 0, 0 ]</span><br><span class="line">[ 6, 1, 6, 1, 0 ]</span><br><span class="line">[ 6, 6, 6, 6, 0 ]</span><br><span class="line">[ 6, 1, 1, 1, 0 ]</span><br><span class="line">[ 6, 6, 6, 1, 0 ]</span><br><span class="line">/************************/</span><br><span class="line">[ 6, 1, 0, 0, 0 ]</span><br><span class="line">[ 6, 1, 6, 1, 0 ]</span><br><span class="line">[ 6, 6, 6, 6, 6 ]</span><br><span class="line">[ 6, 1, 1, 1, 0 ]</span><br><span class="line">[ 6, 6, 6, 1, 0 ]</span><br><span class="line">/************************/</span><br><span class="line">[ 6, 1, 6, 0, 0 ]</span><br><span class="line">[ 6, 1, 6, 1, 0 ]</span><br><span class="line">[ 6, 6, 6, 6, 6 ]</span><br><span class="line">[ 6, 1, 1, 1, 0 ]</span><br><span class="line">[ 6, 6, 6, 1, 0 ]</span><br><span class="line">/************************/</span><br><span class="line">[ 6, 1, 6, 0, 0 ]</span><br><span class="line">[ 6, 1, 6, 1, 0 ]</span><br><span class="line">[ 6, 6, 6, 6, 6 ]</span><br><span class="line">[ 6, 1, 1, 1, 0 ]</span><br><span class="line">[ 6, 6, 6, 1, 0 ]</span><br><span class="line">/************************/</span><br><span class="line">[ 6, 1, 6, 0, 0 ]</span><br><span class="line">[ 6, 1, 6, 1, 6 ]</span><br><span class="line">[ 6, 6, 6, 6, 6 ]</span><br><span class="line">[ 6, 1, 1, 1, 6 ]</span><br><span class="line">[ 6, 6, 6, 1, 0 ]</span><br><span class="line">/************************/</span><br><span class="line">[ 6, 1, 6, 6, 0 ]</span><br><span class="line">[ 6, 1, 6, 1, 6 ]</span><br><span class="line">[ 6, 6, 6, 6, 6 ]</span><br><span class="line">[ 6, 1, 1, 1, 6 ]</span><br><span class="line">[ 6, 6, 6, 1, 0 ]</span><br><span class="line">/************************/</span><br><span class="line">[ 6, 1, 6, 6, 0 ]</span><br><span class="line">[ 6, 1, 6, 1, 6 ]</span><br><span class="line">[ 6, 6, 6, 6, 6 ]</span><br><span class="line">[ 6, 1, 1, 1, 6 ]</span><br><span class="line">[ 6, 6, 6, 1, 6 ]</span><br><span class="line">/************************/</span><br><span class="line">[ 6, 1, 6, 6, 6 ]</span><br><span class="line">[ 6, 1, 6, 1, 6 ]</span><br><span class="line">[ 6, 6, 6, 6, 6 ]</span><br><span class="line">[ 6, 1, 1, 1, 6 ]</span><br><span class="line">[ 6, 6, 6, 1, 6 ]</span><br><span class="line">/************************/</span><br><span class="line">[ 6, 1, 6, 6, 6 ]</span><br><span class="line">[ 6, 1, 6, 1, 6 ]</span><br><span class="line">[ 6, 6, 6, 6, 6 ]</span><br><span class="line">[ 6, 1, 1, 1, 6 ]</span><br><span class="line">[ 6, 6, 6, 1, 6 ]</span><br><span class="line">/************************/</span><br><span class="line">4 4</span><br><span class="line">3 4</span><br><span class="line">2 4</span><br><span class="line">2 3</span><br><span class="line">2 2</span><br><span class="line">2 1</span><br><span class="line">2 0</span><br><span class="line">1 0</span><br><span class="line">0 0</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;è®°å½•è¿·å®«é—®é¢˜è§£æ³•JavaScriptå®ç°&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;é—®é¢˜æè¿°&quot;&gt;&lt;a href=&quot;#é—®é¢˜æè¿°&quot; class=&quot;headerlink&quot; title=&quot;é—®é¢˜æè¿°&quot;&gt;&lt;/a&gt;é—®é¢˜æè¿°&lt;/h3&gt;&lt;p&gt;ç»™å®šä¸€ä¸ªè¿·å®«ï¼ŒæŒ‡æ˜èµ·ç‚¹å’Œç»ˆç‚¹ï¼Œæ‰¾å‡ºä»èµ·ç‚¹å‡ºå‘åˆ°ç»ˆç‚¹çš„æœ‰æ•ˆå¯è¡Œè·¯å¾„ï¼Œå°±æ˜¯è¿·å®«é—®é¢˜ï¼ˆmaze problemï¼‰&lt;/p&gt;
&lt;p&gt;è¿·å®«å¯ä»¥ä»¥äºŒç»´æ•°ç»„æ¥å­˜å‚¨è¡¨ç¤ºã€‚0è¡¨ç¤ºé€šè·¯ï¼Œ1è¡¨ç¤ºéšœç¢ã€‚æ³¨æ„è¿™é‡Œè§„å®šç§»åŠ¨å¯ä»¥ä»ä¸Šã€ä¸‹ã€å·¦ã€å³å››æ–¹æ–¹å‘ç§»åŠ¨ã€‚åæ ‡ä»¥è¡Œå’Œåˆ—è¡¨ç¤ºï¼Œå‡ä»0å¼€å§‹ï¼Œç»™å®šèµ·ç‚¹ï¼ˆ0,0ï¼‰å’Œç»ˆç‚¹ï¼ˆ4,4ï¼‰ï¼Œè¿·å®«è¡¨ç¤ºå¦‚ä¸‹&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; maze = [&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  [&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  [&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  [&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  [&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  [&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="ç®—æ³•" scheme="https://yl.frontjs.cc/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>å†…ç½‘æœåŠ¡ç©¿é€ - ngrokæ­å»º</title>
    <link href="https://yl.frontjs.cc/2018/11/12/2018-11-12-ngrok/"/>
    <id>https://yl.frontjs.cc/2018/11/12/2018-11-12-ngrok/</id>
    <published>2018-11-12T07:35:31.000Z</published>
    <updated>2021-01-12T12:13:35.757Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å¾®ä¿¡å¼€å‘æ—¶ï¼Œæœ¬åœ°æœåŠ¡è°ƒè¯•åŸŸåçš„é—®é¢˜ï¼Œé‚æ­å»ºngrokï¼Œå†…ç½‘ç©¿é€ã€‚å¾ˆä¹…ä»¥å‰æ­å»ºçš„ï¼Œç°æ•´ç†åˆ°åšå®¢é‡Œï¼Œæ–¹ä¾¿ä»¥åæŸ¥é˜…</p></blockquote><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># ubuntu 16</span><br><span class="line">å‚è€ƒï¼š</span><br><span class="line">https://imququ.com/post/self-hosted-ngrokd.html</span><br><span class="line">http://linfuyan.com/ubuntu-ngrok/</span><br></pre></td></tr></table></figure><h4 id="ecsåŸŸåè§£æ"><a href="#ecsåŸŸåè§£æ" class="headerlink" title="ecsåŸŸåè§£æ"></a>ecsåŸŸåè§£æ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Aè®°å½• ngrok.frontjs.cc</span><br><span class="line">CNAME *.ngrok.frontjs.cc -&gt; ngrok.frontjs.cc</span><br></pre></td></tr></table></figure><h4 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h4><ul><li><code>sudo apt-get install build-essential golang mercurial</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># å¤‡æ³¨ï¼šé˜¿é‡Œäº‘ä¸Šé»˜è®¤è£…çš„golangæ˜¯1.6ï¼Œç¼–è¯‘å‡ºçš„æ–‡ä»¶åœ¨macä¸ŠæŠ¥é”™ï¼Œå¯é‡‡ç”¨æºç ç¼–è¯‘å®‰è£…golang</span><br><span class="line">golangç‰ˆæœ¬åœ°å€ï¼š`https://golang.org/dl/`</span><br><span class="line">wget -c https://dl.google.com/go/go1.10.linux-amd64.tar.gz</span><br><span class="line">tar -C /usr/local -zxvf go1.10.linux-amd64.tar.gz</span><br><span class="line"></span><br><span class="line"># é…ç½®ç¯å¢ƒå˜é‡</span><br><span class="line">echo &apos;export GOROOT=/usr/local/go&apos; &gt;&gt; /etc/profile</span><br><span class="line">echo &apos;export PATH=$PATH:$GOROOT/bin&apos; &gt;&gt; /etc/profile</span><br><span class="line">echo &apos;export GOPATH=$HOME/go&apos; &gt;&gt; /etc/profile</span><br><span class="line">echo &apos;export GOROOT_BOOTSTRAP=/usr/local/go&apos; &gt;&gt; /etc/profile</span><br><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure></li></ul><h4 id="ä¸‹è½½æºç "><a href="#ä¸‹è½½æºç " class="headerlink" title="ä¸‹è½½æºç "></a>ä¸‹è½½æºç </h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/inconshreveable/ngrok.git ngrok</span><br><span class="line">cd ngrok</span><br></pre></td></tr></table></figure><h4 id="ç”Ÿæˆå¹¶æ›¿æ¢æºç é‡Œé»˜è®¤çš„è¯ä¹¦"><a href="#ç”Ÿæˆå¹¶æ›¿æ¢æºç é‡Œé»˜è®¤çš„è¯ä¹¦" class="headerlink" title="ç”Ÿæˆå¹¶æ›¿æ¢æºç é‡Œé»˜è®¤çš„è¯ä¹¦"></a>ç”Ÿæˆå¹¶æ›¿æ¢æºç é‡Œé»˜è®¤çš„è¯ä¹¦</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">NGROK_DOMAIN=&quot;ngrok.frontjs.cc&quot;</span><br><span class="line"></span><br><span class="line">openssl genrsa -out base.key 2048</span><br><span class="line">openssl req -new -x509 -nodes -key base.key -days 10000 -subj &quot;/CN=$NGROK_DOMAIN&quot; -out base.pem</span><br><span class="line">openssl genrsa -out server.key 2048</span><br><span class="line">openssl req -new -key server.key -subj &quot;/CN=$NGROK_DOMAIN&quot; -out server.csr</span><br><span class="line">openssl x509 -req -in server.csr -CA base.pem -CAkey base.key -CAcreateserial -days 10000 -out server.crt</span><br><span class="line"></span><br><span class="line">cp base.pem assets/client/tls/ngrokroot.crt</span><br><span class="line">cp server.crt assets/server/tls/snakeoil.crt</span><br><span class="line">cp server.key assets/server/tls/snakeoil.key</span><br></pre></td></tr></table></figure><h4 id="ç¼–è¯‘åŒ…"><a href="#ç¼–è¯‘åŒ…" class="headerlink" title="ç¼–è¯‘åŒ…"></a>ç¼–è¯‘åŒ…</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">GOOS=linux GOARCH=amd64 make release-server release-client</span><br><span class="line">GOOS=darwin GOARCH=amd64 make release-client</span><br><span class="line">GOOS=windows GOARCH=amd64 make release-client</span><br><span class="line"># ç¼–è¯‘åçš„æ–‡ä»¶åœ¨ bin/ï¼Œngroked ä¸ºæœåŠ¡å™¨ä½¿ç”¨ï¼Œå…¶ä»–æ‹·è´åˆ°å¯¹åº”å®¢æˆ·ç«¯ä½¿ç”¨</span><br></pre></td></tr></table></figure><h4 id="å¯åŠ¨æœåŠ¡"><a href="#å¯åŠ¨æœåŠ¡" class="headerlink" title="å¯åŠ¨æœåŠ¡"></a>å¯åŠ¨æœåŠ¡</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">./bin/ngrokd -tlsKey=server.key -tlsCrt=server.crt -domain=&quot;ngrok.frontjs.cc&quot; -httpAddr=&quot;:7098&quot; -httpsAddr=&quot;:7099&quot;</span><br><span class="line"></span><br><span class="line"># åå°è¿è¡Œ</span><br><span class="line">nohup ./bin/ngrokd -tlsKey=server.key -tlsCrt=server.crt -domain=&quot;ngrok.frontjs.cc&quot; -httpAddr=&quot;:7098&quot; -httpsAddr=&quot;:7099&quot; &amp;</span><br></pre></td></tr></table></figure><h4 id="é…ç½®å¹¶å¯åŠ¨å®¢æˆ·ç«¯"><a href="#é…ç½®å¹¶å¯åŠ¨å®¢æˆ·ç«¯" class="headerlink" title="é…ç½®å¹¶å¯åŠ¨å®¢æˆ·ç«¯"></a>é…ç½®å¹¶å¯åŠ¨å®¢æˆ·ç«¯</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># vim ngrok.cfg</span><br><span class="line">server_addr: ngrok.frontjs.cc:4443</span><br><span class="line">trust_host_root_certs: false</span><br><span class="line"></span><br><span class="line"># æŒ‡å®šå­åŸŸå</span><br><span class="line">./ngrok -subdomain test -proto=http -config=ngrok.cfg 7001</span><br><span class="line"></span><br><span class="line"># éšæœºå­åŸŸå</span><br><span class="line">./ngrok -proto=http -config=ngrok.cfg 7001</span><br><span class="line"></span><br><span class="line"># æ‰“å°å¦‚ä¸‹ä¿¡æ¯</span><br><span class="line">Tunnel Status                 online</span><br><span class="line">Version                       1.7/1.7</span><br><span class="line">Forwarding                    http://test.ngrok.frontjs.cc:7098 -</span><br><span class="line">Web Interface                 127.0.0.1:4040</span><br><span class="line"># Conn                        0</span><br><span class="line">Avg Conn Time                 0.00ms</span><br></pre></td></tr></table></figure><h4 id="nginx-è½¬å‘é…ç½®"><a href="#nginx-è½¬å‘é…ç½®" class="headerlink" title="nginx è½¬å‘é…ç½®"></a>nginx è½¬å‘é…ç½®</h4><p>åˆ°è¿™é‡Œæ²¡é‡åˆ°é—®é¢˜ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡<code>http://test.ngrok.frontjs.cc:7098</code>æ¥è®¿é—®æœ¬åœ°<code>7001</code>ç«¯å£çš„æœåŠ¡äº†ï¼Œä¸‹é¢é…ç½®nginxæ¥å¿½ç•¥ç«¯å£å·è®¿é—®, æ·»åŠ 7098çš„vhost<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    listen [::]:80;</span><br><span class="line"></span><br><span class="line">    server_name *.ngrok.frontjs.cc;</span><br><span class="line">    proxy_set_header &quot;Host&quot; $host:7098;</span><br><span class="line"></span><br><span class="line">    root /mnt/portal-cms;</span><br><span class="line">    index index.html index.htm;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">      proxy_pass_header Server;</span><br><span class="line">      proxy_pass http://127.0.0.1:7098;</span><br><span class="line">      proxy_redirect off;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>é‡å¯nginxï¼ˆservice nginx restartï¼‰<br><code>http://test.ngrok.frontjs.cc</code>è®¿é—®æœ¬åœ°7001ç«¯å£æœåŠ¡</p><h5 id="æŠ¥é”™åŠè§£å†³æ–¹æ³•"><a href="#æŠ¥é”™åŠè§£å†³æ–¹æ³•" class="headerlink" title="æŠ¥é”™åŠè§£å†³æ–¹æ³•"></a>æŠ¥é”™åŠè§£å†³æ–¹æ³•</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. 26958 segmentation fault</span><br><span class="line">å‡çº§golangåˆ°æœ€æ–°ç‰ˆ(å‚è€ƒæœ€ä¸Šé¢ç¬¬äºŒä¸ªé“¾æ¥ï¼Œä¸‹è½½æºç å®‰è£…golang)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å¾®ä¿¡å¼€å‘æ—¶ï¼Œæœ¬åœ°æœåŠ¡è°ƒè¯•åŸŸåçš„é—®é¢˜ï¼Œé‚æ­å»ºngrokï¼Œå†…ç½‘ç©¿é€ã€‚å¾ˆä¹…ä»¥å‰æ­å»ºçš„ï¼Œç°æ•´ç†åˆ°åšå®¢é‡Œï¼Œæ–¹ä¾¿ä»¥åæŸ¥é˜…&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="ngrok" scheme="https://yl.frontjs.cc/tags/ngrok/"/>
    
  </entry>
  
  <entry>
    <title>mongooseåˆ†ç»„æŸ¥è¯¢è®°å½•</title>
    <link href="https://yl.frontjs.cc/2018/11/01/2018-11-01-mongoose-aggregate-gruop/"/>
    <id>https://yl.frontjs.cc/2018/11/01/2018-11-01-mongoose-aggregate-gruop/</id>
    <published>2018-11-01T07:35:31.000Z</published>
    <updated>2021-01-12T12:13:35.757Z</updated>
    
    <content type="html"><![CDATA[<p>mongooseèšåˆåˆ†ç»„(aggregate, group)çš„ç®€å•ä½¿ç”¨è®°å½•ï¼Œç›´æ¥ä¸Šä»£ç </p><a id="more"></a><h4 id="æ•°æ®æ¨¡å‹"><a href="#æ•°æ®æ¨¡å‹" class="headerlink" title="æ•°æ®æ¨¡å‹"></a>æ•°æ®æ¨¡å‹</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># model/report.js</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function">(<span class="params">&#123; Schema, db &#125;, app</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> Report = <span class="keyword">new</span> Schema(&#123;</span><br><span class="line">    platform: <span class="built_in">String</span>,</span><br><span class="line">    cname: <span class="built_in">String</span>,</span><br><span class="line">    url: <span class="built_in">String</span>,</span><br><span class="line">    floor: <span class="built_in">String</span></span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    timestamps: <span class="literal">true</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> db.model(<span class="string">'Report'</span>, Report, <span class="string">'Report'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä»¥æŸä¸ªå­—æ®µåˆ†ç»„"><a href="#ä»¥æŸä¸ªå­—æ®µåˆ†ç»„" class="headerlink" title="ä»¥æŸä¸ªå­—æ®µåˆ†ç»„"></a>ä»¥æŸä¸ªå­—æ®µåˆ†ç»„</h4><ul><li>aggregate groupä½¿ç”¨ï¼šå¦‚æœéœ€è¦åˆ†ç»„çš„å­—æ®µä¸º<code>cname</code>ï¼Œé‚£ä¹ˆ<code>_id</code>å¯¹åº”çš„å€¼å°±ä¸º<code>$cname</code></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dataByDate = <span class="keyword">await</span> <span class="keyword">this</span>.model(<span class="string">'report'</span>).aggregate([</span><br><span class="line">  &#123; <span class="attr">$match</span>: queryCondition &#125;,</span><br><span class="line">  &#123; <span class="attr">$group</span>: &#123;</span><br><span class="line">    _id: <span class="string">'$cname'</span>,</span><br><span class="line">    count: &#123; <span class="attr">$sum</span>: <span class="number">1</span> &#125;</span><br><span class="line">  &#125; &#125;</span><br><span class="line">])</span><br></pre></td></tr></table></figure><ul><li>è¾“å‡ºç»“æœ</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">"_id"</span>: <span class="string">"title2"</span>,</span><br><span class="line">        <span class="string">"count"</span>: <span class="number">22</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">"_id"</span>: <span class="string">"title3"</span>,</span><br><span class="line">        <span class="string">"count"</span>: <span class="number">8</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">"_id"</span>: <span class="string">"title4"</span>,</span><br><span class="line">        <span class="string">"count"</span>: <span class="number">10</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h4 id="å¤šä¸ªç»´åº¦"><a href="#å¤šä¸ªç»´åº¦" class="headerlink" title="å¤šä¸ªç»´åº¦"></a>å¤šä¸ªç»´åº¦</h4><p>ä¸Šé¢æ˜¯é€šè¿‡å­—æ®µ<code>cname</code>æ¥åˆ†ç»„ï¼Œå¦‚æœæˆ‘ä»¬åŒæ—¶æƒ³ç»Ÿè®¡æ¯å¤©çš„æ¯ä¸ª<code>cname</code>çš„æ•°é‡å‘¢ï¼Ÿå¦‚ä¸‹ï¼Œ<code>_id</code>é‡ŒæŒ‡å®šä¸¤ä¸ªåˆ†ç»„æ¡ä»¶ï¼Œç„¶åä½¿ç”¨<code>$project</code>ç»™åˆ†ç»„åæ•°æ®å­—æ®µé‡å‘½åï¼Œç„¶åç»§ç»­åˆ†ç»„</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> data = <span class="keyword">await</span> <span class="keyword">this</span>.model(<span class="string">'report'</span>).aggregate([</span><br><span class="line">  &#123;</span><br><span class="line">    $match: queryCondition</span><br><span class="line">  &#125;, &#123; <span class="attr">$group</span>: &#123;</span><br><span class="line">    _id: &#123;</span><br><span class="line">      [dimension]: <span class="string">'$'</span> + dimension,</span><br><span class="line">      date: &#123; <span class="attr">$dateToString</span>: &#123; <span class="attr">format</span>: <span class="string">'%Y-%m-%d'</span>, <span class="attr">date</span>: <span class="string">'$createdAt'</span> &#125; &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    count: &#123; <span class="attr">$sum</span>: <span class="number">1</span> &#125;</span><br><span class="line">  &#125; &#125;, &#123;</span><br><span class="line">    $project: &#123;</span><br><span class="line">      _id: <span class="number">0</span>,</span><br><span class="line">      date: <span class="string">'$_id.date'</span>,</span><br><span class="line">      [dimension]: &#123;</span><br><span class="line">        [dimension]: <span class="string">`$_id.<span class="subst">$&#123;dimension&#125;</span>`</span>,</span><br><span class="line">        count: <span class="string">'$count'</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    $group: &#123;</span><br><span class="line">      _id: <span class="string">'$date'</span>,</span><br><span class="line">      [dimension]: &#123; <span class="attr">$push</span>: <span class="string">`$<span class="subst">$&#123;dimension&#125;</span>`</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">])</span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">"_id"</span>: <span class="string">"2018-10-30"</span>,</span><br><span class="line">        <span class="string">"cname"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">"cname"</span>: <span class="string">"title4"</span>,</span><br><span class="line">                <span class="string">"count"</span>: <span class="number">2</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">"_id"</span>: <span class="string">"2018-10-31"</span>,</span><br><span class="line">        <span class="string">"cname"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">"cname"</span>: <span class="string">"title4"</span>,</span><br><span class="line">                <span class="string">"count"</span>: <span class="number">8</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">"cname"</span>: <span class="string">"title3"</span>,</span><br><span class="line">                <span class="string">"count"</span>: <span class="number">8</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">"cname"</span>: <span class="string">"title2"</span>,</span><br><span class="line">                <span class="string">"count"</span>: <span class="number">22</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>æ›´å¤šç”¨æ³•ï¼Œå‚è€ƒ<a href="https://mongoosejs.com/docs/api.html#Aggregate" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p><h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><ul><li><a href="https://docs.mongodb.com/manual/aggregation/" target="_blank" rel="noopener">https://docs.mongodb.com/manual/aggregation/</a></li><li><a href="https://mongoosejs.com/docs/api.html#Aggregate" target="_blank" rel="noopener">https://mongoosejs.com/docs/api.html#Aggregate</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;mongooseèšåˆåˆ†ç»„(aggregate, group)çš„ç®€å•ä½¿ç”¨è®°å½•ï¼Œç›´æ¥ä¸Šä»£ç &lt;/p&gt;
    
    </summary>
    
    
      <category term="mongoose" scheme="https://yl.frontjs.cc/tags/mongoose/"/>
    
  </entry>
  
  <entry>
    <title>ç§‘å­¦ä¸Šç½‘ï¼švultræ­å»ºshadowsocksé‡‡å‘è®°å½•</title>
    <link href="https://yl.frontjs.cc/2018/10/30/2018-10-30-vultr-ss/"/>
    <id>https://yl.frontjs.cc/2018/10/30/2018-10-30-vultr-ss/</id>
    <published>2018-10-30T07:35:31.000Z</published>
    <updated>2021-01-12T12:13:35.757Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è¯´æ˜ï¼šç½‘ä¸Šå¾ˆå¤šç›¸å…³æ•™ç¨‹ï¼Œå¤§å¤šæ•°æ˜¯åŸºäºcentosçš„ï¼Œæœ¬æ•™ç¨‹åŸºäºUbuntu(ä¸»è¦æ˜¯å¤šè´¦å·è®¾ç½®)</p></blockquote><h4 id="æ³¨å†Œvutrlè´¦å·ï¼Œè´­ä¹°æœåŠ¡å™¨"><a href="#æ³¨å†Œvutrlè´¦å·ï¼Œè´­ä¹°æœåŠ¡å™¨" class="headerlink" title="æ³¨å†Œvutrlè´¦å·ï¼Œè´­ä¹°æœåŠ¡å™¨"></a>æ³¨å†Œvutrlè´¦å·ï¼Œè´­ä¹°æœåŠ¡å™¨</h4><ul><li>æ³¨å†Œvutrl <a href="https://www.vultr.com/?ref=7574159" target="_blank" rel="noopener">https://www.vultr.com</a></li></ul><a id="more"></a><p>æ–°ç”¨æˆ·æ³¨å†Œä½¿ç”¨PayPalï¼Œå……å€¼å¤šå°‘é€å¤šå°‘ï¼Œæœ€å¤šé€100åˆ€(æœæ–­å……å€¼äº†100åˆ€ï¼Œåé¢å‘ç°èµ é€çš„100åˆ€æœ‰æ•ˆæœŸæ˜¯1å¹´)<br><img src="/images/2018-10/30-1.png" alt=""></p><ul><li>è´­ä¹°æœåŠ¡å™¨ï¼Œé€‰æ‹©æœ€æ–°çš„Ubuntuï¼ŒèŠ‚ç‚¹é€‰æ—¥æœ¬ä¸œäº¬</li></ul><p><img src="/images/2018-10/30-2.png" alt=""></p><p><img src="/images/2018-10/30-3.png" alt=""></p><ul><li>é…ç½®é€‰æœ€å°çš„ï¼Œä¸è¿‡$2.5æ¯æœˆçš„åªæ”¯æŒIPV6ï¼Œä¸å»ºè®®é€‰æ‹©ï¼Œæˆ‘è¿™é‡Œé€‰çš„æ¯æœˆ5åˆ€çš„ï¼Œé€‰æ‹©å®Œåç‚¹å‡»<code>deploy now</code>ï¼Œç„¶åç­‰å¾…æœåŠ¡å™¨é…ç½®å¹¶å¯åŠ¨</li></ul><p><img src="/images/2018-10/30-4.png" alt=""></p><p><img src="/images/2018-10/30-5.png" alt=""></p><ul><li>å¯åŠ¨å®Œæˆåï¼Œåœ¨<code>Servers</code>é‡Œå°±å¯ä»¥çœ‹åˆ°åˆšæ‰è´­ä¹°çš„vpsäº†</li></ul><p><img src="/images/2018-10/30-6.png" alt=""></p><ul><li>ç‚¹å‡»æœåŠ¡å™¨ï¼ŒæŸ¥çœ‹æœåŠ¡å™¨çš„ipï¼Œç”¨æˆ·åï¼Œä»¥åŠå¯†ç </li></ul><p><img src="/images/2018-10/30-7.png" alt=""></p><h4 id="å®‰è£…shadowsocks"><a href="#å®‰è£…shadowsocks" class="headerlink" title="å®‰è£…shadowsocks"></a>å®‰è£…shadowsocks</h4><ul><li>sshç™»å½•æœåŠ¡å™¨ï¼Œè´¦å·å¯†ç æ¥æºäºä¸Šå›¾</li></ul><p><img src="/images/2018-10/30-8.png" alt=""></p><ul><li><p>å®‰è£…shadowsocksï¼Œç½‘ä¸Šæ•™ç¨‹å¾ˆå¤šï¼Œè¿™é‡Œç›´æ¥copyè¿‡æ¥å®‰è£…è„šæœ¬</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ wget --no-check-certificate https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks.sh</span><br><span class="line">$ chmod +x shadowsocks.sh</span><br><span class="line">$ ./shadowsocks.sh 2&gt;&amp;1 | tee shadowsocks.log</span><br></pre></td></tr></table></figure></li><li><p>å¦‚ä¸Šä¸‰æ­¥æ‰§è¡Œå®Œæˆåï¼Œä¸­é€”ä¼šè®©ä½ è®¾ç½®ä¸€ä¸ªå¯†ç ï¼Œé€‰æ‹©ä¸€ä¸ªç«¯å£ï¼Œè¿˜æœ‰é€‰æ‹©ä¸€ä¸ªåè®®(å¿˜äº†æˆªå›¾äº†â€¦)ï¼Œåè®®æˆ‘é€‰çš„ç¬¬7ä¸ª<code>aes-256-cfb</code>ï¼Œç­‰å¾…ä¸€ä¼šåï¼Œshadowsockså°±å®‰è£…å¥½äº†ï¼Œæ§åˆ¶å°å¯ä»¥çœ‹åˆ°shadowsocksæœåŠ¡çš„ç›¸å…³ä¿¡æ¯ï¼Œå¤§è‡´å¦‚ä¸‹ï¼Œè‡³æ­¤ï¼ŒssæœåŠ¡å°±å·²ç»å¯ç”¨äº†</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Your Server IP        :  IP</span><br><span class="line">Your Server Port      :  Port</span><br><span class="line">Your Password         :  Password</span><br><span class="line">Your Encryption Method:  aes-256-cfb</span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…shadowsockså®¢æˆ·ç«¯</p><ul><li><a href="https://github.com/qinyuhang/ShadowsocksX-NG-R/releases" target="_blank" rel="noopener">ShadowsocksX-NG</a></li><li><a href="https://sourceforge.net/projects/shadowsocksgui/" target="_blank" rel="noopener">Macç‰ˆ</a></li><li><a href="https://github.com/shadowsocks/shadowsocks-windows/releases" target="_blank" rel="noopener">windowsç‰ˆ</a></li></ul></li><li><p>æ·»åŠ shadowsocksæœåŠ¡å™¨ä¿¡æ¯</p></li></ul><p><img src="/images/2018-10/30-9.png" alt=""></p><p>å¤§åŠŸå‘Šæˆï¼Œå¯ä»¥å°è¯•è®¿é—®<a href="https://www.google.com" target="_blank" rel="noopener">https://www.google.com</a>ï¼Œç„¶åå¯ä»¥æ„‰å¿«çš„å·¥ä½œäº†</p><h4 id="TCPåŠ é€Ÿä¸å¤šè´¦å·é…ç½®"><a href="#TCPåŠ é€Ÿä¸å¤šè´¦å·é…ç½®" class="headerlink" title="TCPåŠ é€Ÿä¸å¤šè´¦å·é…ç½®"></a>TCPåŠ é€Ÿä¸å¤šè´¦å·é…ç½®</h4><ul><li><p>æ‰“å¼€TCP Fast Open</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim /etc/rc.local</span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ å¦‚ä¸‹å†…å®¹åˆ°ä¸Šé¢æ‰“å¼€çš„æ–‡ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo 3 &gt; /proc/sys/net/ipv4/tcp_fastopen</span><br></pre></td></tr></table></figure></li><li><p>å‚ç…§ä¸Šé¢æ–¹æ³•ï¼Œæ·»åŠ <code>net.ipv4.tcp_fastopen = 3</code>åˆ°<code>/etc/sysctl.conf</code>æ–‡ä»¶</p></li><li><p>ä¿®æ”¹shadowsocksé…ç½®æ–‡ä»¶çš„<code>fast_open</code>é€‰é¡¹ä¸º<code>true</code>ï¼Œå‚è€ƒä¸‹é¢å¤šè´¦å·é…ç½®é‡Œçš„ä¿®æ”¹</p></li><li><p>å¤šè´¦å·ç«¯å£é…ç½®ï¼šä¿®æ”¹shadowsocksé…ç½®ï¼Œé…ç½®æ–‡ä»¶åœ°å€ä¸º<code>/etc/shadowsocks.json</code>ï¼Œæ·»åŠ å¤šä¸ªç«¯å£å’Œå¯¹åº”çš„å¯†ç </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># åŸé…ç½®</span><br><span class="line">&#123;</span><br><span class="line">    &quot;server&quot;:&quot;0.0.0.0&quot;,</span><br><span class="line">    &quot;server_port&quot;:port,</span><br><span class="line">    &quot;local_address&quot;:&quot;127.0.0.1&quot;,</span><br><span class="line">    &quot;local_port&quot;:1080,</span><br><span class="line">    &quot;password&quot;:&quot;password&quot;,</span><br><span class="line">    &quot;timeout&quot;:300,</span><br><span class="line">    &quot;method&quot;:&quot;aes-256-cfb&quot;,</span><br><span class="line">    &quot;fast_open&quot;:false</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># ä¿®æ”¹åçš„é…ç½®</span><br><span class="line">&#123;</span><br><span class="line">    &quot;server&quot;:&quot;0.0.0.0&quot;,</span><br><span class="line">    &quot;local_address&quot;:&quot;127.0.0.1&quot;,</span><br><span class="line">    &quot;local_port&quot;:1080,</span><br><span class="line">    &quot;port_password&quot;: &#123;</span><br><span class="line">      &quot;port1&quot;:&quot;psw1&quot;,</span><br><span class="line">      &quot;port2&quot;:&quot;psw2&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;timeout&quot;:300,</span><br><span class="line">    &quot;method&quot;:&quot;aes-256-cfb&quot;,</span><br><span class="line">    &quot;fast_open&quot;:true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>é‡å¯shadowsocksæœåŠ¡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ /etc/init.d/shadowsocks restart</span><br></pre></td></tr></table></figure></li></ul><p>è‡³æ­¤ï¼ŒåŠ é€Ÿä¸å¤šè´¦å·ç«¯å£é…ç½®å°±å®Œæˆäº†ï¼Œç„¶åæˆ‘ä»¬åœ¨shadowsockså®¢æˆ·ç«¯é‡Œæ·»åŠ è¿™ä¸¤ä¸ªè´¦å·ï¼Œé“¾æ¥è¯•è¯•ã€‚æƒŠå–œçš„å‘ç°ï¼Œåªæœ‰æœ€åé…ç½®çš„é‚£ä¸ªå¯ä»¥æˆåŠŸè¿æ¥ï¼Œå‰é¢çš„è¿æ¥ä¸Šåè¿˜æ˜¯ä¼šå›°åœ¨å¢™é‡Œã€‚æ²¡é”™ï¼Œéœ€è¦ä¿®æ”¹é˜²ç«å¢™çš„é…ç½®</p><h4 id="é˜²ç«å¢™é…ç½®ä¿®æ”¹"><a href="#é˜²ç«å¢™é…ç½®ä¿®æ”¹" class="headerlink" title="é˜²ç«å¢™é…ç½®ä¿®æ”¹"></a>é˜²ç«å¢™é…ç½®ä¿®æ”¹</h4><ul><li>vultré˜²ç«å¢™é…ç½®</li></ul><p>protocolé€‰æ‹©TCP(æˆ‘åŒæ—¶å¼€å¯äº†UDP)ï¼Œporté€‰æ‹©shadowsocksé‡Œå¼€å¯çš„å¤šä¸ªç«¯å£ï¼Œæœ‰å¤šå°‘ä¸ªç«¯å£å°±é…ç½®å¤šå°‘ä¸ªrule(PS: æˆ‘çœ‹Portæ—è¾¹æ˜¾ç¤ºçš„<code>or range</code>ï¼Œä¸è¿‡è®¾ç½®rangeåæ— æ•ˆï¼Œæœ‰åŒå­¦å¯ä»¥è®¾ç½®rangçš„è¯ï¼Œéº»çƒ¦ç•™è¨€æŒ‡æ•™ä¸‹ï¼Œæ„Ÿè°¢æ„Ÿè°¢)ã€‚rulesè®¾ç½®åï¼Œåœ¨Linked Instancesé‡Œé€‰æ‹©ä½ çš„å®ä¾‹è¿›è¡Œå…³è”</p><p><img src="/images/2018-10/30-10.png" alt=""></p><p><img src="/images/2018-10/30-11.png" alt=""></p><ul><li><p>æœåŠ¡å™¨é˜²ç«å¢™é…ç½®</p><ul><li><p>ç™»å½•æœåŠ¡å™¨åï¼Œæ§åˆ¶å°å®‰è£…<code>ufw</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install ufw</span><br></pre></td></tr></table></figure></li><li><p>allowéœ€è¦å¼€æ”¾çš„ç«¯å£</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ ufw enable</span><br><span class="line">$ ufw default deny</span><br><span class="line">$ ufw allow 22/tcp</span><br><span class="line">$ ufw allow port1</span><br><span class="line">$ ufw allow port2</span><br></pre></td></tr></table></figure></li><li><p>é‡å¯ufwæœåŠ¡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ufw reload</span><br></pre></td></tr></table></figure></li></ul></li><li><p>é‡å¯shadowsocksæœåŠ¡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ /etc/init.d/shadowsocks restart</span><br></pre></td></tr></table></figure></li></ul><p>ç„¶åä½¿ç”¨shadowsockså®¢æˆ·ç«¯è¿æ¥å¤šä¸ªè´¦å·ï¼Œå‘ç°éƒ½èƒ½æˆåŠŸè¿æ¥äº†</p><h5 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h5><ul><li>ç§‘å­¦ä¸Šç½‘ï¼Œæ–‡æ˜ä¸Šç½‘</li><li>å¦‚è‹¥æœ¬æ•™ç¨‹è¿åç›¸å…³æ³•å¾‹æ³•è§„ï¼Œè¯·è”ç³»æœ¬äººè¿›è¡Œåˆ é™¤</li></ul><h5 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h5><ul><li><a href="https://medium.com/@zoomyale/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91%E7%9A%84%E7%BB%88%E6%9E%81%E5%A7%BF%E5%8A%BF-%E5%9C%A8-vultr-vps-%E4%B8%8A%E6%90%AD%E5%BB%BA-shadowsocks-fd57c807d97e" target="_blank" rel="noopener">ç§‘å­¦ä¸Šç½‘ä¹‹vultrå®‰è£…shadowsocks</a></li><li><a href="https://www.cnblogs.com/sweet521/p/5733466.html" target="_blank" rel="noopener">ufwç”¨æ³•</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;è¯´æ˜ï¼šç½‘ä¸Šå¾ˆå¤šç›¸å…³æ•™ç¨‹ï¼Œå¤§å¤šæ•°æ˜¯åŸºäºcentosçš„ï¼Œæœ¬æ•™ç¨‹åŸºäºUbuntu(ä¸»è¦æ˜¯å¤šè´¦å·è®¾ç½®)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;æ³¨å†Œvutrlè´¦å·ï¼Œè´­ä¹°æœåŠ¡å™¨&quot;&gt;&lt;a href=&quot;#æ³¨å†Œvutrlè´¦å·ï¼Œè´­ä¹°æœåŠ¡å™¨&quot; class=&quot;headerlink&quot; title=&quot;æ³¨å†Œvutrlè´¦å·ï¼Œè´­ä¹°æœåŠ¡å™¨&quot;&gt;&lt;/a&gt;æ³¨å†Œvutrlè´¦å·ï¼Œè´­ä¹°æœåŠ¡å™¨&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;æ³¨å†Œvutrl &lt;a href=&quot;https://www.vultr.com/?ref=7574159&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.vultr.com&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="vultr" scheme="https://yl.frontjs.cc/tags/vultr/"/>
    
      <category term="vps" scheme="https://yl.frontjs.cc/tags/vps/"/>
    
      <category term="shadowsocks" scheme="https://yl.frontjs.cc/tags/shadowsocks/"/>
    
  </entry>
  
  <entry>
    <title>GitHubå¤šè´¦å·ç®¡ç†è¸©å‘è®°å½•</title>
    <link href="https://yl.frontjs.cc/2018/07/24/2018-07-24-manage-git-account/"/>
    <id>https://yl.frontjs.cc/2018/07/24/2018-07-24-manage-git-account/</id>
    <published>2018-07-24T07:35:31.000Z</published>
    <updated>2021-01-12T12:13:35.756Z</updated>
    
    <content type="html"><![CDATA[<h4 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h4><blockquote><p>æ–°å¢äº†ä¸€ä¸ªGithubè´¦å·ï¼Œå¹¶pushè¿‡ä»£ç ï¼Œç„¶åç”¨ä»¥å‰çš„githubè´¦å·pushæ—¶ï¼Œæ­»æ´»pushä¸ä¸Šå»<br><a id="more"></a></p></blockquote><h4 id="å¯»æ‰¾è§£å†³åŠæ³•"><a href="#å¯»æ‰¾è§£å†³åŠæ³•" class="headerlink" title="å¯»æ‰¾è§£å†³åŠæ³•"></a>å¯»æ‰¾è§£å†³åŠæ³•</h4><blockquote><p>ä½¿ç”¨ssh key</p></blockquote><p>æ¯ä¸ªè´¦å·å¯¹åº”ä¸€ä¸ªkey, Githubä¸Šå¡«å†™å¯¹åº”çš„keyï¼ˆå¦‚ï¼š<code>id_rsa.github.yl2014.pub</code>æ–‡ä»¶å†…å®¹ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"># ç”Ÿæˆkeyæ–‡ä»¶</span><br><span class="line">ssh-keygen -t rsa -f ~/.ssh/id_rsa.github.yl2014 -C &quot;yl2014@xx.com&quot;</span><br><span class="line">ssh-keygen -t rsa -f ~/.ssh/id_rsa.github.test -C &quot;test@xx.com&quot;</span><br><span class="line"></span><br><span class="line"># æ·»åŠ keyæ–‡ä»¶</span><br><span class="line">ssh-add ~/.ssh/id_rsa.github.yl2014</span><br><span class="line">ssh-add ~/.ssh/id_rsa.github.test</span><br><span class="line"></span><br><span class="line"># é…ç½®config</span><br><span class="line">vim ~/.ssh/config</span><br><span class="line">Host yl2014</span><br><span class="line">    HostName github.com</span><br><span class="line">    IdentityFile ~/.ssh/id_rsa.github.yl2014</span><br><span class="line">    User git</span><br><span class="line"></span><br><span class="line">Host test</span><br><span class="line">    HostName github.com</span><br><span class="line">    IdentityFile ~/.ssh/id_rsa.github.test</span><br><span class="line">    User git</span><br><span class="line"></span><br><span class="line"># æµ‹è¯•</span><br><span class="line">ssh -T yl2014</span><br><span class="line">&gt; Hi YL2014! You&apos;ve successfully authenticated, but GitHub does not provide shell access.</span><br><span class="line"></span><br><span class="line">ssh -T test</span><br><span class="line">&gt; Hi test! You&apos;ve successfully authenticated, but GitHub does not provide shell access.</span><br><span class="line"></span><br><span class="line">ssh -T git@github.com</span><br><span class="line">&gt; Hi YL2014! You&apos;ve successfully authenticated, but GitHub does not provide shell access.</span><br></pre></td></tr></table></figure><p>å¦‚æœå‡ºç° <code>ermission denied (publickey)</code>ï¼Œåˆ™è¡¨ç¤ºkeyæ²¡æ·»åŠ æˆåŠŸï¼Œæ‰§è¡Œ<br><code>ssh-add ~/.ssh/id_rsa.github.yl2014</code>ï¼Œæˆ–ç”¨debugæ¨¡å¼æŸ¥çœ‹å…·ä½“å‡ºé”™ä¿¡æ¯<code>ssh -vT git@github.com</code></p><p>å¦‚æœå‘ç°æ¨é€æ—¶ä¸€ç›´æ˜¯æŸä¸ªGitHubè´¦å·ï¼Œæ— æ³•åˆ‡æ¢æˆå¦ä¸€ä¸ªï¼Œå¯ä»¥é‡‡å–å¦‚ä¸‹æ“ä½œï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># åˆ é™¤æ‰€æœ‰sessionï¼Œå¹¶æ·»åŠ éœ€è¦è®¤è¯çš„</span><br><span class="line">$ ssh-add -D</span><br><span class="line">$ ssh-add id_rsa.github.yl2014</span><br></pre></td></tr></table></figure></p><blockquote><p>å‚è€ƒï¼š<a href="http://www.barretlee.com/blog/2016/03/09/config-in-ssh-after-troubling-git-connection/" target="_blank" rel="noopener">http://www.barretlee.com/blog/2016/03/09/config-in-ssh-after-troubling-git-connection/</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;æ–°å¢äº†ä¸€ä¸ªGithubè´¦å·ï¼Œå¹¶pushè¿‡ä»£ç ï¼Œç„¶åç”¨ä»¥å‰çš„githubè´¦å·pushæ—¶ï¼Œæ­»æ´»pushä¸ä¸Šå»&lt;br&gt;
    
    </summary>
    
    
      <category term="git" scheme="https://yl.frontjs.cc/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>Let&#39;s Encrypt é€šé…ç¬¦è¯ä¹¦é…ç½®</title>
    <link href="https://yl.frontjs.cc/2018/03/30/2018-03-30-Let&#39;s%20Encrypt%20https/"/>
    <id>https://yl.frontjs.cc/2018/03/30/2018-03-30-Let&#39;s Encrypt https/</id>
    <published>2018-03-30T07:35:31.000Z</published>
    <updated>2021-01-12T12:13:35.756Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡åªæ˜¯å¯¹é…ç½®è¿‡ç¨‹çš„è®°å½•ï¼Œå¦‚æœ‰é—®é¢˜ï¼Œæ¬¢è¿ç•™è¨€</p></blockquote><h4 id="ç¯å¢ƒä¸ä¾èµ–"><a href="#ç¯å¢ƒä¸ä¾èµ–" class="headerlink" title="ç¯å¢ƒä¸ä¾èµ–"></a>ç¯å¢ƒä¸ä¾èµ–</h4><a id="more"></a><p>é˜¿é‡Œäº‘ECS ubunt16.0.4<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get update</span><br><span class="line">$ sudo apt-get install software-properties-common</span><br><span class="line">$ sudo add-apt-repository ppa:certbot/certbot</span><br><span class="line">$ sudo apt-get update</span><br><span class="line">$ sudo apt-get install python-certbot-nginx</span><br></pre></td></tr></table></figure></p><h4 id="ç”Ÿæˆè¯ä¹¦"><a href="#ç”Ÿæˆè¯ä¹¦" class="headerlink" title="ç”Ÿæˆè¯ä¹¦"></a>ç”Ÿæˆè¯ä¹¦</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ certbot -d *.frontjs.cc --server https://acme-v02.api.letsencrypt.org/directory --manual --preferred-challenges dns-01</span><br></pre></td></tr></table></figure><p>æŒ‰æç¤ºæ“ä½œï¼Œæ³¨æ„äº‹é¡¹å¦‚ä¸‹ï¼š<br><img src="/images/2018-03-30-1.png" alt=""><br>æ³¨æ„ä¸Šé¢åšè®°å·çš„åœ°æ–¹ï¼Œåˆ°äº†è¿™é‡Œå…ˆä¸è¦Enterï¼Œå…ˆå»é˜¿é‡Œäº‘ä¸ŠåŸŸåè§£æå“ªé‡Œæ·»åŠ ä¸€æ¡è§£æ<br><img src="/images/2018-03-30-2.png" alt=""><br>æ·»åŠ å®Œæˆåï¼Œæ–°å¼€ä¸€ä¸ªçª—å£æµ‹è¯•ä¸‹æ˜¯å¦æˆåŠŸ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ dig _acme-challenge.frontjs.cc txt</span><br></pre></td></tr></table></figure></p><p><img src="/images/2018-03-30-3.png" alt=""><br>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè¡¨ç¤ºæˆåŠŸäº†<br>ç„¶åå›åˆ°å®‰è£…çš„çª—å£ï¼ŒæŒ‰Enter<br><img src="/images/2018-03-30-4.png" alt=""><br>OKï¼Œè¯ä¹¦ç”Ÿæˆå®Œæˆ</p><blockquote><p>è¯ä¹¦æœ‰æ•ˆæœŸ3ä¸ªæœˆï¼Œè®¾ç½®å®šæ—¶ä»»åŠ¡æ¥æ›´æ–°è¯ä¹¦</p><ul><li>ç¼–å†™å®šæ—¶ä»»åŠ¡è„šæœ¬<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ vim /etc/letsencrypt/live/renew.sh</span><br><span class="line"># å†…å®¹ï¼šcertbot renew --pre-hook &quot;service nginx stop&quot; --post-hook &quot;service nginx start&quot;</span><br></pre></td></tr></table></figure></li></ul></blockquote><ul><li>è®¾ç½®å®šæ—¶ä»»åŠ¡<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ crontab -e</span><br><span class="line"># æ·»åŠ å¦‚ä¸‹å†…å®¹ 0 0 1 * * /etc/letsencrypt/live/renew.sh &gt;/dev/null 2&gt;&amp;1</span><br></pre></td></tr></table></figure></li></ul><h4 id="nginxé…ç½®"><a href="#nginxé…ç½®" class="headerlink" title="nginxé…ç½®"></a>nginxé…ç½®</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  listen [::]:80;</span><br><span class="line"></span><br><span class="line">  listen 443 ssl;</span><br><span class="line">  # ssl off æ”¯æŒhttpå’Œhttps</span><br><span class="line">  # ssl on;</span><br><span class="line">  ssl_certificate /etc/letsencrypt/live/frontjs.cc/fullchain.pem;</span><br><span class="line">  ssl_certificate_key /etc/letsencrypt/live/frontjs.cc/privkey.pem;</span><br><span class="line"></span><br><span class="line">  server_name frontjs.cc;</span><br><span class="line"></span><br><span class="line">  # å¼ºåˆ¶https</span><br><span class="line">  # rewrite ^(.*)$  https://$host$1 permanent;</span><br><span class="line"></span><br><span class="line">  location / &#123;</span><br><span class="line">    proxy_pass http://127.0.0.1:7000;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‡å¯nginx<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ service nginx restart</span><br></pre></td></tr></table></figure></p><h5 id="enjoy-yourself"><a href="#enjoy-yourself" class="headerlink" title="enjoy yourself!"></a>enjoy yourself!</h5><h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><p><a href="https://letsencrypt.org/" target="_blank" rel="noopener">https://letsencrypt.org/</a><br><a href="https://certbot.eff.org/lets-encrypt/ubuntuxenial-nginx" target="_blank" rel="noopener">https://certbot.eff.org/lets-encrypt/ubuntuxenial-nginx</a><br><a href="https://certbot.eff.org/docs/using.html" target="_blank" rel="noopener">https://certbot.eff.org/docs/using.html</a></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;æœ¬æ–‡åªæ˜¯å¯¹é…ç½®è¿‡ç¨‹çš„è®°å½•ï¼Œå¦‚æœ‰é—®é¢˜ï¼Œæ¬¢è¿ç•™è¨€&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;ç¯å¢ƒä¸ä¾èµ–&quot;&gt;&lt;a href=&quot;#ç¯å¢ƒä¸ä¾èµ–&quot; class=&quot;headerlink&quot; title=&quot;ç¯å¢ƒä¸ä¾èµ–&quot;&gt;&lt;/a&gt;ç¯å¢ƒä¸ä¾èµ–&lt;/h4&gt;
    
    </summary>
    
    
      <category term="let&#39;s encrype" scheme="https://yl.frontjs.cc/tags/let-s-encrype/"/>
    
      <category term="https" scheme="https://yl.frontjs.cc/tags/https/"/>
    
  </entry>
  
  <entry>
    <title>ECSä¸Šnodejså‡çº§(7.2.0)è®°å½•</title>
    <link href="https://yl.frontjs.cc/2016/12/08/2016-12-08-ecs-nodejs/"/>
    <id>https://yl.frontjs.cc/2016/12/08/2016-12-08-ecs-nodejs/</id>
    <published>2016-12-08T09:40:31.000Z</published>
    <updated>2021-01-12T12:13:35.756Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æ›´æ–°ï¼šæ­¤æ–‡ä½œåºŸï¼Œç”¨nvmå°±å¥½äº†ï¼Œå“ªé‚£ä¹ˆå¤šç ´äº‹â€¦</p></blockquote><h5 id="å¸è½½"><a href="#å¸è½½" class="headerlink" title="å¸è½½"></a>å¸è½½</h5><p>å¦‚æœä¹‹å‰æ˜¯é€šè¿‡ <code>apt-get install nodejs npm</code>å®‰è£…çš„ï¼Œç›´æ¥æ‰§è¡Œ <code>apt-get remove nodejs npm -y</code>å¸è½½ï¼Œè‹¥åŸæ¥æ˜¯é€šè¿‡æºç ç¼–è¯‘å®‰è£…çš„(æˆ‘ä¹‹å‰å°±æ˜¯)ï¼Œå‚è€ƒè¿™ä¸ªè¿›è¡Œå¸è½½<a href="https://hungred.com/how-to/completely-removing-nodejs-npm/" target="_blank" rel="noopener">https://hungred.com/how-to/completely-removing-nodejs-npm/</a></p><h5 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h5><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -sL https://deb.nodesource.com/setup_7.x | sudo -E bash -</span><br><span class="line">sudo apt-get install -y nodejs</span><br></pre></td></tr></table></figure><blockquote><p>å‚è€ƒï¼š<a href="https://nodejs.org/en/download/package-manager/#debian-and-ubuntu-based-linux-distributions" target="_blank" rel="noopener">https://nodejs.org/en/download/package-manager/#debian-and-ubuntu-based-linux-distributions</a></p></blockquote><h6 id="æ˜¯å¦æˆåŠŸï¼Ÿ"><a href="#æ˜¯å¦æˆåŠŸï¼Ÿ" class="headerlink" title="æ˜¯å¦æˆåŠŸï¼Ÿ"></a>æ˜¯å¦æˆåŠŸï¼Ÿ</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@yl:/etc# node -v</span><br><span class="line">-bash: /usr/local/bin/node: No such file or directory</span><br><span class="line">root@yl:/etc# npm -v</span><br><span class="line">-bash: /usr/local/bin/npm: No such file or directory</span><br></pre></td></tr></table></figure><p>å¾ˆæ˜æ˜¾æ²¡æˆåŠŸ(æ³¨ï¼šåœ¨çœŸå®çš„ubuntué‡Œï¼Œå·²ç»æˆåŠŸäº†ï¼Œè¿™ä¸ªæ˜¯ECSä¸Šæ˜¾ç¤ºäº†)</p><h5 id="çœ‹çœ‹nodeè£…åœ¨å“ªäº†"><a href="#çœ‹çœ‹nodeè£…åœ¨å“ªäº†" class="headerlink" title="çœ‹çœ‹nodeè£…åœ¨å“ªäº†"></a>çœ‹çœ‹nodeè£…åœ¨å“ªäº†</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@yl:/etc# which node</span><br><span class="line">/usr/bin/node</span><br><span class="line">root@yl:/etc# which npm</span><br><span class="line">/usr/bin/npm</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œå…¶å®æ˜¯å®‰è£…æˆåŠŸäº†ï¼Œåªæ˜¯å‘½ä»¤çš„å¯¹åº”ç›®å½•ä¸å¯¹ï¼Œè¿™å°±å¥½åŠäº†</p><h5 id="è½¯é“¾"><a href="#è½¯é“¾" class="headerlink" title="è½¯é“¾"></a>è½¯é“¾</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root@yl:/etc# ln -s /usr/bin/nodejs /usr/local/bin/node</span><br><span class="line">root@yl:/etc# node -v</span><br><span class="line">v7.2.0</span><br><span class="line">root@yl:/etc# ln -s /usr/bin/npm /usr/local/bin/npm</span><br><span class="line">root@yl:/etc# npm -v</span><br><span class="line">3.10.9</span><br></pre></td></tr></table></figure><p>å¯ä»¥æ„‰å¿«çš„ç©è€äº†~~</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;æ›´æ–°ï¼šæ­¤æ–‡ä½œåºŸï¼Œç”¨nvmå°±å¥½äº†ï¼Œå“ªé‚£ä¹ˆå¤šç ´äº‹â€¦&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h5 id=&quot;å¸è½½&quot;&gt;&lt;a href=&quot;#å¸è½½&quot; class=&quot;headerlink&quot; title=&quot;å¸è½½&quot;&gt;&lt;/a&gt;å¸è½½&lt;/h5&gt;&lt;p&gt;å¦‚æœä¹‹å‰æ˜¯é€šè¿‡ &lt;code&gt;apt-get install nodejs npm&lt;/code&gt;å®‰è£…çš„ï¼Œç›´æ¥æ‰§è¡Œ &lt;code&gt;apt-get remove nodejs npm -y&lt;/code&gt;å¸è½½ï¼Œè‹¥åŸæ¥æ˜¯é€šè¿‡æºç ç¼–è¯‘å®‰è£…çš„(æˆ‘ä¹‹å‰å°±æ˜¯)ï¼Œå‚è€ƒè¿™ä¸ªè¿›è¡Œå¸è½½&lt;a href=&quot;https://hungred.com/how-to/completely-removing-nodejs-npm/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://hungred.com/how-to/completely-removing-nodejs-npm/&lt;/a&gt;&lt;/p&gt;
&lt;h5 id=&quot;å®‰è£…&quot;&gt;&lt;a href=&quot;#å®‰è£…&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…&quot;&gt;&lt;/a&gt;å®‰è£…&lt;/h5&gt;
    
    </summary>
    
    
      <category term="ecs" scheme="https://yl.frontjs.cc/tags/ecs/"/>
    
      <category term="ubuntu" scheme="https://yl.frontjs.cc/tags/ubuntu/"/>
    
      <category term="nodejs" scheme="https://yl.frontjs.cc/tags/nodejs/"/>
    
  </entry>
  
  <entry>
    <title>ubuntuä¸Šæ­å»ºftpæœåŠ¡å™¨</title>
    <link href="https://yl.frontjs.cc/2016/06/13/2016-06-13-ubuntu-ftp/"/>
    <id>https://yl.frontjs.cc/2016/06/13/2016-06-13-ubuntu-ftp/</id>
    <published>2016-06-13T09:40:15.000Z</published>
    <updated>2021-01-12T12:13:35.755Z</updated>
    
    <content type="html"><![CDATA[<p>ä¹°é˜¿é‡Œäº‘çš„ECSæœ‰æ®µæ—¶é—´äº†ï¼Œä¹ŸæŠ˜è…¾äº†ä¸€æ®µæ—¶é—´ï¼Œè¿‡æ®µæ—¶é—´å†™ä¸€å†™æŠ˜è…¾çš„ä¸€äº›ä¸œä¸œã€‚æ˜¨å¤©æœ‰ä¸ªæƒ³æ³•ï¼ŒæœåŠ¡å™¨ä¸Šå·²ç»æ­å»ºäº†ä¸€äº›ä¸œè¥¿ï¼Œå¦‚æœéœ€è¦åˆä½œå¼€å‘ï¼Œå¿…ç„¶éœ€è¦ç»™å›¢é˜Ÿçš„å¼€å‘äººå‘˜æœåŠ¡å™¨çš„è´¦å·å’Œå¯†ç ã€‚ä½†æ˜¯è¿™é‡Œæ¶‰åŠåˆ°ä¸€ä¸ªæƒé™é—®é¢˜ï¼Œæ¯”å¦‚ï¼Œå½“æŸä¸ªé¡¹ç›®çš„å‰ç«¯å¼€å‘äººå‘˜åªéœ€è¦å°†å‰ç«¯ä»£ç ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œå°±æ²¡å¿…è¦ç»™æœåŠ¡å™¨çš„æ‰€æœ‰æƒé™ã€‚è„‘æµ·ä¸­ç¬¬ä¸€ååº”å°±æ˜¯ftpäº†ï¼Œåˆšä½¿ç”¨ECSä¹Ÿæ˜¯ç”¨ftpæ¥ç®¡ç†æ–‡ä»¶çš„ã€‚å½“ç„¶ï¼Œjekinsçš„è‡ªåŠ¨åŒ–éƒ¨ç½²ä¹Ÿèƒ½è§£å†³è¿™æ ·çš„éœ€æ±‚ï¼Œè¿™ä¸ªä»¥åæœ‰æ—¶é—´åœ¨å†™ä¸€ç¯‡ã€‚</p><a id="more"></a><p>åœ¨ç½‘ä¸Šæ‰¾äº†ä¸€äº›èµ„æ–™ï¼Œä»¥åŠæŸ¥é˜…ECSçš„å®˜æ–¹æ–‡æ¡£ï¼Œä¹Ÿç¡®å®æ‰¾åˆ°äº†æˆ‘æƒ³è¦çš„ä¸œè¥¿ï¼Œä¾‹å¦‚è¿™ä¸ª<br><a href="https://help.aliyun.com/knowledge_detail/5973912.html" target="_blank" rel="noopener">Linuxä¸‹å¦‚ä½•è¿›è¡ŒFTPè®¾ç½®</a>ï¼Œè¿˜æœ‰è¿™ä¸ª<a href="https://help.aliyun.com/knowledge_detail/5990158.html?spm=5176.788314853.2.1.mVyePK" target="_blank" rel="noopener">ECS Linuxé…ç½®vsftpdé™åˆ¶FTPè´¦æˆ·è®¿é—®å…¶å®ƒç›®å½•</a>ã€‚</p><p>çœ‹å®Œè¿™ä¸¤ç¯‡æ–‡ç« ï¼Œå‘ç°æ²¡ä»€ä¹ˆå¥½å†™çš„ï¼Œåªå‰©ä¸‹å®è·µäº†ã€‚æ‰€ä»¥æˆ‘æ‰“ç®—åœ¨æœ¬åœ°å…ˆæµ‹è¯•ä¸€éï¼Œå¦‚æœæ²¡é—®é¢˜ï¼Œç„¶åå°±åœ¨ECSä¸Šå»æ·»åŠ ftpç”¨æˆ·ï¼Œå¹¶è®¾ç½®è®¿é—®æƒé™ï¼Œä¸‹é¢å¼€å§‹å®è·µã€‚</p><p>æŒ‰ç…§åˆšæ‰ç»™å‡ºçš„ç¬¬ä¸€ä»½æ–‡æ¡£ï¼Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">root@yl:/# apt-get install vsftpd -y</span><br><span class="line">root@yl:/# useradd -d /usr/yl -m -s /usr/sbin/nologin test</span><br><span class="line">root@yl:/# passwd test</span><br><span class="line">è¾“å…¥æ–°çš„ UNIX å¯†ç ï¼š </span><br><span class="line">é‡æ–°è¾“å…¥æ–°çš„ UNIX å¯†ç ï¼š </span><br><span class="line">passwdï¼šå·²æˆåŠŸæ›´æ–°å¯†ç </span><br><span class="line">root@yl:/# chown -R test.test /usr/yl</span><br></pre></td></tr></table></figure><p>ç„¶åå°±æ˜¯ä¿®æ”¹vsftpd.confå’Œshellsæ–‡ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@yl:/# vim /etc/vsftpd.conf</span><br><span class="line">root@yl:/# vim /etc/shells</span><br></pre></td></tr></table></figure><p>shellsæ–‡ä»¶çš„ä¿®æ”¹ï¼Œåœ¨æ–‡ä»¶åé¢åŠ ä¸Š<code>/usr/sbin/nologin</code>ï¼Œvsftpd.confçš„å…³é”®ä¿®æ”¹å¦‚ä¸‹ï¼Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">chroot_local_user=YES</span><br><span class="line">chroot_list_enable=YES</span><br><span class="line"># (default follows)</span><br><span class="line">chroot_list_file=/etc/vsftpd.chroot_list</span><br></pre></td></tr></table></figure><p>è¿™é‡Œç®€å•è¯´æ˜ä¸‹(æ¥æºäºç½‘ç»œ)ï¼š<br>chroot_local_user=YES       #æ˜¯å¦å°†æ‰€æœ‰ç”¨æˆ·é”å®šåœ¨ä¸»ç›®å½•,YESä¸ºå¯ç”¨ NOç¦ç”¨.(åŒ…æ‹¬æ³¨é‡Šæ‰ä¹Ÿä¸ºç¦ç”¨)<br>chroot_list_enable=YES     #æ˜¯å¦å¯åŠ¨é”å®šç”¨æˆ·çš„åå• YESä¸ºå¯ç”¨  NOç¦ç”¨(åŒ…æ‹¬æ³¨é‡Šæ‰ä¹Ÿä¸ºç¦ç”¨)<br>chroot_list_file=/etc/vsftpd.chroot_list     #ç¦ç”¨çš„åˆ—è¡¨åå•  æ ¼å¼ä¸ºä¸€è¡Œä¸€ä¸ªç”¨æˆ·, å¦‚æœåå•é‡Œé¢æœ‰ä¸€ä¸ªftpuserçš„ç”¨æˆ·, åˆ™ftpuserç”¨æˆ·ä¸ä¼šé”å®šåœ¨ä¸»ç›®å½•,ç”¨æˆ·å°†å¯ä»¥è‡ªç”±åˆ‡æ¢ç›®å½•.</p><p>ç„¶åé‡å¯ftpæœåŠ¡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@yl:/# service vsftpd restart</span><br></pre></td></tr></table></figure><p>å°è¯•è¿æ¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@yl:/usr# ftp 127.0.0.1</span><br><span class="line">Connected to 127.0.0.1.</span><br><span class="line">220 (vsFTPd 3.0.2)</span><br><span class="line">Name (127.0.0.1:yl): test</span><br><span class="line">331 Please specify the password.</span><br><span class="line">Password:</span><br><span class="line">500 OOPS: vsftpd: refusing to run with writable root inside chroot()</span><br><span class="line">Login failed.</span><br></pre></td></tr></table></figure><p>å¥½å§ï¼Œçœ‹åˆ°æŠ¥500äº†ï¼Œå“ˆå“ˆã€‚é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œchromeäº†ä¸€ç•ªï¼Œå¾—åˆ°çš„ç­”æ¡ˆæ˜¯æœ€æ–°çš„vsftpå¯¹å—é™ç”¨æˆ·çš„ä¸»ç›®å½•ä¸èƒ½è®¾ç½®writableæƒé™ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬åˆ›å»ºç”¨æˆ·å¹¶åªå…è®¸å…¶è®¿é—®è‡ªå·±çš„ä¸»ç›®å½•ï¼Œè¿™é‡Œåˆä¸èƒ½ç»™ä»–å¯å†™çš„æƒé™ï¼Œå¥½åƒçŸ›ç›¾äº†ã€‚æ²¡é”™ï¼Œç¡®å®çŸ›ç›¾äº†ã€‚æ—¢ç„¶å®˜æ–¹è¯´äº†ä¸èƒ½ç»™ä¸»ç›®å½•å¯å†™æƒé™ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç»™ä»–çš„å­ç›®å½•å¯å†™çš„æƒé™ï¼Œç”¨æˆ·åœ¨å­ç›®å½•é‡Œè¿›è¡Œå¯¹åº”çš„æ“ä½œå°±å¯ä»¥äº†ï¼Œå¦‚ä¸‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root@yl:/# chmod a-w /usr/yl</span><br><span class="line">root@yl:/# cd /usr/yl</span><br><span class="line">root@yl:/usr/yl# mkdir www</span><br><span class="line">root@yl:/usr/yl# ls</span><br><span class="line">www</span><br><span class="line">root@yl:/usr/yl# chmod 777 www</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å†æ¥è¿æ¥è¯•è¯•</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root@yl:/usr# ftp 127.0.0.1</span><br><span class="line">Connected to 127.0.0.1.</span><br><span class="line">220 (vsFTPd 3.0.2)</span><br><span class="line">Name (127.0.0.1:yl): test</span><br><span class="line">331 Please specify the password.</span><br><span class="line">Password:</span><br><span class="line">230 Login successful.</span><br><span class="line">Remote system type is UNIX.</span><br><span class="line">Using binary mode to transfer files.</span><br><span class="line">ftp&gt;</span><br></pre></td></tr></table></figure><p>è¿æ¥æˆåŠŸï¼</p><p>ç„¶åæˆ‘ä½¿ç”¨xftpåœ¨windowsé‡Œä½¿ç”¨åˆšæ‰æ–°å»ºçš„è´¦å·è¿æ¥è™šæ‹Ÿæœºé‡Œçš„æœåŠ¡å™¨ä¹Ÿæ­£å¸¸è¿æ¥äº†ï¼Œå¹¶ä¸”åªèƒ½è®¿é—®è‡ªå·±çš„ä¸»ç›®å½•ï¼Œä¸èƒ½è·³å‡ºå½“å‰ç›®å½•ï¼Œæƒé™ä¹Ÿè·Ÿåˆšæ‰è®¾ç½®çš„ä¸€æ ·ï¼Œåªèƒ½åœ¨å­ç›®å½•é‡Œä¸Šä¼ æ–‡æ¡£ã€‚å‰©ä¸‹çš„å°±æ˜¯æŠŠè¿™äº›æ“ä½œåœ¨ECSä¸Šcopyä¸€æ¬¡äº†ï¼Œå¦‚æœé‡åˆ°äº†æ–°çš„é—®é¢˜ä¼šåœ¨ç•™è¨€é‡Œè´´å‡ºï¼Œå¦‚æœ‰ç–‘é—®ï¼Œæ¬¢è¿ç•™è¨€ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¹°é˜¿é‡Œäº‘çš„ECSæœ‰æ®µæ—¶é—´äº†ï¼Œä¹ŸæŠ˜è…¾äº†ä¸€æ®µæ—¶é—´ï¼Œè¿‡æ®µæ—¶é—´å†™ä¸€å†™æŠ˜è…¾çš„ä¸€äº›ä¸œä¸œã€‚æ˜¨å¤©æœ‰ä¸ªæƒ³æ³•ï¼ŒæœåŠ¡å™¨ä¸Šå·²ç»æ­å»ºäº†ä¸€äº›ä¸œè¥¿ï¼Œå¦‚æœéœ€è¦åˆä½œå¼€å‘ï¼Œå¿…ç„¶éœ€è¦ç»™å›¢é˜Ÿçš„å¼€å‘äººå‘˜æœåŠ¡å™¨çš„è´¦å·å’Œå¯†ç ã€‚ä½†æ˜¯è¿™é‡Œæ¶‰åŠåˆ°ä¸€ä¸ªæƒé™é—®é¢˜ï¼Œæ¯”å¦‚ï¼Œå½“æŸä¸ªé¡¹ç›®çš„å‰ç«¯å¼€å‘äººå‘˜åªéœ€è¦å°†å‰ç«¯ä»£ç ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œå°±æ²¡å¿…è¦ç»™æœåŠ¡å™¨çš„æ‰€æœ‰æƒé™ã€‚è„‘æµ·ä¸­ç¬¬ä¸€ååº”å°±æ˜¯ftpäº†ï¼Œåˆšä½¿ç”¨ECSä¹Ÿæ˜¯ç”¨ftpæ¥ç®¡ç†æ–‡ä»¶çš„ã€‚å½“ç„¶ï¼Œjekinsçš„è‡ªåŠ¨åŒ–éƒ¨ç½²ä¹Ÿèƒ½è§£å†³è¿™æ ·çš„éœ€æ±‚ï¼Œè¿™ä¸ªä»¥åæœ‰æ—¶é—´åœ¨å†™ä¸€ç¯‡ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="linux" scheme="https://yl.frontjs.cc/tags/linux/"/>
    
      <category term="ecs" scheme="https://yl.frontjs.cc/tags/ecs/"/>
    
      <category term="ftp" scheme="https://yl.frontjs.cc/tags/ftp/"/>
    
      <category term="ubuntu" scheme="https://yl.frontjs.cc/tags/ubuntu/"/>
    
  </entry>
  
  <entry>
    <title>FormData API ä¸Šä¼ æ–‡ä»¶åˆ°åˆæ‹äº‘</title>
    <link href="https://yl.frontjs.cc/2016/04/25/2016-04-25-upload-pic-upyun/"/>
    <id>https://yl.frontjs.cc/2016/04/25/2016-04-25-upload-pic-upyun/</id>
    <published>2016-04-25T09:39:33.000Z</published>
    <updated>2021-01-12T12:13:35.755Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘åˆé‡åˆ°äº†ä¸Šä¼ æ–‡ä»¶çš„éœ€æ±‚ï¼Œä»¥å‰ä¹Ÿå†™è¿‡ä¸€ç¯‡å…³äºåˆ©ç”¨formdataä¸Šä¼ æ–‡ä»¶çš„æ–‡ç« (å¦‚éœ€æµè§ˆï¼Œè¯·ç‚¹å‡»<a href="/2016/03/08/2016-03-08-file-upload">è¿™é‡Œ</a>)ï¼Œ<br>è¿™æ¬¡ä¸Šä¼ çš„åœ°å€æ˜¯åˆæ‹äº‘ï¼Œåœ¨æ“ä½œè¿‡ç¨‹ä¸­ç¨å¾®é‡åˆ°äº†ä¸€äº›å‘ï¼Œè¿™é‡Œç®€å•è®°å½•ä¸‹ã€‚</p><p>è¿™é‡Œä½¿ç”¨çš„æ˜¯åˆæ‹äº‘çš„<a href="http://docs.upyun.com/api/form_api/" target="_blank" rel="noopener">HTTP FORM API</a>ï¼Œä½¿ç”¨æµç¨‹å¤§æ¦‚å¦‚ä¸‹</p><a id="more"></a><ol><li><p>è¯·æ±‚å®¢æˆ·æœåŠ¡å™¨ï¼Œç”Ÿæˆã€è·å–ä¸Šä¼ æ‰€éœ€çš„ signatureã€policy å‚æ•°ã€‚ä¸ºäº†æå‡ä¸Šä¼ æˆåŠŸç‡ï¼ˆé¿å…ç­¾åè¿‡æœŸï¼‰ã€å®‰å…¨æ€§(è®¾ç½®å°½å¯èƒ½çŸ­çš„æˆæƒæœ‰æ•ˆæœŸ)ï¼Œæˆ‘ä»¬å»ºè®®åœ¨æ¯æ¬¡æ‰§è¡Œä¸Šä¼ æ“ä½œä¹‹å‰ï¼Œéƒ½é‡æ–°æ‰§è¡Œæœ¬æ­¥éª¤è·å–ç›¸å…³å‚æ•°ï¼›</p></li><li><p>è¯·æ±‚ UPYUN API ä¸Šä¼ æ–‡ä»¶ï¼Œæ ¡éªŒè¿”å›ç»“æœ/å¼‚æ­¥å›è°ƒé€šçŸ¥å®¢æˆ·æœåŠ¡å™¨ï¼›</p></li><li><p>å¤„ç†å¸¸è§„å®¢æˆ·ä¸šåŠ¡æµç¨‹ã€‚</p></li></ol><p>æ²¡é”™ï¼Œæˆ‘ä»¬é¦–å…ˆè¦è·å–ä¸Šä¼ åˆ°åˆæ‹äº‘æ‰€éœ€è¦çš„å­—æ®µï¼Œè¿™ä¸ªç”±è‡ªå·±çš„æœåŠ¡ç«¯è¿”å›ï¼Œç„¶åå°†è¿™ä¸¤ä¸ªå‚æ•°å’Œæ–‡ä»¶å‚æ•°ä¸€èµ·è¯·æ±‚åˆæ‹äº‘çš„apiæ¥å£å³å¯ï¼Œå¦‚ä¸‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">Utils.ajaxGet(<span class="string">'/upload/sign'</span>,&#123;<span class="attr">mod</span>: <span class="string">'serverSite'</span>&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    <span class="comment">/*data &#123;"signature":xxx, "policy":xxxx&#125;*/</span></span><br><span class="line">    upload(data);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">upload</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> file,</span><br><span class="line">        fd = <span class="keyword">new</span> FormData(),</span><br><span class="line">        xhr = <span class="keyword">new</span> XMLHttpRequest(),</span><br><span class="line">        loaded, total, pre, url, input;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">document</span>.getElementById(<span class="string">'myUploadInput'</span>))&#123;</span><br><span class="line">        input = <span class="built_in">document</span>.getElementById(<span class="string">'myUploadInput'</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        input = <span class="built_in">document</span>.createElement(<span class="string">'input'</span>);</span><br><span class="line">        input.setAttribute(<span class="string">'id'</span>, <span class="string">'myUploadInput'</span>);</span><br><span class="line">        input.setAttribute(<span class="string">'type'</span>, <span class="string">'file'</span>);</span><br><span class="line">        input.setAttribute(<span class="string">'name'</span>, <span class="string">'file'</span>);</span><br><span class="line">        <span class="built_in">document</span>.body.appendChild(input);</span><br><span class="line">        input.style.display = <span class="string">'none'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    url = <span class="string">'http://v0.api.upyun.com/xxx'</span>;</span><br><span class="line"></span><br><span class="line">    input.click();</span><br><span class="line">    input.onchange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        file = input.files[<span class="number">0</span>];</span><br><span class="line">        fd.append(<span class="string">'signature'</span>, data.signature);</span><br><span class="line">        fd.append(<span class="string">'policy'</span>, data.policy);</span><br><span class="line">        fd.append(<span class="string">'file'</span>, file);</span><br><span class="line">        xhr.open(<span class="string">'post'</span>, url);</span><br><span class="line">        xhr.send(fd);</span><br><span class="line">        xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(xhr);</span><br><span class="line">            <span class="keyword">if</span>(xhr.status == <span class="number">200</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(xhr.readyState == <span class="number">4</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(option.callback <span class="keyword">instanceof</span> <span class="built_in">Function</span>)&#123;</span><br><span class="line">                        <span class="built_in">console</span>.log(xhr.responseText);</span><br><span class="line">                        <span class="keyword">if</span>(<span class="keyword">typeof</span> xhr.responseText == <span class="string">'string'</span>)&#123;</span><br><span class="line">                            option.callback(<span class="built_in">JSON</span>.parse(xhr.responseText))</span><br><span class="line">                        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                            option.callback(xhr.responseText);</span><br><span class="line">                        &#125;</span><br><span class="line">                        xhr = <span class="literal">null</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                Utils.showTips(<span class="string">'ä¸Šä¼ å¤±è´¥'</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        xhr.upload.onprogress = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">            loaded = event.loaded;</span><br><span class="line">            total = event.total;</span><br><span class="line">            pre = <span class="built_in">Math</span>.floor(<span class="number">100</span> * loaded / total);</span><br><span class="line">            <span class="keyword">if</span>(option.uploading <span class="keyword">instanceof</span> <span class="built_in">Function</span>)&#123;</span><br><span class="line">                option.uploading(pre);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­<code>url</code>ä¸­çš„<code>xxx</code>ï¼Œæ˜¯åˆæ‹äº‘é…ç½®é‡Œçš„<code>bucket-name</code>ï¼Œå…·ä½“çš„å¯ä»¥æŸ¥çœ‹åˆæ‹äº‘çš„ç›¸å…³apiæ–‡æ¡£ã€‚</p><p>ä¸€åˆ‡çœ‹ä¼¼å¾ˆæ­£å¸¸ï¼Œæˆ‘å¼€å§‹ä¹Ÿæ˜¯è¿™ä¹ˆè§‰å¾—çš„ï¼Œç„¶åï¼Œbugå‘ç”Ÿäº†ã€‚å½“æˆ‘ä»¬åœ¨é¡µé¢ä¸Šç‚¹å‡»æŒ‰é’®è°ƒç”¨ä¸Šè¿°æ–¹æ³•çš„æ—¶å€™ï¼Œå‘ç°ä»€ä¹ˆä¹Ÿæ²¡æœ‰å‘ç”Ÿï¼ŒæŒ‰å¸¸ç†åº”è¯¥ä¼šæ‰“å¼€æœ¬åœ°çš„èµ„æºç®¡ç†å™¨çš„ã€‚<br>ç„¶ååœ¨æ§åˆ¶å°çœ‹çœ‹ï¼Œå‘ç°åªå‘è‡ªå·±çš„æœåŠ¡ç«¯å‘é€äº†è¯·æ±‚ï¼Œåˆ›å»ºçš„è¡¨å•å…ƒç´ çš„<code>change</code>äº‹ä»¶æ²¡æœ‰å‘ç”Ÿï¼Œè¿™ä¸ªæ–­ç‚¹å¯ä»¥çœ‹åˆ°ã€‚</p><p>ä¸ºä»€ä¹ˆ<code>change</code>æ²¡æœ‰å‘ç”Ÿï¼Ÿåˆæ­¥çŒœæµ‹ï¼Œajaxå‘èµ·çš„ç½‘ç»œè¯·æ±‚ä¼šé˜»å¡æˆ–è€…å½±å“æµè§ˆå™¨UIå±‚çš„æ¸²æŸ“ï¼Œç„¶åè°·æ­ŒæŸ¥é˜…ç›¸å…³èµ„æ–™ï¼Œä¹Ÿæ‰¾åˆ°äº†ç›¸å…³çš„è§£é‡Šã€‚</p><p><a href="http://greengerong.com/blog/2015/10/27/javascript-single-thread-and-browser-event-loop/" target="_blank" rel="noopener">èµ„æ–™ä¸€</a></p><p><a href="http://www.cnblogs.com/lvdabao/p/3744030.html" target="_blank" rel="noopener">èµ„æ–™äºŒ</a></p><p>æ—¢ç„¶æ‰¾åˆ°äº†åŸå› ï¼Œè§£å†³åŠæ³•ä¹Ÿå¾ˆæ˜æ˜¾äº†ï¼Œå¦‚æœä½¿ç”¨çš„jQueryçš„ajaxï¼Œå¯ä»¥å°è¯•ä¸Šè¿°èµ„æ–™é‡Œçš„æ–¹æ³•ï¼Œæˆ‘è¿™é‡Œå·äº†ä¸ªæ‡’ï¼Œä»æœåŠ¡ç«¯è·å–signatureã€policyçš„æ–¹æ³•æ”¾åˆ°äº†è¡¨å•å…ƒç´ çš„<code>change</code>äº‹ä»¶é‡Œã€‚</p><p>ä»£ç å¦‚ä¸‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">Utils.uploadFile = <span class="function"><span class="keyword">function</span> (<span class="params">option</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> file,</span><br><span class="line">        fd = <span class="keyword">new</span> FormData(),</span><br><span class="line">        xhr = <span class="keyword">new</span> XMLHttpRequest(),</span><br><span class="line">        loaded, total, pre, url, input;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">document</span>.getElementById(<span class="string">'myUploadInput'</span>))&#123;</span><br><span class="line">        input = <span class="built_in">document</span>.getElementById(<span class="string">'myUploadInput'</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        input = <span class="built_in">document</span>.createElement(<span class="string">'input'</span>);</span><br><span class="line">        input.setAttribute(<span class="string">'id'</span>, <span class="string">'myUploadInput'</span>);</span><br><span class="line">        input.setAttribute(<span class="string">'type'</span>, <span class="string">'file'</span>);</span><br><span class="line">        input.setAttribute(<span class="string">'name'</span>, <span class="string">'file'</span>);</span><br><span class="line">        <span class="built_in">document</span>.body.appendChild(input);</span><br><span class="line">        input.style.display = <span class="string">'none'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    url = <span class="string">'http://v0.api.upyun.com/xxx'</span>;</span><br><span class="line"></span><br><span class="line">    input.click();</span><br><span class="line"></span><br><span class="line">    input.onchange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> fileType = [<span class="string">'gif'</span>,<span class="string">'png'</span>,<span class="string">'jpg'</span>,<span class="string">'jpge'</span>];</span><br><span class="line">        <span class="keyword">var</span> type = input.value.split(<span class="string">'.'</span>).pop();</span><br><span class="line">        <span class="keyword">if</span>(fileType.indexOf(type.toLocaleLowerCase()) == <span class="number">-1</span>)&#123;</span><br><span class="line">            Utils.showTips(<span class="string">'è¯¥ç±»å‹æ–‡ä»¶ä¸æ”¯æŒï¼Œè¯·é€‰æ‹©å›¾ç‰‡æ–‡ä»¶'</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(option.maxSize &amp;&amp;  input.files[<span class="number">0</span>].size &gt; option.maxSize * <span class="number">1024</span> * <span class="number">1024</span>)&#123;</span><br><span class="line">            Utils.showTips(<span class="string">'è¯·ä¸Šä¼ å°äº'</span>+option.maxSize+<span class="string">'Mçš„æ–‡ä»¶'</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(option.beforeSend <span class="keyword">instanceof</span> <span class="built_in">Function</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(option.beforeSend(file) === <span class="literal">false</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        Utils.ajaxGet(<span class="string">'/upload/sign'</span>,&#123;<span class="attr">mod</span>: <span class="string">'serverSite'</span>&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">            file = input.files[<span class="number">0</span>];</span><br><span class="line">            fd.append(<span class="string">'signature'</span>, data.signature);</span><br><span class="line">            fd.append(<span class="string">'policy'</span>, data.policy);</span><br><span class="line">            fd.append(<span class="string">'file'</span>, file);</span><br><span class="line">            xhr.open(<span class="string">'post'</span>, url);</span><br><span class="line">            xhr.send(fd);</span><br><span class="line">            xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(xhr);</span><br><span class="line">                <span class="keyword">if</span>(xhr.status == <span class="number">200</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(xhr.readyState == <span class="number">4</span>)&#123;</span><br><span class="line">                        <span class="keyword">if</span>(option.callback <span class="keyword">instanceof</span> <span class="built_in">Function</span>)&#123;</span><br><span class="line">                            <span class="built_in">console</span>.log(xhr.responseText);</span><br><span class="line">                            <span class="keyword">if</span>(<span class="keyword">typeof</span> xhr.responseText == <span class="string">'string'</span>)&#123;</span><br><span class="line">                                option.callback(<span class="built_in">JSON</span>.parse(xhr.responseText))</span><br><span class="line">                            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                                option.callback(xhr.responseText);</span><br><span class="line">                            &#125;</span><br><span class="line">                            xhr = <span class="literal">null</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    Utils.showTips(<span class="string">'ä¸Šä¼ å¤±è´¥'</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            xhr.upload.onprogress = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">                loaded = event.loaded;</span><br><span class="line">                total = event.total;</span><br><span class="line">                pre = <span class="built_in">Math</span>.floor(<span class="number">100</span> * loaded / total);</span><br><span class="line">                <span class="keyword">if</span>(option.uploading <span class="keyword">instanceof</span> <span class="built_in">Function</span>)&#123;</span><br><span class="line">                    option.uploading(pre);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™å°±å®Œäº†ï¼Ÿ å…¶å®å¹¶æ²¡æœ‰ï¼Œè¿˜é‡åˆ°ä¸€ä¸ªå¥‡è‘©é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯åˆšæ‰è¯´çš„<code>change</code>äº‹ä»¶æ²¡å‘ç”Ÿçš„æ—¶å€™ï¼Œè¯·æ±‚åˆæ‹äº‘æ‹¿åˆ°çš„<code>xhr.status</code>ä¸º<code>0</code>ï¼Œ<br>å¯èƒ½æ˜¯æˆ‘å­¤é™‹å¯¡é—»äº†ï¼Œè¿˜æ²¡å¬è¿‡çŠ¶æ€ç å¯ä»¥ä¸º0ã€‚åªèƒ½è¯´æ˜è°·æ­Œå¾ˆå¼ºå¤§ï¼Œé©¬ä¸Šå°±æ‰¾åˆ°ç›¸å…³èµ„æ–™äº†ï¼Œå› ä¸ºæ²¡æœ‰<code>send</code>ã€‚æœ€å¼€å§‹çš„æ—¶å€™ï¼Œåˆæ‹äº‘çš„è¯·æ±‚è·¯å¾„é”™äº†ä¹Ÿæ‹¿åˆ°äº†ä¸º0çš„statusï¼Œ<br>ä»¥åé‡åˆ°ç±»ä¼¼çš„æƒ…å†µå¯ä»¥ä»è¿™å‡ ä¸ªæ–¹é¢å»æŸ¥æ‰¾åŸå› äº†ã€‚</p><p>ä¸Šä¼ æ–‡ä»¶åˆ°åˆæ‹äº‘åï¼Œåˆæ‹äº‘æ¥å£çš„è¿”å›å‚æ•°é‡Œæœ‰ä¸ªurlï¼Œå…·ä½“çš„æ–‡ä»¶è®¿é—®è·¯å¾„ä¸º <code>&quot;http://xxx.b0.upaiyun.com/&quot;+url</code>ï¼Œ<code>xxx</code>ä¸º<code>bucket-name</code>ï¼Œ<br>ç›¸å…³æ–‡æ¡£å¯ä»¥çœ‹<a href="http://docs.upyun.com/guide/#_4" target="_blank" rel="noopener">è¿™é‡Œ</a>ã€‚</p><p>å·®ä¸å¤šå°±è¿™ä¹ˆå¤šäº†ï¼Œå¦‚æœ‰ç–‘é—®æ¬¢è¿ç•™è¨€ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘åˆé‡åˆ°äº†ä¸Šä¼ æ–‡ä»¶çš„éœ€æ±‚ï¼Œä»¥å‰ä¹Ÿå†™è¿‡ä¸€ç¯‡å…³äºåˆ©ç”¨formdataä¸Šä¼ æ–‡ä»¶çš„æ–‡ç« (å¦‚éœ€æµè§ˆï¼Œè¯·ç‚¹å‡»&lt;a href=&quot;/2016/03/08/2016-03-08-file-upload&quot;&gt;è¿™é‡Œ&lt;/a&gt;)ï¼Œ&lt;br&gt;è¿™æ¬¡ä¸Šä¼ çš„åœ°å€æ˜¯åˆæ‹äº‘ï¼Œåœ¨æ“ä½œè¿‡ç¨‹ä¸­ç¨å¾®é‡åˆ°äº†ä¸€äº›å‘ï¼Œè¿™é‡Œç®€å•è®°å½•ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œä½¿ç”¨çš„æ˜¯åˆæ‹äº‘çš„&lt;a href=&quot;http://docs.upyun.com/api/form_api/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;HTTP FORM API&lt;/a&gt;ï¼Œä½¿ç”¨æµç¨‹å¤§æ¦‚å¦‚ä¸‹&lt;/p&gt;
    
    </summary>
    
    
      <category term="js" scheme="https://yl.frontjs.cc/tags/js/"/>
    
      <category term="åˆæ‹äº‘" scheme="https://yl.frontjs.cc/tags/%E5%8F%88%E6%8B%8D%E4%BA%91/"/>
    
  </entry>
  
  <entry>
    <title>å¾®ä¿¡jssdkä½¿ç”¨è®°å½•</title>
    <link href="https://yl.frontjs.cc/2016/04/11/2016-04-11-wx-use/"/>
    <id>https://yl.frontjs.cc/2016/04/11/2016-04-11-wx-use/</id>
    <published>2016-04-11T09:39:13.000Z</published>
    <updated>2021-01-12T12:13:35.755Z</updated>
    
    <content type="html"><![CDATA[<p>è¯è¯´æ¥è§¦å¾®ä¿¡å¼€å‘æ˜¯æ¯•ä¸šå‰çš„ç¬¬ä¸€ä»½å·¥ä½œï¼Œå½“æ—¶æ‰€åšçš„å°±æ˜¯ä¸€äº›å¾®ä¿¡ä¸Šçš„æ´»åŠ¨æ¨å¹¿é¡µé¢ï¼Œç”¨åˆ°çš„jssdkå°±åªæœ‰å¾®ä¿¡åˆ†äº«è·Ÿç½‘é¡µç™»å½•æˆæƒå§ã€‚è®°å¾—å¾ˆä¹…ä»¥å‰å¾®ä¿¡åˆ†äº«æ˜¯ä¸éœ€è¦åç«¯æ”¯æŒçš„ï¼Œåæ¥ä¸–ç•Œå˜äº†ï¼Œä¸èƒ½åªé å‰ç«¯æ¥æ‹¯æ•‘ä¸–ç•Œäº†â€¦</p><p>æœ€è¿‘çš„é¡¹ç›®å°±æ˜¯å¾®ä¿¡ç«¯çš„ï¼Œé¦–å…ˆç”¨åˆ°çš„å°±æ˜¯jssdkã€‚ä¸‹é¢æ•´ç†å‡ ä¸ªï¼Œè¿˜æ²¡ç”¨ä¸Šçš„ç­‰ç”¨ä¸Šäº†å†æ¥è¡¥å……ã€‚</p><a id="more"></a><p>é¦–å…ˆè´´ä¸Šå¾®ä¿¡jssdkåœ°å€ï¼š<a href="http://mp.weixin.qq.com/wiki/7/aaa137b55fb2e0456bf8dd9148dd613f.html" target="_blank" rel="noopener">http://mp.weixin.qq.com/wiki/7/aaa137b55fb2e0456bf8dd9148dd613f.html</a></p><h3 id="åˆå§‹é…ç½®"><a href="#åˆå§‹é…ç½®" class="headerlink" title="åˆå§‹é…ç½®"></a>åˆå§‹é…ç½®</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">wxConfig</span>(<span class="params">option</span>)</span>&#123;</span><br><span class="line">    wx.config(&#123;</span><br><span class="line">        debug: <span class="literal">false</span>,</span><br><span class="line">        appId: option.appId,</span><br><span class="line">        timestamp: option.timestamp,</span><br><span class="line">        nonceStr: option.nonceStr,</span><br><span class="line">        signature: option.signature,</span><br><span class="line">        jsApiList: [</span><br><span class="line">            <span class="string">'onMenuShareTimeline'</span>,</span><br><span class="line">            <span class="string">'onMenuShareAppMessage'</span>,</span><br><span class="line">            <span class="string">'onMenuShareQQ'</span>,</span><br><span class="line">            <span class="string">'onMenuShareWeibo'</span>,</span><br><span class="line">            <span class="string">'onMenuShareQZone'</span>,</span><br><span class="line">            <span class="string">'startRecord'</span>,</span><br><span class="line">            <span class="string">'stopRecord'</span>,</span><br><span class="line">            <span class="string">'onVoiceRecordEnd'</span>,</span><br><span class="line">            <span class="string">'playVoice'</span>,</span><br><span class="line">            <span class="string">'pauseVoice'</span>,</span><br><span class="line">            <span class="string">'stopVoice'</span>,</span><br><span class="line">            <span class="string">'onVoicePlayEnd'</span>,</span><br><span class="line">            <span class="string">'uploadVoice'</span>,</span><br><span class="line">            <span class="string">'downloadVoice'</span>,</span><br><span class="line">            <span class="string">'chooseImage'</span>,</span><br><span class="line">            <span class="string">'previewImage'</span>,</span><br><span class="line">            <span class="string">'uploadImage'</span>,</span><br><span class="line">            <span class="string">'downloadImage'</span>,</span><br><span class="line">            <span class="string">'translateVoice'</span>,</span><br><span class="line">            <span class="string">'getNetworkType'</span>,</span><br><span class="line">            <span class="string">'openLocation'</span>,</span><br><span class="line">            <span class="string">'getLocation'</span>, <span class="comment">//è·å–ä½ç½®ä¿¡æ¯</span></span><br><span class="line">            <span class="string">'hideOptionMenu'</span>,</span><br><span class="line">            <span class="string">'showOptionMenu'</span>,</span><br><span class="line">            <span class="string">'hideMenuItems'</span>,</span><br><span class="line">            <span class="string">'showMenuItems'</span>,</span><br><span class="line">            <span class="string">'hideAllNonBaseMenuItem'</span>,</span><br><span class="line">            <span class="string">'showAllNonBaseMenuItem'</span>,</span><br><span class="line">            <span class="string">'closeWindow'</span>,</span><br><span class="line">            <span class="string">'scanQRCode'</span>,</span><br><span class="line">            <span class="string">'chooseWXPay'</span>, <span class="comment">//æ”¯ä»˜</span></span><br><span class="line">            <span class="string">'openProductSpecificView'</span>,</span><br><span class="line">            <span class="string">'addCard'</span>,</span><br><span class="line">            <span class="string">'chooseCard'</span>,</span><br><span class="line">            <span class="string">'openCard'</span></span><br><span class="line">        ]</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æœ‰ <code>option</code> çš„å‚æ•°æ˜¯åç«¯ç»™çš„ï¼Œå…·ä½“çš„åç«¯å®ç°å¯ä»¥å‚è€ƒ<a href="http://demo.open.weixin.qq.com/jssdk/sample.zip" target="_blank" rel="noopener">å¾®ä¿¡çš„å®˜æ–¹demo</a></p></blockquote><h3 id="è·å–ä½ç½®ä¿¡æ¯"><a href="#è·å–ä½ç½®ä¿¡æ¯" class="headerlink" title="è·å–ä½ç½®ä¿¡æ¯"></a>è·å–ä½ç½®ä¿¡æ¯</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getLocation</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    wx.ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        wx.getLocation(&#123;</span><br><span class="line">            type: <span class="string">'gcj02'</span>,</span><br><span class="line">            success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">var</span> res = data;</span><br><span class="line">                <span class="keyword">if</span>(data.res)&#123;</span><br><span class="line">                    res = data.res;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">var</span> latitude = res.latitude;</span><br><span class="line">                <span class="keyword">var</span> longitude = res.longitude;</span><br><span class="line">                Utils.setData(<span class="string">'position'</span>,<span class="built_in">JSON</span>.stringify(&#123;</span><br><span class="line">                    latitude: latitude,</span><br><span class="line">                    longitude: longitude</span><br><span class="line">                &#125;));</span><br><span class="line">                <span class="comment">//if(latitude &amp;&amp; longitude)&#123;</span></span><br><span class="line">                    getDetailAddr(latitude, longitude);</span><br><span class="line">                <span class="comment">//&#125;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            fail: <span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</span><br><span class="line">                page.location = page.locationFailTip;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ä»¥ä¸Šä»£ç é€šè¿‡å¾®ä¿¡æ‹¿åˆ°ç»çº¬åº¦åï¼Œå‘åç«¯å‘èµ·è¯·æ±‚æ‹¿è¯¦ç»†åœ°å€(æƒ³å‰ç«¯è‡ªå·±æ‹¿è¯¦ç»†åœ°å€ï¼Œå¯ä»¥å€ŸåŠ©äºç™¾åº¦åœ°å›¾çš„apiï¼Œç™¾åº¦åœ°å›¾åœ¨å¾®ä¿¡é‡Œèƒ½å¦ä½¿ç”¨è¿˜æ²¡åšå°è¯•)</p></blockquote><h3 id="å¾®ä¿¡æ”¯ä»˜"><a href="#å¾®ä¿¡æ”¯ä»˜" class="headerlink" title="å¾®ä¿¡æ”¯ä»˜"></a>å¾®ä¿¡æ”¯ä»˜</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">wxPays</span>(<span class="params">option</span>)</span>&#123;</span><br><span class="line">    wx.ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        wx.chooseWXPay(&#123;</span><br><span class="line">            timestamp: option.timeStamp, <span class="comment">// æ”¯ä»˜ç­¾åæ—¶é—´æˆ³ï¼Œæ³¨æ„å¾®ä¿¡jssdkä¸­çš„æ‰€æœ‰ä½¿ç”¨timestampå­—æ®µå‡ä¸ºå°å†™ã€‚ä½†æœ€æ–°ç‰ˆçš„æ”¯ä»˜åå°ç”Ÿæˆç­¾åä½¿ç”¨çš„timeStampå­—æ®µåéœ€å¤§å†™å…¶ä¸­çš„Så­—ç¬¦</span></span><br><span class="line">            nonceStr: option.nonceStr, <span class="comment">// æ”¯ä»˜ç­¾åéšæœºä¸²ï¼Œä¸é•¿äº 32 ä½</span></span><br><span class="line">            package: option.package, <span class="comment">// ç»Ÿä¸€æ”¯ä»˜æ¥å£è¿”å›çš„prepay_idå‚æ•°å€¼ï¼Œæäº¤æ ¼å¼å¦‚ï¼šprepay_id=***ï¼‰</span></span><br><span class="line">            signType: option.signType, <span class="comment">// ç­¾åæ–¹å¼ï¼Œé»˜è®¤ä¸º'SHA1'ï¼Œä½¿ç”¨æ–°ç‰ˆæ”¯ä»˜éœ€ä¼ å…¥'MD5'</span></span><br><span class="line">            paySign: option.paySign, <span class="comment">// æ”¯ä»˜ç­¾å</span></span><br><span class="line">            success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">                <span class="comment">// æ”¯ä»˜æˆåŠŸåçš„å›è°ƒå‡½æ•°,è¯·æ±‚æœåŠ¡å™¨æŸ¥è¯¢æ”¯ä»˜ç»“æœ</span></span><br><span class="line">                <span class="keyword">var</span> prepayId = option.package.split(<span class="string">'='</span>)[<span class="number">1</span>];</span><br><span class="line">                checkPayResult(prepayId);</span><br><span class="line">            &#125;,</span><br><span class="line">            fail: <span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;&#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ä»¥ä¸Šå¸¦<code>option</code>çš„å‚æ•°éœ€æœåŠ¡ç«¯æä¾›ï¼Œå‘èµ·å¾®ä¿¡æ”¯ä»˜åï¼Œä¼šè‡ªåŠ¨è°ƒå‡ºå¾®ä¿¡æ”¯ä»˜çš„é¢æ¿ï¼Œå®Œæˆæ”¯ä»˜æˆ–å–æ¶ˆæ”¯ä»˜ä¼šè¿›å…¥ç›¸åº”çš„å›è°ƒï¼Œæ ¹æ®å¾®ä¿¡å®˜æ–¹æä¾›çš„<a href="https://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=7_4" target="_blank" rel="noopener">æ”¯ä»˜æ–‡æ¡£(ä¸šåŠ¡æµç¨‹è¯´æ˜)</a>ï¼Œæ”¯ä»˜å®Œæˆåï¼ŒæœåŠ¡ç«¯éœ€ç¡®è®¤æ˜¯å¦æ”¯ä»˜æˆåŠŸï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜å¾—å‘æœåŠ¡ç«¯å‘é€ä¸€æ¬¡æ”¯ä»˜ç»“æœç¡®è®¤è¯·æ±‚ã€‚</p></blockquote><p>å½“æ—¶è°ƒæ”¯ä»˜æ—¶ä¸€ä¸ªå¾ˆå°çš„é”™è¯¯å¯¼è‡´æ”¯ä»˜é¢æ¿æ²¡å¼¹å‡ºï¼Œå°±ä½¿ç”¨äº†<a href="https://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=7_7&amp;index=6" target="_blank" rel="noopener">æ”¯ä»˜æ–‡æ¡£</a>é‡Œçš„ç¤ºä¾‹<code>demo</code>ï¼Œå¦‚ä¸‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">wxPays</span>(<span class="params">option</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//alert('å¾®ä¿¡æ”¯ä»˜é…ç½®å‚æ•°:'+JSON.stringify(option));</span></span><br><span class="line">    onBridgeReady(option);</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">onBridgeReady</span>(<span class="params">option</span>)</span>&#123;</span><br><span class="line">        WeixinJSBridge.invoke(</span><br><span class="line">            <span class="string">'getBrandWCPayRequest'</span>, &#123;</span><br><span class="line">                <span class="string">"appId"</span> : option.appId,     <span class="comment">//å…¬ä¼—å·åç§°ï¼Œç”±å•†æˆ·ä¼ å…¥</span></span><br><span class="line">                <span class="string">"timeStamp"</span> : option.timeStamp,         <span class="comment">//æ—¶é—´æˆ³ï¼Œè‡ª1970å¹´ä»¥æ¥çš„ç§’æ•°</span></span><br><span class="line">                <span class="string">"nonceStr"</span> : option.nonceStr, <span class="comment">//éšæœºä¸²</span></span><br><span class="line">                <span class="string">"package"</span> : option.package,</span><br><span class="line">                <span class="string">"signType"</span> : option.signType,         <span class="comment">//å¾®ä¿¡ç­¾åæ–¹å¼ï¼š</span></span><br><span class="line">                <span class="string">"paySign"</span> : option.paySign <span class="comment">//å¾®ä¿¡ç­¾å</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</span><br><span class="line">                <span class="comment">// ä½¿ç”¨ä»¥ä¸Šæ–¹å¼åˆ¤æ–­å‰ç«¯è¿”å›,å¾®ä¿¡å›¢é˜Ÿéƒ‘é‡æç¤ºï¼šres.err_msgå°†åœ¨ç”¨æˆ·æ”¯ä»˜æˆåŠŸåè¿”å›    okï¼Œä½†å¹¶ä¸ä¿è¯å®ƒç»å¯¹å¯é ã€‚</span></span><br><span class="line">                <span class="comment">//if(/ok/.test(res.err_msg)) &#123;</span></span><br><span class="line">                <span class="keyword">if</span>(res.err_msg == <span class="string">"get_brand_wcpay_request:ok"</span>) &#123;</span><br><span class="line">                    <span class="keyword">var</span> prepayId = option.package.split(<span class="string">'='</span>)[<span class="number">1</span>];</span><br><span class="line">                    checkPayResult(prepayId);</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    Utils.alert(&#123;</span><br><span class="line">                        title: <span class="string">'æ‡‚å¸ˆå‚…æç¤ºæ‚¨'</span>,</span><br><span class="line">                        content: <span class="string">'æ”¯ä»˜å¤±è´¥ï¼Œè¯·é‡æ–°æ”¯ä»˜'</span>,</span><br><span class="line">                        callback: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                            <span class="built_in">window</span>.location.reload();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> WeixinJSBridge == <span class="string">"undefined"</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>( <span class="built_in">document</span>.addEventListener )&#123;</span><br><span class="line">            <span class="built_in">document</span>.addEventListener(<span class="string">'WeixinJSBridgeReady'</span>, onBridgeReady, <span class="literal">false</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">document</span>.attachEvent)&#123;</span><br><span class="line">            <span class="built_in">document</span>.attachEvent(<span class="string">'WeixinJSBridgeReady'</span>, onBridgeReady);</span><br><span class="line">            <span class="built_in">document</span>.attachEvent(<span class="string">'onWeixinJSBridgeReady'</span>, onBridgeReady);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        onBridgeReady();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥æ–¹æ³•åœ¨<code>android</code>æœºä¸Šæµ‹è¯•æ˜¯æœ‰æ•ˆçš„ï¼Œåœ¨<code>ios</code>æœºä¸Šæµ‹è¯•æ˜¯æç¤º<code>è°ƒç”¨jsApiæ—¶æ²¡æœ‰ä¼ timeStamp</code>ï¼Œä¸çŸ¥é“æ˜¯ä»€ä¹ˆé¬¼ï¼Œå“ªä½æœ‹å‹çŸ¥é“æ€ä¹ˆè§£å†³çš„ï¼Œæ¬¢è¿ç•™è¨€å‘ŠçŸ¥ï¼Œä¸èƒœæ„Ÿè°¢</p><h3 id="é€‰æ‹©å›¾ç‰‡ä¸ä¸Šä¼ å›¾ç‰‡"><a href="#é€‰æ‹©å›¾ç‰‡ä¸ä¸Šä¼ å›¾ç‰‡" class="headerlink" title="é€‰æ‹©å›¾ç‰‡ä¸ä¸Šä¼ å›¾ç‰‡"></a>é€‰æ‹©å›¾ç‰‡ä¸ä¸Šä¼ å›¾ç‰‡</h3><h5 id="é€‰æ‹©å›¾ç‰‡"><a href="#é€‰æ‹©å›¾ç‰‡" class="headerlink" title="é€‰æ‹©å›¾ç‰‡"></a>é€‰æ‹©å›¾ç‰‡</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">uploadImage</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    wx.ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        wx.chooseImage(&#123;</span><br><span class="line">            count: <span class="number">3</span>-page.photos.length, <span class="comment">// é»˜è®¤9</span></span><br><span class="line">            sizeType: [<span class="string">'original'</span>, <span class="string">'compressed'</span>], <span class="comment">// å¯ä»¥æŒ‡å®šæ˜¯åŸå›¾è¿˜æ˜¯å‹ç¼©å›¾ï¼Œé»˜è®¤äºŒè€…éƒ½æœ‰</span></span><br><span class="line">            sourceType: [<span class="string">'album'</span>, <span class="string">'camera'</span>], <span class="comment">// å¯ä»¥æŒ‡å®šæ¥æºæ˜¯ç›¸å†Œè¿˜æ˜¯ç›¸æœºï¼Œé»˜è®¤äºŒè€…éƒ½æœ‰</span></span><br><span class="line">            success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">var</span> localIds = res.localIds; <span class="comment">// è¿”å›é€‰å®šç…§ç‰‡çš„æœ¬åœ°IDåˆ—è¡¨ï¼ŒlocalIdå¯ä»¥ä½œä¸ºimgæ ‡ç­¾çš„srcå±æ€§æ˜¾ç¤ºå›¾ç‰‡</span></span><br><span class="line">                localIds.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>&#123;</span><br><span class="line">                    <span class="keyword">if</span>(page.photos.indexOf(item) == <span class="number">-1</span>)&#123;</span><br><span class="line">                        page.photos.push(item);</span><br><span class="line">                        uploadToWx(item);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;,</span><br><span class="line">            fail: <span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;&#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ä¸Šä¼ å›¾ç‰‡"><a href="#ä¸Šä¼ å›¾ç‰‡" class="headerlink" title="ä¸Šä¼ å›¾ç‰‡"></a>ä¸Šä¼ å›¾ç‰‡</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">uploadToWx</span>(<span class="params">localId</span>)</span>&#123;</span><br><span class="line">    wx.uploadImage(&#123;</span><br><span class="line">        localId: localId, <span class="comment">// éœ€è¦ä¸Šä¼ çš„å›¾ç‰‡çš„æœ¬åœ°IDï¼Œç”±chooseImageæ¥å£è·å¾—</span></span><br><span class="line">        isShowProgressTips: <span class="number">0</span>, <span class="comment">// é»˜è®¤ä¸º1ï¼Œæ˜¾ç¤ºè¿›åº¦æç¤º</span></span><br><span class="line">        success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">            page.serverIds.push(res.serverId); <span class="comment">// è¿”å›å›¾ç‰‡çš„æœåŠ¡å™¨ç«¯ID</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ„Ÿè§‰å¾®ä¿¡æä¾›çš„èƒ½å¤Ÿè°ƒç”¨æ‰‹æœºæ‹ç…§å’Œç›¸å†Œçš„æ–¹æ³•è›®å®ç”¨çš„ï¼Œä¸€èˆ¬è¿™ä¸ªåœ¨<code>app</code>é‡Œæ‰èƒ½å®ç°ï¼Œæµè§ˆå™¨ä¸€èˆ¬ä¹Ÿåªèƒ½é€‰æ‹©æ–‡ä»¶ã€‚é€‰æ‹©äº†å›¾ç‰‡åï¼Œå¯ä»¥åœ¨å›è°ƒé‡Œæ‹¿åˆ°å›¾ç‰‡çš„<code>id</code>åˆ—è¡¨,æœ¬åœ°çš„å›¾ç‰‡<code>id</code>åœ¨å¾®ä¿¡é‡Œæ˜¯å¯ä»¥ç”¨æ¥æ˜¾ç¤ºå›¾ç‰‡çš„ï¼Œé€šè¿‡è¯¥<code>id</code>åˆ—è¡¨çš„æ¯ä¸ª<code>id</code>(æ³¨æ„ï¼Œè¿™é‡Œæ˜¯å•ä¸ª<code>id</code>ï¼Œä¸æ˜¯åˆ—è¡¨)ï¼Œå°±å¯ä»¥è°ƒç”¨å¾®ä¿¡ä¸Šä¼ å›¾ç‰‡çš„æ¥å£ï¼Œå°†å›¾ç‰‡ä¸Šä¼ åˆ°å¾®ä¿¡æœåŠ¡å™¨ä¸Šï¼Œå¾®ä¿¡æœåŠ¡å™¨ç›®å‰å¯¹å›¾ç‰‡çš„ä¿ç•™æ—¶é—´æ˜¯3å¤©ï¼Œä¸Šä¼ æˆåŠŸåå›è°ƒé‡Œå¯ä»¥æ‹¿åˆ°<code>serverId</code>ï¼ŒæœåŠ¡ç«¯é€šè¿‡<code>serverId</code>å°†å¾®ä¿¡æœåŠ¡å™¨ä¸Šçš„å›¾ç‰‡èµ„æºä¸‹è½½åˆ°è‡ªå·±çš„æœåŠ¡å™¨æˆ–ç¬¬ä¸‰æ–¹è¿›è¡Œå­˜å‚¨ã€‚</p></blockquote><p>ç›®å‰ç”¨çš„å¾®ä¿¡jssdkå°±è¿™å‡ ä¸ªï¼Œåç»­æœ‰ç”¨ä¸Šä¼šå†è¡¥ä¸Šã€‚</p><p>ä¸‹é¢è¯´ä¸‹æœ€è¿‘å¼€å‘ä¸­é‡åˆ°çš„é—®é¢˜ï¼Œé¿å…ä»¥åè¸©åŒæ ·çš„å‘ã€‚</p><h3 id="å…³äºå¾®ä¿¡é‡Œçš„åˆ·æ–°"><a href="#å…³äºå¾®ä¿¡é‡Œçš„åˆ·æ–°" class="headerlink" title="å…³äºå¾®ä¿¡é‡Œçš„åˆ·æ–°"></a>å…³äºå¾®ä¿¡é‡Œçš„åˆ·æ–°</h3><p>è¿™ä¸ªé—®é¢˜å›°æ‰°äº†å¥½ä¹…ï¼Œä¹Ÿå°è¯•è¿‡å¾ˆå¤šæ–¹æ³•ã€‚<br>é—®é¢˜åœºæ™¯ï¼šæœ‰ä¸€ä¸ªè®¢å•çŠ¶æ€é¡µé¢ï¼šè®¢å•æäº¤æˆåŠŸï¼Œæ¥å•æˆåŠŸï¼Œå¾…æ”¯ä»˜ï¼Œæ”¯ä»˜æˆåŠŸå¾…è¯„ä»·ï¼Œè¯„ä»·æˆåŠŸã€‚æˆ‘ç”¨äº†ä¸€ä¸ªé¡µé¢ï¼Œé€šè¿‡è®¢å•çŠ¶æ€å€¼æ¥æ¸²æŸ“å¯¹åº”çš„templateï¼Œæ‰€ä»¥ç”¨æˆ·æ”¯ä»˜ååˆ·æ–°é¡µé¢å°±åº”è¯¥çœ‹åˆ°å¾…è¯„ä»·çš„å†…å®¹ï¼Œå› ä¸ºæ”¯ä»˜æˆåŠŸåé¡µé¢åˆ·æ–°ï¼Œè®¢å•çŠ¶æ€å€¼å°±æ”¹å˜äº†ï¼Œè¯„ä»·ååˆ·æ–°æ˜¯åŒæ ·çš„é“ç†ã€‚<br>å°è¯•è¿‡çš„æ–¹æ³•ï¼š</p><ul><li><p>window.location.reload();</p></li><li><p>window.location.href = window.location.href;</p></li><li><p>window.location.href = window.location.href + â€˜&amp;r=â€™ + æ—¶é—´æˆ³</p></li></ul><p>ç»“æœå‡ä»¥å¤±è´¥å‘Šç»ˆï¼Œé¡µé¢åˆ·æ–°ï¼Œæ•°æ®æ²¡åˆ·æ–°ï¼Œé€šè¿‡<code>fiddler</code>æŸ¥çœ‹ç½‘ç»œè¯·æ±‚å‘ç°ï¼Œåˆ·æ–°é¡µé¢æ—¶æ²¡æœ‰å‘æœåŠ¡å™¨æ‹¿é¡µé¢ï¼Œè¯´æ˜æ‹¿çš„åªæ˜¯ç¼“å­˜ï¼Œè¿™ç§æƒ…å†µä»¥å‰ç¡®å®æ²¡é‡åˆ°è¿‡ï¼ŒåŠæ—¶ç¼“å­˜ä¸¥é‡ï¼Œç”¨æ—¶é—´æˆ³çš„æ–¹æ³•ä¹Ÿä¸€èˆ¬å¯ä»¥è§£å†³ã€‚<br>åæ¥åœ¨ä¸€ä¸ªå‰ç«¯ç¾¤é‡Œæ±‚åŠ©ï¼Œå¾—åˆ°äº†è§£å†³æ–¹æ³•ï¼š<code>window.location.reload(true)</code>ï¼Œä¼ <code>true</code>å¼ºåˆ¶åˆ·æ–°ï¼Œå¥½å§ï¼Œçœ‹æ¥è¿˜æ˜¯å¾—å¤šçœ‹çœ‹åŸºç¡€ï¼Œä¸€ç›´ä¸çŸ¥é“è¿™ä¸ªæ–¹æ³•è¿˜æœ‰ä¸ªå‚æ•°ã€‚è¿™é‡Œä¹Ÿè¦æ„Ÿè°¢ç¾¤é‡Œçš„é‚£ä½æœ‹å‹ã€‚</p><h3 id="å…³äºjsçš„äº‹ä»¶ä»£ç†"><a href="#å…³äºjsçš„äº‹ä»¶ä»£ç†" class="headerlink" title="å…³äºjsçš„äº‹ä»¶ä»£ç†"></a>å…³äºjsçš„äº‹ä»¶ä»£ç†</h3><p>ä»¥å‰ä¸€ç›´æœ‰ç”¨<code>js</code>çš„äº‹ä»¶ä»£ç†ï¼Œè¿™æ¬¡åœºæ™¯è·Ÿä»¥å‰ç¨å¾®æœ‰ç‚¹ä¸åŒï¼Œå…ˆçœ‹ä»£ç </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"equipments-list"</span> @<span class="attr">click</span>=<span class="string">"toStatusPage($event)"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"item in orders"</span> <span class="attr">class</span>=<span class="string">"equipments-item"</span> <span class="attr">:orderId</span>=<span class="string">"item.id"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"order-no"</span> <span class="attr">v-text</span>=<span class="string">"'å•å·'+item.orderNo"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"order-status"</span> <span class="attr">v-text</span>=<span class="string">"item.statusStr"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"equipments-detail"</span> <span class="attr">v-for</span>=<span class="string">"subItem in item.equipments"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-text</span>=<span class="string">"subItem.type+'å®‰è£…'"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-text</span>=<span class="string">"subItem.brand+subItem.productNo"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-text</span>=<span class="string">"subItem.installWay"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-text</span>=<span class="string">"'è´¹ç”¨ï¼š'+item.price+'å…ƒ'"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-text</span>=<span class="string">"item.createTime+'ä¸‹å•'"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">toStatusPage: <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> target = event.target;</span><br><span class="line">            <span class="keyword">while</span>(target.tagName != <span class="string">'LI'</span>)&#123;</span><br><span class="line">                target = target.parentNode;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">var</span> id = target.getAttribute(<span class="string">'orderId'</span>);</span><br><span class="line">            <span class="built_in">window</span>.location.href = Utils.baseUrl + <span class="string">'/html/orderStatus.html?id='</span>+id;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><blockquote><p>å¾ˆç®€å•çš„ä¸€ä¸ªåˆ—è¡¨è¿›è¯¦æƒ…ï¼Œä¸ºäº†èŠ‚çœå†…å­˜ï¼Œä½¿ç”¨äº†ä»£ç†çš„æ–¹å¼ï¼Œç”¨<code>ul</code>æ¥ä»£ç†äº‹ä»¶ï¼Œæœ€åˆçš„æƒ³æ³•æ˜¯<code>li</code>ç‚¹å‡»çš„æ—¶å€™è·å–ä»–çš„<code>orderId</code>ï¼Œç„¶åè·³è½¬åˆ°å¯¹åº”çš„è¯¦æƒ…é¡µï¼Œå½“ä½¿ç”¨ä»£ç†æ–¹å¼æ‹¿åˆ°çš„<code>target</code>å¯èƒ½æ˜¯<code>span</code>ï¼Œä¹Ÿå¯èƒ½æ˜¯<code>p</code>ï¼Œå¦‚æœå±‚çº§å¾ˆå¤šå°±å¾ˆå¯èƒ½æ˜¯åˆ«çš„ä»€ä¹ˆäº†ã€‚é‚£ä¹ˆè¿™é‡Œå¾—æƒ³æ³•å§æ‹¿åˆ°<code>li</code>ï¼Œæ‰€ä»¥ä½¿ç”¨äº†<code>parentNode</code>è¿™ä¸ªä¸œä¸œï¼Œå»åˆ¤æ–­<code>li</code>åœ¨å“ªï¼Œç”¨äº†ä¸€ä¸ªç®€å•çš„å¾ªç¯ï¼Œæ‹¿åˆ°<code>li</code>åç»“æŸå¾ªç¯ï¼Œæ‰§è¡Œåé¢çš„æ“ä½œï¼Œæš‚æ—¶è¿™æ ·è§£å†³äº†ï¼Œè¿˜æ²¡æœ‰æƒ³åˆ°æ›´å¥½çš„æ–¹æ³•ï¼Œæœ‰æ›´å¥½çš„æ–¹æ³•çš„æœ‹å‹æ¬¢è¿ç•™è¨€ï¼Œè®©å¤§å®¶éƒ½å­¦ä¹ ä¸‹ï¼Œè°¢å•¦ï¼</p></blockquote><p>å¥½äº†ï¼Œæš‚æ—¶å°±æ€»ç»“è¿™ä¹ˆå¤šå§ï¼Œæ–‡ä¸­å¦‚æœ‰é”™è¯¯ä¹‹å¤„éº»çƒ¦æŒ‡æ­£ï¼Œè°¢è°¢ï¼</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¯è¯´æ¥è§¦å¾®ä¿¡å¼€å‘æ˜¯æ¯•ä¸šå‰çš„ç¬¬ä¸€ä»½å·¥ä½œï¼Œå½“æ—¶æ‰€åšçš„å°±æ˜¯ä¸€äº›å¾®ä¿¡ä¸Šçš„æ´»åŠ¨æ¨å¹¿é¡µé¢ï¼Œç”¨åˆ°çš„jssdkå°±åªæœ‰å¾®ä¿¡åˆ†äº«è·Ÿç½‘é¡µç™»å½•æˆæƒå§ã€‚è®°å¾—å¾ˆä¹…ä»¥å‰å¾®ä¿¡åˆ†äº«æ˜¯ä¸éœ€è¦åç«¯æ”¯æŒçš„ï¼Œåæ¥ä¸–ç•Œå˜äº†ï¼Œä¸èƒ½åªé å‰ç«¯æ¥æ‹¯æ•‘ä¸–ç•Œäº†â€¦&lt;/p&gt;
&lt;p&gt;æœ€è¿‘çš„é¡¹ç›®å°±æ˜¯å¾®ä¿¡ç«¯çš„ï¼Œé¦–å…ˆç”¨åˆ°çš„å°±æ˜¯jssdkã€‚ä¸‹é¢æ•´ç†å‡ ä¸ªï¼Œè¿˜æ²¡ç”¨ä¸Šçš„ç­‰ç”¨ä¸Šäº†å†æ¥è¡¥å……ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="js" scheme="https://yl.frontjs.cc/tags/js/"/>
    
      <category term="å¾®ä¿¡" scheme="https://yl.frontjs.cc/tags/%E5%BE%AE%E4%BF%A1/"/>
    
  </entry>
  
  <entry>
    <title>addEventå’ŒremoveEvent</title>
    <link href="https://yl.frontjs.cc/2016/03/21/2016-03-21-add-event/"/>
    <id>https://yl.frontjs.cc/2016/03/21/2016-03-21-add-event/</id>
    <published>2016-03-21T09:38:46.000Z</published>
    <updated>2021-01-12T12:13:35.754Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨çœ‹<code>ã€Šç²¾é€šJavaScriptã€‹</code>è¿™æœ¬ä¹¦ï¼Œæ„Ÿè§‰è¿˜ä¸é”™ï¼Œè¿™é‡Œè®°å½•ä¸‹é‡Œé¢çš„äº‹ä»¶ç›‘å¬ä¸ç§»é™¤çš„æ–¹æ³•ï¼Œä»¥å¤‡æ—¥åå¼€å‘æ—¶å‚è€ƒã€‚</p><a id="more"></a><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addEvent</span>(<span class="params">element, type, handler</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//ä¸ºæ¯ä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°èµ‹äºˆä¸€ä¸ªç‹¬ç«‹çš„ID</span></span><br><span class="line">    <span class="keyword">if</span>(!handler.$$guid)&#123;</span><br><span class="line">        handler.$$guid = addEvent.guid++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ä¸ºå…ƒç´ å»ºç«‹ä¸€ä¸ªäº‹ä»¶ç±»å‹çš„æ•£åˆ—è¡¨</span></span><br><span class="line">    <span class="keyword">if</span>(!element.events)&#123;</span><br><span class="line">        element.events = &#123;&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ä¸ºæ¯å¯¹å…ƒç´ /äº‹ä»¶å»ºç«‹ä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°çš„æ•£åˆ—è¡¨</span></span><br><span class="line">    <span class="keyword">var</span> handlers = element.events[type];</span><br><span class="line">    <span class="keyword">if</span>(!handlers)&#123;</span><br><span class="line">        handlers = element.events[type] = &#123;&#125;;</span><br><span class="line">        <span class="comment">//å­˜å‚¨å·²æœ‰çš„äº‹ä»¶å¤„ç†å‡½æ•°(å¦‚æœå·²å­˜åœ¨ä¸€ä¸ª)</span></span><br><span class="line">        <span class="keyword">if</span>(element[<span class="string">"on"</span>+type])&#123;</span><br><span class="line">            handlers[<span class="number">0</span>] = element[<span class="string">"on"</span>+type];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åœ¨æ•£åˆ—è¡¨ä¸­å­˜å‚¨è¯¥äº‹ä»¶å¤„ç†å‡½æ•°</span></span><br><span class="line">    handlers[handler.$$guid] = handler;</span><br><span class="line">    <span class="comment">//èµ‹äºˆä¸€ä¸ªå…¨å±€äº‹ä»¶å¤„ç†å‡½æ•°æ¥å¤„ç†æ‰€æœ‰å·¥ä½œ</span></span><br><span class="line">    element[<span class="string">"on"</span>+type] = handleEvent;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//åˆ›å»ºç‹¬ç«‹IDçš„è®¡æ•°å™¨</span></span><br><span class="line">addEvent.guid = <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeEvent</span>(<span class="params">element, type, handler</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//ä»æ•£åˆ—è¡¨ä¸­åˆ é™¤äº‹ä»¶å¤„ç†å‡½æ•°</span></span><br><span class="line">    <span class="keyword">if</span>(element.events &amp;&amp; element.events[type])&#123;</span><br><span class="line">        <span class="keyword">delete</span> element.events[type][handler.$$guid];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleEvent</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> returnValue = <span class="literal">true</span>;</span><br><span class="line">    <span class="comment">//è·å–äº‹ä»¶å¯¹è±¡(IEä½¿ç”¨å…¨å±€çš„äº‹ä»¶å¯¹è±¡)</span></span><br><span class="line">    event = event || fixEvent(<span class="built_in">window</span>.event);</span><br><span class="line">    <span class="comment">//è·å–äº‹ä»¶å¤„ç†å‡½æ•°æ•£åˆ—è¡¨çš„å¼•ç”¨</span></span><br><span class="line">    <span class="keyword">var</span> handlers = <span class="keyword">this</span>.events[event.type];</span><br><span class="line">    <span class="comment">//ä¾æ¬¡æ‰§è¡Œæ¯ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i <span class="keyword">in</span> handlers)&#123;</span><br><span class="line">        <span class="keyword">this</span>.$$handleEvent = handlers[i];</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.$$handleEvent(event) === <span class="literal">false</span>)&#123;</span><br><span class="line">            returnValue = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> returnValue;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//å¢åŠ ä¸€äº›IEäº‹ä»¶å¯¹è±¡çš„ç¼ºä¹çš„æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fixEvent</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//å¢åŠ W3Cæ ‡å‡†äº‹ä»¶æ–¹æ³•</span></span><br><span class="line">    event.preventDefault = fixEvent.preventDefault;</span><br><span class="line">    event.stopPropagation = fixEvent.stopPropagation;</span><br><span class="line">    <span class="keyword">return</span> event;</span><br><span class="line">&#125;;</span><br><span class="line">fixEvent.preventDefault = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.returnValue =  <span class="literal">false</span>;</span><br><span class="line">&#125;;</span><br><span class="line">fixEvent.stopPropagation = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.cancelBulle = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*test*/</span> </span><br><span class="line"></span><br><span class="line">addEvent(<span class="built_in">document</span>.body, <span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'a'</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.body.click();</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘åœ¨çœ‹&lt;code&gt;ã€Šç²¾é€šJavaScriptã€‹&lt;/code&gt;è¿™æœ¬ä¹¦ï¼Œæ„Ÿè§‰è¿˜ä¸é”™ï¼Œè¿™é‡Œè®°å½•ä¸‹é‡Œé¢çš„äº‹ä»¶ç›‘å¬ä¸ç§»é™¤çš„æ–¹æ³•ï¼Œä»¥å¤‡æ—¥åå¼€å‘æ—¶å‚è€ƒã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="js" scheme="https://yl.frontjs.cc/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>å®ç¢4752gæ¢ssdï¼Œå…‰é©±ä½è£…ç¡¬ç›˜(å¤šå›¾æ…å…¥)</title>
    <link href="https://yl.frontjs.cc/2016/03/14/2016-03-14-note-ssd/"/>
    <id>https://yl.frontjs.cc/2016/03/14/2016-03-14-note-ssd/</id>
    <published>2016-03-14T09:38:27.000Z</published>
    <updated>2021-01-12T12:13:35.754Z</updated>
    
    <content type="html"><![CDATA[<h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>ç¬”è®°æœ¬å·²ç»ä¹°äº†4å¹´äº†ï¼Œæœ€è¿‘ç‰¹åˆ«å¡ï¼Œæ‰“å¼€IDEéƒ½è¦ç­‰åŠå¤©ï¼Œè¿‘æœŸä¹Ÿæ²¡æœ‰æ¢ç¬”è®°æœ¬çš„æ‰“ç®—ï¼Œå°±ç´¢æ€§æ¢ä¸ªssdå§</p><h1 id="æ‹†ç¡¬ç›˜æ¢ssd"><a href="#æ‹†ç¡¬ç›˜æ¢ssd" class="headerlink" title="æ‹†ç¡¬ç›˜æ¢ssd"></a>æ‹†ç¡¬ç›˜æ¢ssd</h1><a id="more"></a><ul><li>å‡†å¤‡ï¼šç¬”è®°æœ¬ï¼Œå·¥å…·ç®±ï¼Œssdï¼Œç¡¬ç›˜æ‰˜æ¶</li></ul><p><img src="http://7xrl5v.com1.z0.glb.clouddn.com/github%2Fio%2Fblog20160312-ssd-1.png" alt=""></p><ul><li>æ‰“å¼€ç¬”è®°æœ¬åç›–ï¼Œå¯ä»¥çœ‹åˆ°ç¡¬ç›˜ï¼Œæ‹†ä¸‹å›ºå®šç¡¬ç›˜çš„å‡ ä¸ªèºä¸ï¼Œå¦‚å›¾</li></ul><p><img src="http://7xrl5v.com1.z0.glb.clouddn.com/github%2Fio%2Fblog20160312-ssd-2.png" alt=""></p><ul><li>æ‹†ä¸‹ç¡¬ç›˜</li></ul><p><img src="http://7xrl5v.com1.z0.glb.clouddn.com/github%2Fio%2Fblog20160312-ssd-3.png" alt=""></p><ul><li>å°†ssdè£…åœ¨ç¡¬ç›˜ä½</li></ul><p><img src="http://7xrl5v.com1.z0.glb.clouddn.com/github%2Fio%2Fblog20160312-ssd-4.png" alt=""></p><ul><li>ç›–ä¸Šç¡¬ç›˜å›ºå®šç›–ï¼Œä¸Šå¥½èºä¸</li></ul><p><img src="http://7xrl5v.com1.z0.glb.clouddn.com/github%2Fio%2Fblog20160312-ssd-5.png" alt=""></p><ul><li>ç›–ä¸Šç¬”è®°æœ¬åç›–ï¼Œssdå°±è£…å¥½äº†</li></ul><p><img src="http://7xrl5v.com1.z0.glb.clouddn.com/github%2Fio%2Fblog20160312-ssd-6.png" alt=""></p><h1 id="å…‰é©±ä½è£…ç¡¬ç›˜"><a href="#å…‰é©±ä½è£…ç¡¬ç›˜" class="headerlink" title="å…‰é©±ä½è£…ç¡¬ç›˜"></a>å…‰é©±ä½è£…ç¡¬ç›˜</h1><p>ç°åœ¨å…‰é©±çš„ä½œç”¨è¶Šæ¥è¶Šå°äº†ï¼Œåˆšæ‰ä»ç¬”è®°æœ¬ä¸‹ä¸‹æ¥çš„æœºæ¢°ç¡¬ç›˜å¯ä»¥ä½œä¸ºç¬”è®°æœ¬çš„å­˜å‚¨ï¼Œssdå°±ç”¨æ¥è£…ç³»ç»Ÿè£…è½¯ä»¶ï¼Œæ‰€ä»¥å¯ä»¥å°†å…‰é©±æ‹†ä¸‹æ¥ï¼ŒæŠŠç©ºé—´ç•™ç»™ç¡¬ç›˜</p><ul><li>æ‹†å…‰é©±ï¼šæ‹§ä¸‹å›ºå®šå…‰é©±çš„èºä¸ï¼Œå¦‚å›¾ï¼Œç„¶åç”¨é’ˆ(ä¹°ç¡¬ç›˜æ‰˜æ¶ä¸€èˆ¬éƒ½ä¼šé€ä¸€ä¸ªç»†å°çš„å·¥å…·)åœ¨é‡Œé¢æ…ä¸€ä¸‹ï¼ŒåŒæ—¶ç¨å¾®ç”¨ç‚¹åŠ›å¾€å¤–æ‹‰å…‰é©±ï¼Œå…‰é©±å°±æ‹†ä¸‹æ¥äº†</li></ul><p><img src="http://7xrl5v.com1.z0.glb.clouddn.com/github%2Fio%2Fblog20160312-ssd-7.png" alt=""></p><ul><li>ç¡¬ç›˜æ‰˜æ¶å’Œå…‰é©±å¯¹æ¯”</li></ul><p><img src="http://7xrl5v.com1.z0.glb.clouddn.com/github%2Fio%2Fblog20160312-ssd-8.png" alt=""></p><p><img src="http://7xrl5v.com1.z0.glb.clouddn.com/github%2Fio%2Fblog20160312-ssd-9.png" alt=""></p><p><img src="http://7xrl5v.com1.z0.glb.clouddn.com/github%2Fio%2Fblog20160312-ssd-10.png" alt=""></p><ul><li>å°†ç¡¬ç›˜æ”¾å…¥æ‰˜æ¶ï¼ŒæŠŠåŸå…‰é©±è¾¹æ²¿çš„å°ç›–æ¡æ‹†ä¸‹è£…åœ¨ç¡¬ç›˜æ‰˜æ¶ä¸Šï¼Œç„¶åæ”¾å…¥å…‰é©±ä½ï¼Œä¸€åˆ‡å°±okäº†</li></ul><p><img src="http://7xrl5v.com1.z0.glb.clouddn.com/github%2Fio%2Fblog20160312-ssd-11.png" alt=""></p><p><img src="http://7xrl5v.com1.z0.glb.clouddn.com/github%2Fio%2Fblog20160312-ssd-12.png" alt=""></p><h1 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h1><p>å…¨éƒ¨å¼„å¥½åï¼Œå¼€æœºï¼ŒF2ï¼Œå¼€æœºé¦–é€‰é¡¹è®¾ç½®ä¸ºå…‰é©±ä½çš„ç¡¬ç›˜ï¼ˆä¹Ÿå°±æ˜¯è¿›å…¥åŸæ¥çš„æ“ä½œç³»ç»Ÿï¼‰ï¼Œå¼€æœºååœ¨ç£ç›˜ç®¡ç†å¯ä»¥çœ‹åˆ°ssdçš„æœªåˆ†é…çš„ç©ºé—´ï¼Œå°±è¯´æ˜ssdå®‰è£…æˆåŠŸï¼Œç¡¬ç›˜ä¹Ÿåœ¨å…‰é©±ä½æ­£å¸¸ä½¿ç”¨äº†ã€‚ç„¶åå°±æ˜¯å°†ç³»ç»Ÿå®‰è£…åœ¨ssdï¼Œå¹¶è®¾ç½®ssdä¸ºç¬¬ä¸€å¯åŠ¨é¡¹äº†ã€‚å®‰è£…ç³»ç»Ÿçš„å†…å®¹è¿™é‡Œå°±ä¸å¤šè¯´äº†ï¼Œç½‘ä¸Šå¾ˆå¤šæ•™ç¨‹ã€‚</p><p>æœ¬æ•™ç¨‹å°±è¯´åˆ°è¿™é‡Œï¼Œå¤§å®¶æœ‰ä»€ä¹ˆé—®é¢˜æ¬¢è¿ç•™è¨€ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;ç¬”è®°æœ¬å·²ç»ä¹°äº†4å¹´äº†ï¼Œæœ€è¿‘ç‰¹åˆ«å¡ï¼Œæ‰“å¼€IDEéƒ½è¦ç­‰åŠå¤©ï¼Œè¿‘æœŸä¹Ÿæ²¡æœ‰æ¢ç¬”è®°æœ¬çš„æ‰“ç®—ï¼Œå°±ç´¢æ€§æ¢ä¸ªssdå§&lt;/p&gt;
&lt;h1 id=&quot;æ‹†ç¡¬ç›˜æ¢ssd&quot;&gt;&lt;a href=&quot;#æ‹†ç¡¬ç›˜æ¢ssd&quot; class=&quot;headerlink&quot; title=&quot;æ‹†ç¡¬ç›˜æ¢ssd&quot;&gt;&lt;/a&gt;æ‹†ç¡¬ç›˜æ¢ssd&lt;/h1&gt;
    
    </summary>
    
    
      <category term="ssd" scheme="https://yl.frontjs.cc/tags/ssd/"/>
    
  </entry>
  
  <entry>
    <title>å…³äºjavascriptå‡½æ•°å£°æ˜æå‡å’Œå˜é‡å£°æ˜æå‡</title>
    <link href="https://yl.frontjs.cc/2016/03/12/2016-03-13-define-upgrade/"/>
    <id>https://yl.frontjs.cc/2016/03/12/2016-03-13-define-upgrade/</id>
    <published>2016-03-12T09:37:36.000Z</published>
    <updated>2021-01-12T12:13:35.754Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸€ç›´çŸ¥é“javascriptå˜é‡å’Œå‡½æ•°éƒ½ä¼šåœ¨è‡ªå·±çš„ä½œç”¨äºå†…å£°æ˜æå‡ï¼Œä½†æ˜¯å½“å˜é‡åå’Œå‡½æ•°åç›¸åŒæ—¶ï¼Œè°ä¼šè¦†ç›–è°å‘¢ï¼Ÿ</p><a id="more"></a><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">alert(a);</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line">alert(a);</span><br></pre></td></tr></table></figure><blockquote><p>ç»“æœï¼šfunction a(){}    1</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">alert(a);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">alert(a);</span><br></pre></td></tr></table></figure><blockquote><p>ç»“æœï¼šfunction a(){}    1</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">alert(a);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> a;</span><br><span class="line">alert(a);</span><br></pre></td></tr></table></figure><blockquote><p>ç»“æœï¼šfunction a(){}    function a(){}</p></blockquote><h3 id="ç»“è®ºï¼š"><a href="#ç»“è®ºï¼š" class="headerlink" title="ç»“è®ºï¼š"></a>ç»“è®ºï¼š</h3><p>åŒä¸€ä¸ªåç§°æ ‡è¯†aï¼Œå³æœ‰å˜é‡å£°æ˜var aï¼Œåˆæœ‰å‡½æ•°å£°æ˜function a() {}ï¼Œä¸ç®¡äºŒè€…å£°æ˜çš„é¡ºåºï¼Œå‡½æ•°å£°æ˜ä¼šè¦†ç›–å˜é‡å£°æ˜ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ­¤æ—¶açš„å€¼æ˜¯å£°æ˜çš„å‡½æ•°function a() {}ã€‚å¦‚æœåœ¨å˜é‡å£°æ˜çš„åŒæ—¶åˆå§‹åŒ–aï¼Œæˆ–æ˜¯ä¹‹åå¯¹aè¿›è¡Œèµ‹å€¼ï¼Œæ­¤æ—¶açš„å€¼å°±æ˜¯å˜é‡çš„å€¼</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸€ç›´çŸ¥é“javascriptå˜é‡å’Œå‡½æ•°éƒ½ä¼šåœ¨è‡ªå·±çš„ä½œç”¨äºå†…å£°æ˜æå‡ï¼Œä½†æ˜¯å½“å˜é‡åå’Œå‡½æ•°åç›¸åŒæ—¶ï¼Œè°ä¼šè¦†ç›–è°å‘¢ï¼Ÿ&lt;/p&gt;
    
    </summary>
    
    
      <category term="js" scheme="https://yl.frontjs.cc/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>CRMå‰ç«¯æ¶æ„åˆ†äº«</title>
    <link href="https://yl.frontjs.cc/2016/03/09/2016-03-09-crm-share/"/>
    <id>https://yl.frontjs.cc/2016/03/09/2016-03-09-crm-share/</id>
    <published>2016-03-09T09:36:27.000Z</published>
    <updated>2021-01-12T12:13:35.753Z</updated>
    
    <content type="html"><![CDATA[<h1 id="crm-app"><a href="#crm-app" class="headerlink" title="crm-app"></a>crm-app</h1><ul><li>å¼€å‘å·¥å…·ï¼šhbuilder</li><li>ä½¿ç”¨çš„æŠ€æœ¯ï¼šmui  arttemplate.js  h5+  native.js</li><li><a href="http://ask.dcloud.net.cn/docs" target="_blank" rel="noopener">å‚è€ƒæ–‡æ¡£</a></li></ul><h3 id="è¯¦ç»†è®²è§£"><a href="#è¯¦ç»†è®²è§£" class="headerlink" title="è¯¦ç»†è®²è§£"></a>è¯¦ç»†è®²è§£</h3><a id="more"></a><ul><li><p>é¡¹ç›®ç»“æ„</p></li><li><p><code>mainfist.json</code> é…ç½®</p><ul><li>åº”ç”¨ä¿¡æ¯</li><li>å›¾æ ‡ï¼Œå¯åŠ¨å›¾ç‰‡</li><li>sdk(å…³é”®ç‚¹)</li><li>æ¨¡å—æƒé™(å…³é”®ç‚¹)</li></ul></li><li><p>ç‰ˆæœ¬å‡çº§</p><ul><li>ä¿®æ”¹<code>manifest.json</code>æ–‡ä»¶çš„ç‰ˆæœ¬å·</li><li>ä¿®æ”¹<code>update.json</code>æ–‡ä»¶çš„ç‰ˆæœ¬å·ï¼Œä»¥åŠæ›´æ–°èµ„æºè·¯å¾„</li></ul></li><li><p>å¼€å‘ä¸­å¸¸ç”¨åŠŸèƒ½åŠå¡«å‘æ–¹æ³•</p><ul><li>ä¸‹æ‹‰åˆ·æ–°+ä¸Šæ‹‰åŠ è½½</li></ul></li></ul><blockquote><p><code>html</code>ç»“æ„</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"refreshContainer"</span> <span class="attr">class</span>=<span class="string">"mui-content mui-scroll-wrapper"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mui-scroll"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p><code>js</code>ä»£ç </p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$.init(&#123;</span><br><span class="line">pullRefresh:&#123;</span><br><span class="line">container:<span class="string">'#refreshContainer'</span>,</span><br><span class="line">down: &#123;</span><br><span class="line">contentdown : <span class="string">"ä¸‹æ‹‰å¯ä»¥åˆ·æ–°"</span>,</span><br><span class="line">    contentover : <span class="string">"é‡Šæ”¾ç«‹å³åˆ·æ–°"</span>,</span><br><span class="line">    contentrefresh : <span class="string">"æ­£åœ¨åˆ·æ–°..."</span>,</span><br><span class="line">    callback:process.pullDownList</span><br><span class="line">&#125;,</span><br><span class="line">up: &#123;</span><br><span class="line">callback: process.pullUpList</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><hr><ul><li>é¡µé¢è·³è½¬</li></ul><p>é¡µé¢ç±»å‹ï¼šç»„è£…é¡µé¢  ç‹¬ç«‹é¡µé¢ (ä¸¾ä¸ªæ —å­ returnæ¨¡å—)<br>è·³è½¬é¡µé¢äº‹ä»¶è§¦å‘ï¼š<code>fire</code>  mui.back()</p><ul><li><p>ç›¸å…³sdk (åœ°å›¾ã€å¤åˆ¶ã€ç²˜è´´ã€æ–‡ä»¶ä¸Šä¼ ã€æ‹ç…§ã€åˆ†äº«) </p><ul><li><p>è°ƒè¯•ï¼Œç›´æ¥è¿æ‰‹æœº</p></li><li><p>æ‰“åŒ… ï¼ˆäº‘ç«¯æ‰“åŒ…ç”Ÿæˆ<code>apk</code>å’Œ<code>ipa</code>æ–‡ä»¶ï¼‰</p></li></ul><blockquote><p>iosæ‰“åŒ…éœ€è¦ç›¸å…³è´¦å·ä¿¡æ¯åŠè¯ä¹¦(å¼€å‘è¯ä¹¦æœ‰è¿‡æœŸæ—¶é—´)ï¼Œandroidå¯ä»¥ä½¿ç”¨dcloudçš„å…¬ç”¨è¯ä¹¦ä¹Ÿå¯ä»¥ç”¨è‡ªå·±çš„è¯ä¹¦</p></blockquote><ul><li>å…¨å±€æ–¹æ³•<ul><li>å¸¸ç”¨çš„æ–¹æ³•å¯ä»¥å†™åœ¨<code>app.js</code>åœ¨(å…¬å…±æ–‡ä»¶)æ–‡ä»¶ä¸­ï¼Œæ¯”å¦‚å…¨å±€<code>ajax</code>ç­‰</li></ul></li></ul><hr></li></ul><h1 id="crm-pc"><a href="#crm-pc" class="headerlink" title="crm-pc"></a>crm-pc</h1><ul><li>å¼€å‘å·¥å…· ï¼šwebstorm<ul><li>æ’ä»¶é…ç½®ï¼šscssï¼ˆé…ç½®åï¼Œsassè‡ªåŠ¨è½¬cssï¼‰</li></ul></li><li>å¼€å‘ç¯å¢ƒæ­å»ºï¼š<ul><li>å®‰è£…<a href="https://nodejs.org/en/" target="_blank" rel="noopener">nodejs</a>ï¼Œæ¨è4.2ä»¥ä¸Šç‰ˆæœ¬</li><li>å®‰è£…<code>gulp</code>ï¼Œæ„å»ºå·¥å…·</li><li>å®‰è£…å…¶ä»–æ‰“åŒ…æ’ä»¶(package.jsonå·²ç»é…ç½®å¥½æ„å»ºæ’ä»¶çš„ä¾èµ–ï¼Œç›´æ¥æ‰§è¡Œ<code>npm install</code>å³å¯å®‰è£…ï¼Œå®‰è£…ä¸äº†ï¼Œè¯·ç¿»å¢™)</li></ul></li><li><p>é¡¹ç›®ç»“æ„</p></li><li><p>å¼€å‘è§„èŒƒ</p><ul><li>jsã€cssã€htmlã€ç­‰èµ„æºå•ç‹¬æ–‡ä»¶å¤¹æ”¾ç½®</li><li>ä¸€ä¸ªæ¨¡å—ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ¯ç§èµ„æºéƒ½ä¸€è‡´ï¼Œcss(scssæ–‡ä»¶)èµ„æºç»Ÿä¸€å¼•å…¥å…¬å…±æ ·å¼ <code>@import &quot;../subBase&quot;;</code></li><li>bodyæ ‡ç­¾ç»Ÿè®¡åŠ ä¸Šç±»åä¸ºæ¨¡å—åå­—ï¼Œæ–¹ä¾¿æ„å»ºåç‰¹æ®Šæ ·å¼åŒºåˆ†</li><li>æš‚æ—¶æ²¡åšä¾èµ–ç®¡ç†ï¼ŒæŒ‰éœ€å¼•å…¥ç»„ä»¶ï¼šåº“-&gt;æ’ä»¶(ç»„ä»¶)-&gt;è‡ªå®šä¹‰</li><li>å¼€å‘ç›®å½•srcï¼Œå‘å¸ƒç›®å½•dist</li></ul></li><li><p>UIåŠåº“</p><ul><li>uiä½¿ç”¨bootstrapï¼Œå¼•å…¥jqueryä¸»è¦æ˜¯ä¸ºäº†æ”¯æŒbootstrap</li><li>ä½¿ç”¨<a href="http://cn.vuejs.org/é©±åŠ¨é¡µé¢æ•°æ®(ä¸€èˆ¬é¡µé¢ä¸Šçš„domæ“ä½œåŸºæœ¬éƒ½å¯ä»¥è½¬æ¢ä¸ºæ•°æ®æ“ä½œ" target="_blank" rel="noopener">vue.js</a></li></ul></li><li><p>vueå¸¸ç”¨åŠŸèƒ½ä»‹ç»</p><ul><li>æ•°æ®ç»‘å®šï¼Œè®¡ç®—å±æ€§ï¼Œæ–¹æ³•ç»‘å®šï¼Œå±æ€§ï¼Œç»„ä»¶åŒ–(stateAnalysisæ¨¡å—)</li></ul></li><li><p>æ„å»ºæ–¹æ³•åŠå¸¸ç”¨gulpæ’ä»¶ï¼š(è§gulpfileæ–‡ä»¶)</p></li><li><p>å…¶ä»–</p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;crm-app&quot;&gt;&lt;a href=&quot;#crm-app&quot; class=&quot;headerlink&quot; title=&quot;crm-app&quot;&gt;&lt;/a&gt;crm-app&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;å¼€å‘å·¥å…·ï¼šhbuilder&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨çš„æŠ€æœ¯ï¼šmui  arttemplate.js  h5+  native.js&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://ask.dcloud.net.cn/docs&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;å‚è€ƒæ–‡æ¡£&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;è¯¦ç»†è®²è§£&quot;&gt;&lt;a href=&quot;#è¯¦ç»†è®²è§£&quot; class=&quot;headerlink&quot; title=&quot;è¯¦ç»†è®²è§£&quot;&gt;&lt;/a&gt;è¯¦ç»†è®²è§£&lt;/h3&gt;
    
    </summary>
    
    
      <category term="crm" scheme="https://yl.frontjs.cc/tags/crm/"/>
    
  </entry>
  
  <entry>
    <title>å…³äºjså¼‚æ­¥ä¸Šä¼ æ–‡ä»¶</title>
    <link href="https://yl.frontjs.cc/2016/03/08/2016-03-08-file-upload/"/>
    <id>https://yl.frontjs.cc/2016/03/08/2016-03-08-file-upload/</id>
    <published>2016-03-08T09:34:59.000Z</published>
    <updated>2021-01-12T12:13:35.753Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡é¦–å‘åœ¨æˆ‘çš„åšå®¢å›­ï¼š<a href="https://www.cnblogs.com/yuanlong1012/p/5127497.html" target="_blank" rel="noopener">https://www.cnblogs.com/yuanlong1012/p/5127497.html</a></p></blockquote><p>æœ€è¿‘é¡¹ç›®é‡Œæœ‰ä¸ªéœ€æ±‚ï¼Œä¸Šä¼ æ–‡ä»¶ï¼ˆå¥½å§ï¼Œè¿™ç§éœ€æ±‚å¾ˆå¸¸è§ï¼Œè¿™ä¹Ÿä¸æ˜¯ç¬¬ä¸€æ¬¡é‡åˆ°äº†ï¼‰ã€‚å½“æ—¶ç¬¬ä¸€æƒ³æ³•å°±æ˜¯ç›´æ¥ç”¨formè¡¨å•æäº¤ï¼ˆåŸè°…æˆ‘ä»¥å‰å°±æ˜¯è¿™ä¹ˆå¹²çš„ï¼‰ï¼Œä¸è¿‡è¡¨å•é‡Œä¸ä»…æœ‰æ–‡ä»¶è¿˜æœ‰åˆ«çš„ä¿¡æ¯éœ€è¦äº¤äº’ï¼Œè·Ÿåç«¯å•†é‡åå†³å®šæ–‡ä»¶å•ç‹¬ä¸Šä¼ ï¼Œè·å–åˆ°æœåŠ¡å™¨ç«¯è¿”å›çš„æ–‡ä»¶åœ°å€åœ¨å’Œè¡¨å•ä¸€èµ·æäº¤ã€‚è¿™é‡Œå°±éœ€è¦å¼‚æ­¥ä¸Šä¼ æ–‡ä»¶ã€‚<br>ã€€ã€€åœ¨ç½‘ä¸Šæ‰’äº†æ‰’ç›¸å…³çš„å†…å®¹ï¼Œå‘ç°è¿˜çœŸä¸å°‘ï¼Œé˜®ä¸€å³°è€å¸ˆçš„è¿™ç¯‡æ–‡ç« <a href="http://www.ruanyifeng.com/blog/2012/08/file_upload.html" target="_blank" rel="noopener">æ–‡ä»¶ä¸Šä¼ çš„æ¸è¿›å¼å¢å¼º</a>å°±ä»‹ç»çš„å¾ˆå…·ä½“ï¼Œä¸‹é¢å°±è°ˆè°ˆè‡ªå·±åœ¨å®æˆ˜ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜çš„æ„Ÿå—å§ã€‚</p><a id="more"></a><p>ã€€ã€€å…ˆçœ‹çœ‹æ•ˆæœï¼Œå®ç°äº†å“ªäº›åŠŸèƒ½</p><p><img src="https://images2015.cnblogs.com/blog/695097/201601/695097-20160113143715944-686026729.png" alt="">ï¼ˆå¥½å§ï¼Œå°±ä¸€ä¸ªæŒ‰é’®è€Œå·²ï¼Œæå¾—ç¥ç¥ç§˜ç§˜ï¼Œå˜¿å˜¿ï¼‰</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"btn"</span> @<span class="attr">click</span>=<span class="string">"upload"</span>&gt;</span>ç‚¹å‡»ä¸Šä¼ æ–‡ä»¶<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç»™æŒ‰é’®ç»‘å®šäº†ä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼Œä¸‹é¢çœ‹çœ‹ç‚¹å‡»äº‹ä»¶æ–¹æ³•é‡Œåšäº†ä»€ä¹ˆ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    upload: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        myUpload(&#123;</span><br><span class="line">            url: <span class="built_in">window</span>.location.protocol + <span class="string">'//'</span> + <span class="built_in">window</span>.location.host + <span class="string">'/crm/upload'</span>,</span><br><span class="line">            maxSize: <span class="number">10</span>,</span><br><span class="line">            beforeSend: <span class="function"><span class="keyword">function</span>(<span class="params">file</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">            &#125;,</span><br><span class="line">            callback: <span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</span><br><span class="line">                <span class="keyword">var</span> data = <span class="built_in">JSON</span>.parse(res);</span><br><span class="line">                pageCont.attachmentUrl = data.url;</span><br><span class="line">            &#125;,</span><br><span class="line">            uploading: <span class="function"><span class="keyword">function</span>(<span class="params">pre</span>)</span>&#123;</span><br><span class="line">                pageCont.uploadCont.display = <span class="string">'block'</span>;</span><br><span class="line">                pageCont.uploadStyle.width = pre * <span class="number">2</span> + <span class="string">'px'</span>;</span><br><span class="line">                pageCont.pre = pre;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŒ‰é’®ç»‘å®šçš„ç‚¹å‡»äº‹ä»¶æ‰§è¡Œäº†uploadæ–¹æ³•ï¼Œåœ¨uploadæ–¹æ³•é‡Œè°ƒç”¨äº†ä¸€ä¸‹myUploadæ–¹æ³•ï¼Œå¹¶ä¼ é€’äº†ä¸€äº›é…ç½®ä¿¡æ¯è¿›å»ï¼Œç¨åè¯´ä¸‹è¿™äº›é…ç½®ä¿¡æ¯ã€‚å…ˆçœ‹çœ‹myUploadçš„å…·ä½“å®ç°ï¼š</p><p>ã€€ã€€åˆå§‹åŒ–äº†ä¸€ä¸ªFormDataå¯¹è±¡å’Œä¸€ä¸ªXMHttpResquestå¯¹è±¡ï¼Œåˆ›å»ºä¸€ä¸ªtypeä¸ºfileçš„inputï¼Œå¹¶è§¦å‘ä¸€æ¬¡è¯¥inputçš„clickï¼Œå¦‚ä¸‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fd = <span class="keyword">new</span> FormData(),</span><br><span class="line">    xhr = <span class="keyword">new</span> XMLHttpRequest(),</span><br><span class="line">    input;</span><br><span class="line">input = <span class="built_in">document</span>.createElement(<span class="string">'input'</span>);</span><br><span class="line">input.setAttribute(<span class="string">'id'</span>, <span class="string">'myUploadInput'</span>);</span><br><span class="line">input.setAttribute(<span class="string">'type'</span>, <span class="string">'file'</span>);</span><br><span class="line">input.setAttribute(<span class="string">'name'</span>, <span class="string">'file'</span>);</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(input);</span><br><span class="line">input.style.display = <span class="string">'none'</span>;</span><br><span class="line">input.click();</span><br></pre></td></tr></table></figure><p>ç›‘å¬åˆšæ‰åˆ›å»ºçš„inputçš„changeäº‹ä»¶ï¼Œå¹¶ä½œåœ¨é‡Œé¢åšç›¸åº”å¤„ç†</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">input.onchange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!input.value)&#123;<span class="keyword">return</span>;&#125;</span><br><span class="line">    <span class="keyword">if</span>(option.maxSize &amp;&amp;  input.files[<span class="number">0</span>].size &gt; option.maxSize * <span class="number">1024</span> * <span class="number">1024</span>)&#123;</span><br><span class="line">        dialog(&#123;</span><br><span class="line">            title: <span class="string">'æç¤º'</span>,</span><br><span class="line">            content: <span class="string">'è¯·ä¸Šä¼ å°äº'</span>+option.maxSize+<span class="string">'Mçš„æ–‡ä»¶'</span>,</span><br><span class="line">            okValue: <span class="string">'ç¡®å®š'</span>,</span><br><span class="line">            ok: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">        &#125;).showModal();</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(option.beforeSend <span class="keyword">instanceof</span> <span class="built_in">Function</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(option.beforeSend(input) === <span class="literal">false</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    fd.append(<span class="string">'file'</span>, input.files[<span class="number">0</span>]);</span><br><span class="line">    xhr.open(<span class="string">'post'</span>, option.url);</span><br><span class="line">    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(xhr.status == <span class="number">200</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(xhr.readyState == <span class="number">4</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(option.callback <span class="keyword">instanceof</span> <span class="built_in">Function</span>)&#123;</span><br><span class="line">                    option.callback(xhr.responseText);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(!(dialog.get(<span class="string">'uploadfail'</span>)))&#123;</span><br><span class="line">                dialog(&#123;</span><br><span class="line">                    id: <span class="string">'uploadfail'</span>,</span><br><span class="line">                    title: <span class="string">'æç¤º'</span>,</span><br><span class="line">                    content: <span class="string">'ä¸Šä¼ å¤±è´¥'</span>,</span><br><span class="line">                    okValue: <span class="string">'ç¡®å®š'</span>,</span><br><span class="line">                    ok: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">                &#125;).showModal();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    xhr.upload.onprogress = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> pre = <span class="built_in">Math</span>.floor(<span class="number">100</span> * event.loaded / event.total);</span><br><span class="line">        <span class="keyword">if</span>(option.uploading <span class="keyword">instanceof</span> <span class="built_in">Function</span>)&#123;</span><br><span class="line">            option.uploading(pre);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    xhr.send(fd);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è§£é‡Šä¸‹ä¸Šé¢çš„ä»£ç ã€‚inputçš„changeäº‹ä»¶è§¦å‘åï¼Œé¦–å…ˆåˆ¤æ–­äº†ä¸‹å½“å‰æ˜¯å¦é€‰æ‹©äº†æ–‡ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(!input.value)&#123;<span class="keyword">return</span>;&#125;</span><br></pre></td></tr></table></figure><p>ä¸€å¼€å§‹æˆ‘æ˜¯æ²¡åšè¿™ä¸ªåˆ¤æ–­çš„ï¼Œåœ¨åæ¥çš„æµ‹è¯•è¿‡ç¨‹ä¸­å‘ç°ï¼Œå½“ä¸Šä¼ ä¸€æ¬¡æ–‡ä»¶åï¼Œå†æ¬¡ç‚¹å‡»æŒ‰é’®ä¸Šä¼ ï¼Œæ‰“å¼€æ–‡ä»¶é€‰æ‹©æ¡†ï¼Œç„¶åä¸é€‰æ‹©æ–‡ä»¶ï¼Œè€Œæ˜¯ç‚¹å‡»å–æ¶ˆæŒ‰é’®ï¼Œchangeäº‹ä»¶ä¹Ÿè§¦å‘äº†ï¼Œå¯¼è‡´åé¢çš„ä»£ç ä¹Ÿä¼šæ‰§è¡Œï¼Œæ˜¾ç„¶è¿™ä¸åˆç†ï¼Œæ•…åŠ äº†è¿™ä¸ªåˆ¤æ–­ã€‚</p><p>ã€€ã€€ç„¶åé™åˆ¶äº†ä¸‹ä¸Šä¼ æ–‡ä»¶çš„å¤§å°ï¼ˆè¿™æ ·çš„äº‹èƒ½å¤Ÿå‰ç«¯å¤„ç†å°±ä¸è¦äº¤ç»™æœåŠ¡ç«¯æ¥éªŒè¯äº†ï¼‰ï¼Œå½“æ–‡ä»¶å¤§å°è¶…è¿‡æœ€å¤§é™åˆ¶ï¼Œå°±ä¼šå¼¹æ¡†æç¤º</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(option.maxSize &amp;&amp;  input.files[<span class="number">0</span>].size &gt; option.maxSize * <span class="number">1024</span> * <span class="number">1024</span>)&#123;</span><br><span class="line">    dialog(&#123;</span><br><span class="line">        title: <span class="string">'æç¤º'</span>,</span><br><span class="line">        content: <span class="string">'è¯·ä¸Šä¼ å°äº'</span>+option.maxSize+<span class="string">'Mçš„æ–‡ä»¶'</span>,</span><br><span class="line">        okValue: <span class="string">'ç¡®å®š'</span>,</span><br><span class="line">        ok: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">    &#125;).showModal();</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååŠ äº†ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ å‰çš„æ“ä½œï¼Œå¯ä»¥åœ¨æ–‡ä»¶ä¸Šä¼ å‰åšä¸€äº›å¤„ç†ï¼Œå¦‚è¿›åº¦æ¡çš„æ˜¾ç¤ºï¼Œå›¾ç‰‡é¢„è§ˆç­‰ç­‰</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(option.beforeSend <span class="keyword">instanceof</span> <span class="built_in">Function</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(option.beforeSend(input) === <span class="literal">false</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å°†æ–‡ä»¶appendåˆ°formDataå¯¹è±¡é‡Œï¼Œä½¿ç”¨å­—æ®µåâ€˜fileâ€™ï¼Œè¯¥å­—æ®µåæ˜¯æœåŠ¡ç«¯æ¥æ”¶æ–‡ä»¶æ—¶ä½¿ç”¨çš„å­—æ®µå</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fd.append(<span class="string">'file'</span>, input.files[<span class="number">0</span>]);</span><br></pre></td></tr></table></figure><p>ç„¶åå°±æ˜¯ä½¿ç”¨XMLHttpRequestå¯¹è±¡å‘æœåŠ¡ç«¯å‘é€æ•°æ®äº†</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">xhr.open(<span class="string">'post'</span>, option.url);</span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(xhr.status == <span class="number">200</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(xhr.readyState == <span class="number">4</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(option.callback <span class="keyword">instanceof</span> <span class="built_in">Function</span>)&#123;</span><br><span class="line">                option.callback(xhr.responseText);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!(dialog.get(<span class="string">'uploadfail'</span>)))&#123;</span><br><span class="line">            dialog(&#123;</span><br><span class="line">                id: <span class="string">'uploadfail'</span>,</span><br><span class="line">                title: <span class="string">'æç¤º'</span>,</span><br><span class="line">                content: <span class="string">'ä¸Šä¼ å¤±è´¥'</span>,</span><br><span class="line">                okValue: <span class="string">'ç¡®å®š'</span>,</span><br><span class="line">                ok: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">            &#125;).showModal();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">xhr.upload.onprogress = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> pre = <span class="built_in">Math</span>.floor(<span class="number">100</span> * event.loaded / event.total);</span><br><span class="line">    <span class="keyword">if</span>(option.uploading <span class="keyword">instanceof</span> <span class="built_in">Function</span>)&#123;</span><br><span class="line">        option.uploading(pre);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">xhr.send(fd);</span><br></pre></td></tr></table></figure><p>å†å‘æœåŠ¡ç«¯å‘é€æ•°æ®æ—¶ï¼Œä½¿ç”¨äº†ç›‘å¬äº†ä¸€ä¸‹progressäº‹ä»¶ï¼Œä¸»è¦æ˜¯ä¸ºäº†è¿›è¡Œä¸Šä¼ è¿›åº¦çš„æ˜¾ç¤ºï¼Œä¸Šè¿°ä»£ç ä¸­ï¼Œ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> pre = <span class="built_in">Math</span>.floor(<span class="number">100</span> * event.loaded / event.total);</span><br></pre></td></tr></table></figure><p>è·å–ä¸Šä¼ çš„ç™¾åˆ†æ¯”ï¼Œèƒ½å¤Ÿæ‹¿åˆ°è¿™ä¸ªå€¼ï¼Œé¡µé¢ä¸Šå°±å¯ä»¥å±•ç¤ºå„ç§å„æ ·çš„ä¸Šä¼ è¿›åº¦æ•ˆæœäº†ã€‚</p><p>ã€€ã€€å·®ä¸å¤šä»‹ç»å®Œäº†ï¼Œä¸‹é¢è¡¥å……ä¸€ä¸‹ä½¿ç”¨ä¸­é‡åˆ°çš„é—®é¢˜ï¼š</p><p>ã€€ã€€é—®é¢˜ä¸€ï¼šæ–‡ä»¶åœ¨ä¸Šä¼ çš„è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨JSON.parse()åºåˆ—åŒ–æœåŠ¡ç«¯è¿”å›çš„jsonå­—ç¬¦ä¸²æŠ¥é”™(å‚»å•Šï¼Œæ–‡ä»¶è¿˜åœ¨ä¸Šä¼ ï¼ŒæœåŠ¡ç«¯æ€ä¹ˆä¼šè¿”å›æ•°æ®å•Š)ã€‚</p><p>äº‹æƒ…æ˜¯è¿™æ ·çš„ï¼Œä¸€å¼€å§‹ï¼Œæˆ‘åœ¨readystatechangeé‡Œåªç›‘å¬äº†çŠ¶æ€ç æ˜¯å¦æ˜¯200ï¼Œå¦‚æœæ˜¯å°±è¯´æ˜é€šäº†ï¼Œç„¶åæ‰§è¡Œå›è°ƒï¼Œåœ¨å›è°ƒé‡Œå¤„ç†æœåŠ¡ç«¯è¿”å›çš„æ•°æ®ï¼Œä½†æ˜¯é€šäº†ä¸ä¸€å®šä»£è¡¨æœåŠ¡ç«¯å·²ç»è¿”å›äº†æ•°æ®ï¼Œæ‰€ä»¥å°±å‡ºç°äº†ä¸Šé¢çš„é”™è¯¯ï¼Œæ‰€ä»¥åæ¥åœ¨åˆ¤æ–­äº†statusæ˜¯å¦ä¸º200åï¼Œè¿˜åˆ¤æ–­äº†readyStateï¼Œä»¥ç¡®ä¿æœåŠ¡ç«¯å·²å¤„ç†å®Œæ¯•å¹¶è¿”å›æ•°æ®åœ¨æ‰§è¡Œå›è°ƒ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(xhr.status == <span class="number">200</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(option.callback <span class="keyword">instanceof</span> <span class="built_in">Function</span>)&#123;</span><br><span class="line">        option.callback(xhr.responseText);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é—®é¢˜äºŒï¼šé‡å¤åˆ›å»ºinputã€‚æ¯æ¬¡ç‚¹å‡»æŒ‰é’®ä¸Šä¼ æ–‡ä»¶åï¼Œé¡µé¢éƒ½ä¼šå¤šä¸€ä¸ªtype=fileçš„inputæ„Ÿè§‰ä¸æ˜¯å¾ˆå¥½ï¼ˆä¸ªäººç™–å¥½å§ï¼‰ï¼Œæ‰€ä»¥å¯¹æœ€å¼€å§‹çš„åˆå§‹åŒ–ä»£ç åšäº†ä¸‹ä¼˜åŒ–ï¼Œåˆ¤æ–­å½“å‰é¡µé¢æ˜¯å¦å­˜åœ¨åˆšæ‰åˆ›å»ºçš„inputï¼Œå­˜åœ¨å°±ç›´æ¥ä½¿ç”¨ï¼Œä¸å­˜åœ¨å°±åˆ›å»ºï¼Œå¦‚ä¸‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="built_in">document</span>.getElementById(<span class="string">'myUploadInput'</span>))&#123;</span><br><span class="line">    input = <span class="built_in">document</span>.getElementById(<span class="string">'myUploadInput'</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    input = <span class="built_in">document</span>.createElement(<span class="string">'input'</span>);</span><br><span class="line">    input.setAttribute(<span class="string">'id'</span>, <span class="string">'myUploadInput'</span>);</span><br><span class="line">    input.setAttribute(<span class="string">'type'</span>, <span class="string">'file'</span>);</span><br><span class="line">    input.setAttribute(<span class="string">'name'</span>, <span class="string">'file'</span>);</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(input);</span><br><span class="line">    input.style.display = <span class="string">'none'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¥½äº†ï¼Œå°±è¿™ä¹ˆå¤šäº†ã€‚çœ‹çœ‹æ•ˆæœ<br><img src="https://images2015.cnblogs.com/blog/695097/201601/695097-20160113154319132-891661887.png" alt=""><br><img src="https://images2015.cnblogs.com/blog/695097/201601/695097-20160113154331335-1308230912.png" alt=""><br><img src="https://images2015.cnblogs.com/blog/695097/201601/695097-20160113154343678-1782738937.png" alt=""></p><p>åˆšæ‰åŠ äº†ä¸ªéœ€æ±‚ï¼Œé™åˆ¶ä¸Šä¼ æ–‡ä»¶ç±»å‹ï¼Œä½œäº†å¦‚ä¸‹ä¿®æ”¹ï¼š</p><ul><li>myUploadæ–¹æ³•ï¼Œåˆå§‹åŒ–æ—¶å¢åŠ äº†æ”¯æŒæ–‡ä»¶ç±»å‹ï¼Œå¦‚ä¸‹</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fileType = [<span class="string">'doc'</span>,<span class="string">'docx'</span>,<span class="string">'xls'</span>,<span class="string">'xlsx'</span>,<span class="string">'pdf'</span>,<span class="string">'jpg'</span>,<span class="string">'png'</span>,<span class="string">'ppt'</span>,<span class="string">'pptx'</span>]</span><br></pre></td></tr></table></figure><ul><li>changeå‘ç”Ÿåï¼Œæ£€æŸ¥æ–‡ä»¶ç±»å‹ï¼Œå¦‚ä¸‹</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> type = input.value.split(<span class="string">'.'</span>).pop();</span><br><span class="line"><span class="keyword">if</span>(fileType.indexOf(type.toLocaleLowerCase()) == <span class="number">-1</span>)&#123;</span><br><span class="line">    dialog(&#123;</span><br><span class="line">        title: <span class="string">'æç¤º'</span>,</span><br><span class="line">        content: <span class="string">'æš‚ä¸æ”¯æŒè¯¥ç±»å‹çš„æ–‡ä»¶ï¼Œè¯·é‡æ–°é€‰æ‹©!'</span>,</span><br><span class="line">        okValue: <span class="string">'ç¡®å®š'</span>,</span><br><span class="line">        ok: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">    &#125;).showModal();</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å› ä¸ªäººçŸ¥è¯†é¢æœ‰é™ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œè¿˜è¯·æŒ‡æ­£ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;æœ¬æ–‡é¦–å‘åœ¨æˆ‘çš„åšå®¢å›­ï¼š&lt;a href=&quot;https://www.cnblogs.com/yuanlong1012/p/5127497.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.cnblogs.com/yuanlong1012/p/5127497.html&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æœ€è¿‘é¡¹ç›®é‡Œæœ‰ä¸ªéœ€æ±‚ï¼Œä¸Šä¼ æ–‡ä»¶ï¼ˆå¥½å§ï¼Œè¿™ç§éœ€æ±‚å¾ˆå¸¸è§ï¼Œè¿™ä¹Ÿä¸æ˜¯ç¬¬ä¸€æ¬¡é‡åˆ°äº†ï¼‰ã€‚å½“æ—¶ç¬¬ä¸€æƒ³æ³•å°±æ˜¯ç›´æ¥ç”¨formè¡¨å•æäº¤ï¼ˆåŸè°…æˆ‘ä»¥å‰å°±æ˜¯è¿™ä¹ˆå¹²çš„ï¼‰ï¼Œä¸è¿‡è¡¨å•é‡Œä¸ä»…æœ‰æ–‡ä»¶è¿˜æœ‰åˆ«çš„ä¿¡æ¯éœ€è¦äº¤äº’ï¼Œè·Ÿåç«¯å•†é‡åå†³å®šæ–‡ä»¶å•ç‹¬ä¸Šä¼ ï¼Œè·å–åˆ°æœåŠ¡å™¨ç«¯è¿”å›çš„æ–‡ä»¶åœ°å€åœ¨å’Œè¡¨å•ä¸€èµ·æäº¤ã€‚è¿™é‡Œå°±éœ€è¦å¼‚æ­¥ä¸Šä¼ æ–‡ä»¶ã€‚&lt;br&gt;ã€€ã€€åœ¨ç½‘ä¸Šæ‰’äº†æ‰’ç›¸å…³çš„å†…å®¹ï¼Œå‘ç°è¿˜çœŸä¸å°‘ï¼Œé˜®ä¸€å³°è€å¸ˆçš„è¿™ç¯‡æ–‡ç« &lt;a href=&quot;http://www.ruanyifeng.com/blog/2012/08/file_upload.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;æ–‡ä»¶ä¸Šä¼ çš„æ¸è¿›å¼å¢å¼º&lt;/a&gt;å°±ä»‹ç»çš„å¾ˆå…·ä½“ï¼Œä¸‹é¢å°±è°ˆè°ˆè‡ªå·±åœ¨å®æˆ˜ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜çš„æ„Ÿå—å§ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="js" scheme="https://yl.frontjs.cc/tags/js/"/>
    
      <category term="æ–‡ä»¶ä¸Šä¼ " scheme="https://yl.frontjs.cc/tags/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/"/>
    
  </entry>
  
  <entry>
    <title>chromeä½¿ç”¨æŠ€å·§ä¹‹snippets</title>
    <link href="https://yl.frontjs.cc/2016/03/06/2016-03-06-chrome-tip-snippets/"/>
    <id>https://yl.frontjs.cc/2016/03/06/2016-03-06-chrome-tip-snippets/</id>
    <published>2016-03-06T09:36:00.000Z</published>
    <updated>2021-01-12T12:13:35.753Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨å¹³æ—¶å¼€å‘ä¸­ï¼Œä½¿ç”¨çš„æœ€å¤šçš„å·¥å…·åº”è¯¥æ˜¯chromeäº†(å‰ç«¯è€Œè¨€)ï¼Œchromeæœ‰å¾ˆå¤šä½¿ç”¨æŠ€å·§ï¼Œä¸‹é¢æˆ‘ä»¬è¦èŠçš„æ­£æ˜¯<code>snippets</code>,ä¸ªäººè®¤ä¸ºæ¯”æ§åˆ¶å°çš„<code>console</code>å¥½ç”¨(ä¹Ÿåªæ˜¯åœ¨æŸäº›åœºæ™¯ä¸‹é¢)ã€‚</p><a id="more"></a><p>ä¾‹å¦‚å¹³æ—¶æµè§ˆåšå®¢å›­ç­‰ç½‘ç«™æ—¶ï¼Œçœ‹åˆ°æŸäº›å¤§ç¥å†™çš„ä¸€äº›å¾ˆé«˜å¤§ä¸Šçš„ä»£ç ï¼Œæƒ³äº²æ‰‹å®è·µä¸‹æ­£ç¡®æ€§ï¼Œæˆ–æ˜¯æƒ³è°ƒè¯•ä¸‹ï¼Œé‚£ä¹ˆä¸€èˆ¬äººéƒ½ä¼šæ‰“å¼€<code>sublime</code>ç­‰å¼€å‘å·¥å…·ï¼Œå»ºä¸€ä¸ªé¡µé¢æ–‡æ¡£ï¼Œåœ¨<code>script</code>æ ‡ç­¾é‡Œç²˜è´´æˆ–è€…æ•²å‡ºé‚£ä¸€å¨<code>js</code>(ä¹Ÿæœ‰å¯èƒ½åœ¨jsé‡ŒåŠ å‡ ä¸ª<code>console.log</code>)ï¼Œç„¶ååœ¨æµè§ˆå™¨æ‰“å¼€ï¼Œ<code>F12</code>ï¼Œçœ‹æ§åˆ¶å°ä¿¡æ¯ï¼Œå¦‚æœéœ€è¦è°ƒè¯•ä¹Ÿå¯èƒ½åœ¨<code>source</code>é‡Œæ‰¾åˆ°æ–‡ä»¶æ‰“ä¸Šæ–­ç‚¹ã€‚</p><p>å›é¡¾ä¸‹åˆšæ‰æè¿°çš„è¿‡ç¨‹ï¼Œä¸å…è§‰å¾—æœ‰ç‚¹éº»çƒ¦ã€‚ä¹Ÿæœ‰äººè¯´ç›´æ¥åœ¨æµè§ˆå™¨çš„æ§åˆ¶å°é‡Œè¿›è¡Œç ä»£ç ï¼Œ<code>enter</code>åå°±å¯ä»¥çœ‹åˆ°ç»“æœäº†ã€‚æ²¡é”™ï¼Œè¦çœ‹ç»“æœè¿™æˆ–è®¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œå¯æ˜¯ï¼Œå¦‚æœè¦å¯¹ä»£ç è¿›è¡Œè°ƒè¯•å‘¢?</p><p>è¿™é‡Œå°±è¦è¯·å‡ºæˆ‘ä»¬çš„<code>snippets</code>äº†ã€‚<code>snippets</code>åœ¨å“ªï¼Ÿè¯·çœ‹ä¸‹é¢æˆªå›¾</p><p><img src="/images/2016-03-06-1.jpg" alt="snippets-pic"></p><p>çœ‹äº†ä¸Šé¢çš„å›¾ç‰‡ï¼Œå„ä½çœ‹å®˜åº”è¯¥å·²ç»äº†äº†è§£äº†å¦‚ä½•ä½¿ç”¨<code>snippets</code>äº†ï¼Œåœ¨ç©ºç™½åŒºåŸŸå³é”®é€‰æ‹©<code>new</code>å¯ä»¥æ–°å»ºæ–‡ä»¶ï¼Œå³é”®åˆšæ‰æ–°å»ºçš„æ–‡ä»¶é€‰æ‹©<code>run</code>å¯ä»¥è¿è¡Œå†™çš„æµ‹è¯•ä»£ç ï¼Œæ–­ç‚¹çš„æ–¹æ³•è¿™é‡Œå°±ä¸å¤šä»‹ç»äº†ï¼Œç›¸ä¿¡ä½¿ç”¨<code>chrome</code>å¼€å‘çš„æœ‹å‹éƒ½åº”è¯¥å¾ˆç†Ÿäº†ã€‚</p><p>å…³äº<code>snippets</code>å°±ä»‹ç»è¿™ä¹ˆå¤šï¼Œ<code>chrome</code>é‡Œæ‰¾ä¸åˆ°<code>snippets</code>çš„åŒå­¦å¯ä»¥å»å‡çº§ä¸€ä¸‹æµè§ˆå™¨ã€‚</p><p>å…¶å®chromeçš„ä½¿ç”¨æŠ€å·§è¿˜æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚<code>workspace</code>ï¼Œè¿™é‡Œé¡ºå¸¦æä¸€ä¸‹ï¼Œä¹Ÿä¸å•ç‹¬å¼„ç¯‡æ–‡ç« è®¨è®ºäº†ã€‚è¯·çœ‹ä¸‹å›¾</p><p><img src="/images/2016-03-06-2.jpg" alt="workspace-pic"></p><p>æ²¡é”™ï¼Œæ‰¾åˆ°åœ°æ–¹åï¼Œå³é”®å°±å¯ä»¥çœ‹åˆ°è¿™ä¸ªworkspaceäº†ï¼Œè¿™ä¸ªæ˜¯å¹²å˜›çš„ï¼Ÿè¿™ä¸ªæ˜¯æŠŠä½ æœ¬åœ°çš„èµ„æºåŠ è½½åˆ°å½“å‰ç«™ç‚¹ï¼Œè¯´æ˜ç™½ç‚¹å°±æ˜¯â€œ<code>js</code>â€æ³¨å…¥(èƒ¡ä¹±å–çš„åå­—)ï¼Œå…·ä½“çš„å°±ä¸å±•å¼€äº†ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥å»å®è·µä¸‹ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨å¹³æ—¶å¼€å‘ä¸­ï¼Œä½¿ç”¨çš„æœ€å¤šçš„å·¥å…·åº”è¯¥æ˜¯chromeäº†(å‰ç«¯è€Œè¨€)ï¼Œchromeæœ‰å¾ˆå¤šä½¿ç”¨æŠ€å·§ï¼Œä¸‹é¢æˆ‘ä»¬è¦èŠçš„æ­£æ˜¯&lt;code&gt;snippets&lt;/code&gt;,ä¸ªäººè®¤ä¸ºæ¯”æ§åˆ¶å°çš„&lt;code&gt;console&lt;/code&gt;å¥½ç”¨(ä¹Ÿåªæ˜¯åœ¨æŸäº›åœºæ™¯ä¸‹é¢)ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="chrome" scheme="https://yl.frontjs.cc/tags/chrome/"/>
    
      <category term="snippets" scheme="https://yl.frontjs.cc/tags/snippets/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨jekyllæ­å»ºåšå®¢åŠjekyllæ¨¡æ¿easybookä½¿ç”¨æ–¹æ³•</title>
    <link href="https://yl.frontjs.cc/2016/03/05/2016-03-05-build-jekyll-blog/"/>
    <id>https://yl.frontjs.cc/2016/03/05/2016-03-05-build-jekyll-blog/</id>
    <published>2016-03-05T09:34:10.000Z</published>
    <updated>2021-01-12T12:13:35.753Z</updated>
    
    <content type="html"><![CDATA[<p>ç½‘ä¸Šå…³äºåœ¨githubä¸Šæ­å»ºé™æ€åšå®¢çš„æ–‡ç« å¾ˆå¤šï¼Œä¹Ÿå¾ˆè¯¦ç»†ï¼Œè¿™é‡Œåªæ˜¯ç®€å•è®°å½•ä¸‹æœ¬ç«™çš„æ­å»ºè¿‡ç¨‹ã€‚</p><a id="more"></a><ul><li>åœ¨<code>github</code>ä¸Šåˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼Œé¡¹ç›®åä¸º<code>username.github.io</code>ï¼Œ<code>username</code>å°±æ˜¯ä½ githubçš„åå­—ï¼Œç„¶åä¸€æ­¥æ­¥çš„æŒ‰æç¤ºæ“ä½œâ€¦</li><li>ä¸æƒ³è‡ªå·±æŠ˜è…¾çš„è¯å¯ä»¥é€‰æ‹©åšå®¢æ¨¡æ¿ï¼Œåˆšæ‰åœ¨<code>github</code>ä¸Šåˆ›å»ºé¡¹ç›®å¹¶<code>autoloadpage</code>åæ˜¯å¯ä»¥é€‰æ‹©æ¨¡æ¿çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ç½‘ä¸Šæ‰¾<code>jekyll</code>çš„ç›¸å…³æ¨¡æ¿ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©çš„æ˜¯<a href="https://github.com/laobubu/jekyll-theme-EasyBook" target="_blank" rel="noopener"><code>easybook</code></a></li><li>ä¸‹è½½<a href="https://github.com/laobubu/jekyll-theme-EasyBook" target="_blank" rel="noopener"><code>easybook</code></a>åï¼Œå°†å…¶æ–‡ä»¶æ‹·è´åˆ°ä½ æœ¬åœ°çš„<code>username.github.io</code>ä¸‹ï¼ˆå…ˆè¦<code>clone</code>ä½ åˆšæ‰åœ¨<code>github</code>ä¸Šå»ºçš„é¡¹ç›®ï¼‰</li><li>å®‰è£…<code>ruby</code>ã€<code>gem</code>ã€<code>jekyll</code>ï¼ˆè‡ªè¡Œç™¾åº¦ï¼‰,ç„¶åæœ¬åœ°å¯åŠ¨æŸ¥çœ‹æ•ˆæœï¼Œæµè§ˆå™¨æ‰“å¼€<a href="http://127.0.0.1:4000" target="_blank" rel="noopener">127.0.0.1:4000</a>å°±å¯ä»¥çœ‹åˆ°æ•ˆæœ</li></ul><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jekyll server</span><br></pre></td></tr></table></figure><h3 id="å¯¹easybookæ¨¡æ¿è¿›è¡Œä¿®æ”¹"><a href="#å¯¹easybookæ¨¡æ¿è¿›è¡Œä¿®æ”¹" class="headerlink" title="å¯¹easybookæ¨¡æ¿è¿›è¡Œä¿®æ”¹"></a>å¯¹easybookæ¨¡æ¿è¿›è¡Œä¿®æ”¹</h3><p>ä¸‹é¢æŒ‰ç…§è‡ªå·±çš„éœ€æ±‚ä¸ªæ€§åŒ–ä¸€ä¸‹è¿™ä¸ªæ¨¡æ¿ã€‚æ‰€è°“çš„ä¸ªæ€§åŒ–ï¼ŒæŒ‡çš„æ˜¯æ ¹æ®åˆšæ‰æ˜¾ç¤ºçš„æ•ˆæœæŸ¥çœ‹å¯¹åº”çš„æ–‡ä»¶ï¼Œäº†è§£é¡µé¢çš„æ˜¾ç¤ºæ–¹å¼æ‰€å¯¹åº”çš„ç¼–å†™æ–¹æ³•ï¼ˆåŸè°…æˆ‘æ²¡æœ‰æ·±å…¥çš„ç©¶å…¶åŸç†ï¼Œåªæ˜¯ç ”ç©¶äº†è¿™å¥—æ¨¡æ¿è€Œå·²ï¼‰ã€‚</p><p>å…ˆçœ‹<code>_config.yml</code>æ–‡ä»¶ï¼Œè¿™é‡Œé¢å®šä¹‰çš„ä¸œä¸œç®€å•ç†è§£å°±æ˜¯å®šä¹‰çš„å…¨å±€çš„å˜é‡ï¼Œç„¶åå…¶ä»–æ–‡ä»¶å¯ä»¥ä½¿ç”¨ï¼Œè¿™é‡Œæˆ‘ä¹Ÿä¸ä»‹ç»å¾ˆä»”ç»†äº†ï¼Œç®€å•çš„æä¸‹è‡ªå·±æ”¹çš„åœ°æ–¹ã€‚<br><code>title</code>:ç½‘ç«™æ ‡é¢˜<br><code>description</code>:æè¿°ï¼Œ<code>seo</code>ç”¨çš„ï¼Œç”Ÿæˆçš„é¡µé¢é‡Œçš„<code>meta</code>æ ‡ç­¾é‡Œå¯ä»¥çœ‹åˆ°<br><code>avatar</code>:å¤´åƒå¯¹åº”çš„å›¾ç‰‡åœ°å€ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å°†å›¾ç‰‡æ”¾åœ¨é¡¹ç›®é‡Œå¼•å…¥æˆ–è€…ç›´æ¥ä¿®æ”¹<code>sidebar.html</code>é‡Œçš„å¤´åƒåœ°å€<br>å…¶ä»–å¯¹åº”å‚æ•°çš„ä¿®æ”¹å¯ä»¥çœ‹ä¸‹é¢æˆ‘çš„<a href="https://github.com/YL2014/YL2014.github.io" target="_blank" rel="noopener"><code>github</code></a>ä¸Šè¯¥é¡¹ç›®çš„å…·ä½“ä¿®æ”¹</p><h3 id="å‘å¸ƒæ–‡ç« "><a href="#å‘å¸ƒæ–‡ç« " class="headerlink" title="å‘å¸ƒæ–‡ç« "></a>å‘å¸ƒæ–‡ç« </h3><p>ä¹‹å‰çœ‹ç½‘ä¸Šçš„ï¼Œä½¿ç”¨<code>markdown</code>è¯­æ³•ç¼–å†™å¥½åšå®¢åï¼Œè¿˜éœ€è¦æ‰§è¡Œ<code>jekyll</code>çš„ç›¸å…³å‘½ä»¤è¿›è¡Œç”Ÿäº§å¯¹åº”çš„æ–‡æ¡£ï¼Œä½†æ˜¯æˆ‘è¿™é‡Œæ²¡æœ‰è¿™ä¹ˆåšã€‚æ–‡ç« åœ¨æœ¬åœ°å†™å¥½åä½¿ç”¨<code>jekyll server</code>è¿›è¡Œæœ¬åœ°é¢„è§ˆï¼Œé¢„è§ˆæˆåŠŸåï¼Œç›´æ¥å°†æœ¬åœ°ä¿®æ”¹<code>push</code>åˆ°<code>github</code>ä¸Šå°±å¯ä»¥äº†ï¼Œç›´æ¥ä½¿ç”¨<code>master</code>åˆ†æ”¯ï¼Œæ–‡æ¡£çš„ç±»å‹æ˜¯<code>markdown</code>ä¸æ˜¯<code>md</code>ï¼Œå¦åˆ™ä¸Šä¼ åä¸æ˜¾ç¤º(<code>md</code>ç±»å‹çš„æ–‡æ¡£æœ¬åœ°æ˜¯å¯ä»¥é¢„è§ˆæ˜¾ç¤ºçš„ï¼Œå…·ä½“åŸå› è¿˜ä¸çŸ¥)ï¼Œè¿˜è¦æ³¨æ„æ–‡æ¡£çš„æ—¥æœŸæ ¼å¼ã€‚</p><h3 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h3><p>æ„Ÿè§‰ä½¿ç”¨<code>jekyll</code>æ¥å†™é™æ€åšå®¢è¿˜æ˜¯è›®æ–¹ä¾¿çš„ï¼Œè¿™ä¹Ÿç»™äº†æ‡’äººä¸€ä¸ªå†™åšå®¢çš„ç†ç”± - -</p><p>å½“ç„¶ï¼Œ<code>easybook</code>é‡Œæ–‡ç« çš„åˆ†é¡µä»¥åŠåˆ†ç±»éƒ½å·²ç»å®ç°äº†ï¼Œæ¯ç¯‡<code>md</code>æ–‡æ¡£æœ€ä¸Šè¾¹çš„<code>categories</code>å°±æ˜¯åˆ†ç±»æ ‡è¯†ï¼Œä¹Ÿå¯ä»¥ä¸€ç¯‡æ–‡ç« å¤„äºå¤šä¸ªåˆ†ç±»é‡Œã€‚å…³äºåšå®¢çš„è¯„è®ºåŠŸèƒ½æœ‰æ—¶é—´å†çœ‹çœ‹æ€ä¹ˆå¼•å…¥ã€‚<br>å¸Œæœ›è‡ªå·±èƒ½å°†è¿™ä¸ªä¹ æƒ¯åšæŒä¸‹å»</p><blockquote><p>é™„ä¸Šä¿®æ”¹åçš„é¡¹ç›®çš„<code>github</code>åœ°å€ï¼Œ<a href="https://github.com/YL2014/YL2014.github.io" target="_blank" rel="noopener">https://github.com/YL2014/YL2014.github.io</a>ï¼Œæ¬¢è¿<code>Star</code></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç½‘ä¸Šå…³äºåœ¨githubä¸Šæ­å»ºé™æ€åšå®¢çš„æ–‡ç« å¾ˆå¤šï¼Œä¹Ÿå¾ˆè¯¦ç»†ï¼Œè¿™é‡Œåªæ˜¯ç®€å•è®°å½•ä¸‹æœ¬ç«™çš„æ­å»ºè¿‡ç¨‹ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="jekyll" scheme="https://yl.frontjs.cc/tags/jekyll/"/>
    
      <category term="blog" scheme="https://yl.frontjs.cc/tags/blog/"/>
    
  </entry>
  
</feed>
