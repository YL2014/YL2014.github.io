[{"title":"pymysql.err.InternalError) (1366, \"Incorrect string valueè§£å†³æ–¹æ³•","date":"2020-04-19T10:14:02.000Z","path":"2020/04/19/2020-04-19-mysql-1366/","text":"ä»Šå¤©å°è¯•ç”¨äº†ä¸‹flaskï¼Œç»“æœè¿mysqlæŠ¥é”™ï¼ŒæŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼špymysql.err.InternalError) (1366, &quot;Incorrect string value:ï¼Œçœ‹èµ·æ¥åƒæ˜¯å­—ç¬¦é›†çš„é—®é¢˜ï¼Œä¹ŸGoogleäº†ä¸‹ ç¡®å®æ˜¯å­—ç¬¦é›†çš„é—®é¢˜ï¼Œæˆ‘è¿™é‡Œå®šä¹‰çš„å­—æ®µæ˜¯Stringï¼Œinsertä¸­æ–‡å°±ä¸OKã€‚Googleç»“è®ºæ˜¯MySQLé»˜è®¤çš„charset utf8 ä¸º utf8mb3ï¼Œéœ€è¦è°ƒæ•´ä¸ºutf8mb4ï¼Œå…·ä½“çš„å¤§å®¶çœ‹è¿™ä¸ªå›ç­”https://stackoverflow.com/questions/10957238/incorrect-string-value-when-trying-to-insert-utf-8-into-mysql-via-jdbcã€‚ æ€ä¹ˆä¿®æ”¹ï¼Ÿå°è¯•æ­¥éª¤å¦‚ä¸‹ 123456789101112131415161718192021222324252627282930313233343536373839404142$ mysql&gt; show variables like &apos;character%&apos;;+--------------------------+-----------------------------------------------------------+| Variable_name | Value |+--------------------------+-----------------------------------------------------------+| character_set_client | utf8 || character_set_connection | utf8 || character_set_database | latin1 || character_set_filesystem | binary || character_set_results | utf8 || character_set_server | utf8 || character_set_system | utf8 || character_sets_dir | /usr/local/mysql-5.7.25-macos10.14-x86_64/share/charsets/ |+--------------------------+-----------------------------------------------------------+8 rows in set (0.00 sec)$ alter database test charset utf8mb4;$ show variables like &apos;character%&apos;;+--------------------------+-----------------------------------------------------------+| Variable_name | Value |+--------------------------+-----------------------------------------------------------+| character_set_client | utf8 || character_set_connection | utf8 || character_set_database | utf8mb64 || character_set_filesystem | binary || character_set_results | utf8 || character_set_server | utf8 || character_set_system | utf8 || character_sets_dir | /usr/local/mysql-5.7.25-macos10.14-x86_64/share/charsets/ |+--------------------------+-----------------------------------------------------------+8 rows in set (0.00 sec) ç„¶åå°è¯•insertä¸­æ–‡ï¼Œè¿˜æ˜¯ä¸è¡Œï¼Œåæ¥åˆalertäº†tableï¼Œæœ€åalertè¡¨é‡Œå…·ä½“çš„columnï¼Œä½†æ˜¯è¿™ä¹ˆæä¸èƒ½ä¸€åŠ³æ°¸é€¸å•Šï¼Œæ€ä¹ˆåŠï¼Ÿè¿™é‡Œå›åˆ°æœ€å¼€å§‹ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹çš„æ˜¯mysqlçš„å­—ç¬¦é›†ï¼Œæ‰€ä»¥åº”è¯¥æ”¹mysqlçš„é…ç½®æ–‡ä»¶ã€‚ ç½‘ä¸Šæœç´¢äº†ä¸‹ï¼ŒMacä¸ŠMySQLçš„é…ç½®æ–‡ä»¶è·¯å¾„ä¸º/usr/local/mysql/support-files/my-default.cnfï¼Œå¯æ˜¯æˆ‘è¿™å¹¶æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œé‚æ–°å»ºäº†/etc/my.cnfï¼Œå†…å®¹å¦‚ä¸‹1234[client]default-character-set=utf8mb4[mysqld]character-set-server=utf8mb4 æ–°å»ºå‰éœ€è¦stopä¸‹MySQLï¼Œæ–°å»ºå®Œæˆåé‡å¯MySQLï¼Œç„¶åå°±okäº†å—ï¼ŸæŒ‰ç†åº”è¯¥æ˜¯çš„ï¼Œä¸è¿‡æˆ‘è¿™é‡Œå¹¶æ²¡æœ‰okå•Šï¼ï¼ï¼ æƒ³äº†ä¸€æƒ³ï¼Œåˆšæ‰æ–°å»ºçš„testæ•°æ®åº“åº”è¯¥éœ€è¦é‡å»ºï¼Œæˆ–è€…é‡å»ºå¯¹åº”çš„tableã€‚ç²—æš´äº†ä¸€ç‚¹ï¼Œdrop database test;ï¼Œç„¶åå†createï¼Œç„¶åç„¶åå°±okäº†ï¼Œå“ˆå“ˆå“ˆğŸ˜ 1234567$ mysql&gt; select * from role;+----+-----------------+-------+---------------------+| id | name | auths | addtime |+----+-----------------+-------+---------------------+| 1 | è¶…çº§ç®¡ç†å‘˜ | | 2020-04-18 10:07:48 |+----+-----------------+-------+---------------------+1 row in set (0.00 sec) è¿™é‡Œä»…åšè®°å½•ï¼Œé‡åˆ°ç›¸åŒé—®é¢˜çš„åŒå­¦å¯ä»¥å‚è€ƒä¸‹ã€‚ ç”Ÿäº§é¡¹ç›®æ²¡è¿™ä¹ˆéº»çƒ¦ï¼Œç›´æ¥äº‘æ•°æ®åº“å°±å¥½ğŸ˜‚","tags":[{"name":"mysql","slug":"mysql","permalink":"https://yl.frontjs.cc/tags/mysql/"},{"name":"python","slug":"python","permalink":"https://yl.frontjs.cc/tags/python/"}]},{"title":"NVM is not compatible with the npm config \"prefix\" option warning (OS X)","date":"2019-03-13T07:35:31.000Z","path":"2019/03/13/2019-03-13-nvm-warning/","text":"12nvm is not compatible with the npm config \"prefix\" option: currently set to \"/usr/local\"Run `npm config delete prefix` or `nvm use --delete-prefix v8.11.2 --silent` to unset it. æœ€è¿‘åœ¨vscodeçš„ç»ˆç«¯ç»å¸¸ä¼šçœ‹åˆ°è¿™ä¸ªè­¦å‘Šï¼Œnvm lsä¸€ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°ï¼ŒIDEé‡Œçš„ç»ˆç«¯é»˜è®¤ä½¿ç”¨çš„nodeæŒ‡å‘äº†systemã€‚ æˆ‘ä»¬çŸ¥é“ï¼Œä¸ºäº†å¼€å‘æ–¹ä¾¿ä»¥åŠç‰ˆæœ¬åˆ‡æ¢ï¼ŒnodejsåŸºæœ¬éƒ½æ˜¯ç”¨nvmæ¥å®‰è£…äº†ï¼Œä¸ä¼šç›´æ¥å»å®˜ç½‘ä¸‹è½½å®‰è£…æ–‡ä»¶è¿›è¡Œå®‰è£…ï¼Œé‚£ä¹ˆæŒ‡å‘systemçš„nodejsæ˜¯å“ªé‡Œæ¥çš„ï¼Ÿ OKï¼Œæˆ‘ä»¬çœ‹çœ‹brew listï¼Œå¯ä»¥çœ‹åˆ°nodeåœ¨brewçš„å®‰è£…åˆ—è¡¨é‡Œï¼Œä¸è¿‡æˆ‘ä»¬å¹¶æ²¡æœ‰é€šè¿‡brew install nodeæ¥å®‰è£…è¿‡nodejsã€‚ å°è¯•å¸è½½systemçš„nodejs, brew uninstall nodeï¼Œä¼šå¾—åˆ°å‘Šè­¦ï¼Œè¯¥nodeæ˜¯yarnçš„ä¾èµ–ï¼Œä¸èƒ½å¸è½½ï¼Œè¿™å°±å¯¹ä¸Šäº†ï¼Œçœ‹çœ‹æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜ã€‚ å¸è½½yarnå’Œnodeï¼Œç„¶åå†å®‰è£…yarnï¼ŒåŒæ—¶åŠ ä¸Šå»æ‰ä¾èµ–å®‰è£…å‚æ•° 1234$ brew uninstall yarn$ brew uninstall node$ brew cleanup --prune-prefix$ brew install yarn --ignore-dependencies æ¸…é™¤systemçš„nodeæ®‹ç•™æ–‡ä»¶ 12$ rm -rf /usr/local/lib/node_modules$ rm /usr/local/bin/npm é‡æ–°æ‰“å¼€ç»ˆç«¯ï¼ŒåŸºæœ¬ä¸Šå°±ä¸ä¼šæœ‰è¿™ä¸ªè­¦å‘Šå‡ºç°äº†ã€‚ å‚è€ƒï¼šhttps://github.com/creationix/nvm/issues/1245#issuecomment-387460769","tags":[{"name":"nodejs","slug":"nodejs","permalink":"https://yl.frontjs.cc/tags/nodejs/"}]},{"title":"openresty(åŠ¨æ€)æ·»åŠ nginxæ¨¡å—","date":"2018-12-12T07:35:31.000Z","path":"2018/12/12/2018-12-12-openrestry-nginx-http2-module/","text":"æ¢äº†æœåŠ¡å™¨åï¼Œé‡æ–°æ­å»ºäº†nginxç¯å¢ƒï¼Œè¿™æ¬¡ä½¿ç”¨çš„æ˜¯openrestryã€‚åœ¨é…ç½®httpsï¼Œå¼€å¯http2çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°ç¼ºå°‘ngx_http_v2_moduleè¿™ä¸ªnginxæ¨¡å—ã€‚é‚£ä¹ˆå¦‚æœæ·»åŠ è¿™ä¸ªæ¨¡å—å‘¢ï¼Ÿ åœ¨ç½‘ä¸ŠæŸ¥äº†ä¸€ç•ªï¼Œå¤§æ¦‚éƒ½æ˜¯é‡æ–°ç¼–è¯‘ã€‚é¡ºç€è¿™ä¸ªæ€è·¯æ¥å®è·µä¸‹ã€‚ é¦–å…ˆæŸ¥çœ‹ä¸‹æˆ‘ä»¬å·²ç»å®‰è£…çš„æ¨¡å—123456$ -Vnginx version: openresty/1.13.6.1built by gcc 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.9)built with OpenSSL 1.0.2g 1 Mar 2016TLS SNI support enabledconfigure arguments: --prefix=/usr/local/openresty/nginx --with-cc-opt=-O2 --add-module=../ngx_devel_kit-0.3.0 --add-module=../echo-nginx-module-0.61 --add-module=../xss-nginx-module-0.05 --add-module=../ngx_coolkit-0.2rc3 --add-module=../set-misc-nginx-module-0.31 --add-module=../form-input-nginx-module-0.12 --add-module=../encrypted-session-nginx-module-0.07 --add-module=../srcache-nginx-module-0.31 --add-module=../ngx_lua-0.10.11 --add-module=../ngx_lua_upstream-0.07 --add-module=../headers-more-nginx-module-0.33 --add-module=../array-var-nginx-module-0.05 --add-module=../memc-nginx-module-0.18 --add-module=../redis2-nginx-module-0.14 --add-module=../redis-nginx-module-0.3.7 --add-module=../rds-json-nginx-module-0.15 --add-module=../rds-csv-nginx-module-0.08 --add-module=../ngx_stream_lua-0.0.3 --with-ld-opt=-Wl,-rpath,/usr/local/openresty/luajit/lib --with-stream --with-stream_ssl_module --with-http_ssl_module ç¡®å®æ²¡æœ‰http2ç›¸å…³æ¨¡å— ä¹‹å‰å®‰è£…openrestryå°±æ˜¯ä¸‹è½½æºç ç¼–è¯‘å®‰è£…çš„ï¼Œåˆ‡æ¢åˆ°openrestryæºç ç›®å½•ï¼Œé‡æ–°ç¼–è¯‘ï¼Œå¸¦ä¸Šæ¨¡å—å‚æ•°1$ ./configure --with-ngx_http_v2_module -j2 ç»“æœä¼šæŠ¥é”™ï¼Œopenrestryæ²¡æœ‰ngx_http_v2_moduleè¿™ä¸ªæ¨¡å—ï¼Œæ ¹æ®æç¤ºï¼Œæ‰§è¡Œ./configure --helpï¼Œå¯ä»¥æŸ¥çœ‹åˆ°æ”¯æŒå“ªäº›æ¨¡å—ã€‚åœ¨ç°å®çš„åˆ—è¡¨ä¸­å‘ç°ï¼Œopenrestryçš„http2æ¨¡å—æ˜¯http_v2_moduleï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œé‡æ–°ç¼–è¯‘1./configure --with-http_v2_module -j2 ç„¶åæ‰§è¡Œmakeæ“ä½œ1$ make å®Œæˆåä¼šæœ‰å¦‚ä¸‹æç¤ºï¼ˆç‰ˆæœ¬å·æ˜¾ç¤ºä¸ºè‡ªå·±å®‰è£…çš„å¯¹åº”ç‰ˆæœ¬å·ï¼‰123...make[2]: Leaving directory &apos;soft/openresty-1.13.6.1/build/nginx-1.13.6&apos;make[1]: Leaving directory &apos;soft/openresty-1.13.6.1/build/nginx-1.13.6&apos; é‡æ–°ç¼–è¯‘åçš„nginxçš„äºŒè¿›åˆ¶æ–‡ä»¶å°±åœ¨ä¸Šé¢æç¤ºçš„ç›®å½•ä¸‹é¢çš„objsä¸‹é¢ï¼ŒæŸ¥çœ‹ä¸‹ç³»ç»Ÿç¯å¢ƒçš„nginxåœ¨å“ª12$ which nginx/usr/local/openresty/nginx/sbin/nginx æ‹·è´ç¼–è¯‘åçš„nginxäºŒè¿›åˆ¶æ–‡ä»¶è¦†ç›–ç³»ç»Ÿç¯å¢ƒçš„nginxï¼Œå¹¶é‡å¯nginxæœåŠ¡12$ nginx -s stop$ cp soft/openresty-1.13.6.1/build/nginx-1.13.6/objs/nginx /usr/local/openresty/nginx/sbin/ å†çœ‹çœ‹nginxé…ç½®12345678910111213141516171819202122232425server &#123; listen 80; #listen[::]:80; #SSL configuration listen 443 ssl http2; #listen [::]443 ssl http2; ##ssl on; ssl_certificate /etc/letsencrypt/live/frontjs.cc/fullchain.pem; ssl_certificate_key /etc/letsencrypt/live/frontjs.cc/privkey.pem; root /www/html; index index.html index.htm index; server_name frontjs.cc; #force https #rewrite ^(.*)$ https://$host$1 permanent; location / &#123; try_files $uri $uri/ =404; #proxy_pass http://127.0.0.1:8000; &#125;&#125; ç°åœ¨æ‰§è¡Œnginx -tå°±ä¸ä¼šæŠ¥ç¼ºå°‘æ¨¡å—çš„é”™è¯¯äº† å¯åŠ¨nginxæœåŠ¡1$ nginx Done~ å‚è€ƒhttps://openresty.org/en/installation.html","tags":[{"name":"nginx","slug":"nginx","permalink":"https://yl.frontjs.cc/tags/nginx/"}]},{"title":"è¿·å®«é—®é¢˜ - å¹¿åº¦ä¼˜å…ˆæœç´¢(BFS)","date":"2018-11-17T07:35:31.000Z","path":"2018/11/17/2018-11-17-bfs/","text":"è®°å½•è¿·å®«é—®é¢˜è§£æ³•JavaScriptå®ç° é—®é¢˜æè¿°ç»™å®šä¸€ä¸ªè¿·å®«ï¼ŒæŒ‡æ˜èµ·ç‚¹å’Œç»ˆç‚¹ï¼Œæ‰¾å‡ºä»èµ·ç‚¹å‡ºå‘åˆ°ç»ˆç‚¹çš„æœ‰æ•ˆå¯è¡Œè·¯å¾„ï¼Œå°±æ˜¯è¿·å®«é—®é¢˜ï¼ˆmaze problemï¼‰ è¿·å®«å¯ä»¥ä»¥äºŒç»´æ•°ç»„æ¥å­˜å‚¨è¡¨ç¤ºã€‚0è¡¨ç¤ºé€šè·¯ï¼Œ1è¡¨ç¤ºéšœç¢ã€‚æ³¨æ„è¿™é‡Œè§„å®šç§»åŠ¨å¯ä»¥ä»ä¸Šã€ä¸‹ã€å·¦ã€å³å››æ–¹æ–¹å‘ç§»åŠ¨ã€‚åæ ‡ä»¥è¡Œå’Œåˆ—è¡¨ç¤ºï¼Œå‡ä»0å¼€å§‹ï¼Œç»™å®šèµ·ç‚¹ï¼ˆ0,0ï¼‰å’Œç»ˆç‚¹ï¼ˆ4,4ï¼‰ï¼Œè¿·å®«è¡¨ç¤ºå¦‚ä¸‹ 1234567const maze = [ [0, 1, 0, 0, 0], [0, 1, 0, 1, 0], [0, 0, 0, 0, 0], [0, 1, 1, 1, 0], [0, 0, 0, 1, 0],] å¹¿åº¦ä¼˜å…ˆæœç´¢è§£æ³•123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104const MAX_ROW = 5const MAX_COL = 5let head = 0 // å¤´æŒ‡é’ˆlet tail = 0 // å°¾æŒ‡é’ˆconst queue = [] // visité˜Ÿåˆ—// èµ°è¿‡ç‚¹çš„æ„é€ å‡½æ•°function Point (row, col, predecessor) &#123; this.row = row this.col = col this.predecessor = predecessor&#125;// è¿›é˜Ÿï¼Œç§»åŠ¨å°¾æŒ‡é’ˆï¼Œæ·»åŠ ç‚¹å®ä¾‹function enQueue (point) &#123; queue[tail++] = point&#125;// å‡ºé˜Ÿï¼Œç§»åŠ¨å¤´æŒ‡é’ˆfunction deQueue () &#123; return queue[head++]&#125;// é˜Ÿåˆ—åˆ¤ç©ºï¼šå¤´å°¾æŒ‡é’ˆç›¸ç­‰function isEmpty () &#123; return head === tail&#125;// è¿·å®«åœ°å›¾const maze = [ [0, 1, 0, 0, 0], [0, 1, 0, 1, 0], [0, 0, 0, 0, 0], [0, 1, 1, 1, 0], [0, 0, 0, 1, 0],]// æ‰“å°åœ°å›¾function printMaze () &#123; for (let i = 0; i &lt; MAX_ROW; i++) &#123; const printRow = [] for (let j = 0; j &lt; MAX_COL; j++) &#123; printRow.push(maze[i][j]) &#125; console.log(printRow) &#125; console.log('/************************/')&#125;// èµ°ä¸€ä¸ªç‚¹function visit (row, col) &#123; // predecessorè®¾ç½®ä¸º head - 1ï¼Œè®°å½•åˆ°è¾¾å½“å‰çš„å¤´æŒ‡é’ˆï¼Œç”¨äºè·¯å¾„å›æº¯ const point = new Point(row, col, head - 1) maze[row][col] = 6 enQueue(point)&#125;// 4ä¸ªæ–¹å‘const dirs = [ [1, 0], [0, 1], [-1, 0], [0, -1]]// å…¥å£å‡½æ•°function main () &#123; let p = new Point(0, 0, -1) maze[p.row][p.col] = 6 enQueue(p) while (!isEmpty()) &#123; p = deQueue() if (p.row === MAX_ROW - 1 &amp;&amp; p.col === MAX_COL - 1) &#123; break &#125; for (let i = 0; i &lt; dirs.length; i++) &#123; const nexRow = p.row + dirs[i][0] const nexCol = p.col + dirs[i][1] if ( nexRow &gt;= 0 &amp;&amp; nexCol &gt;= 0 &amp;&amp; nexRow &lt; MAX_ROW &amp;&amp; nexCol &lt; MAX_COL &amp;&amp; maze[nexRow][nexCol] == 0 ) &#123; visit(nexRow, nexCol) &#125; &#125; printMaze() &#125; if (p.row === MAX_ROW - 1 &amp;&amp; p.col === MAX_COL - 1) &#123; console.log(p.row, p.col) while (p.predecessor !== -1) &#123; p = queue[p.predecessor] console.log(p.row, p.col) &#125; &#125; else &#123; console.log('No path!') &#125;&#125;main() è¾“å‡ºç»“æœå¦‚ä¸‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105[ 6, 1, 0, 0, 0 ][ 6, 1, 0, 1, 0 ][ 0, 0, 0, 0, 0 ][ 0, 1, 1, 1, 0 ][ 0, 0, 0, 1, 0 ]/************************/[ 6, 1, 0, 0, 0 ][ 6, 1, 0, 1, 0 ][ 6, 0, 0, 0, 0 ][ 0, 1, 1, 1, 0 ][ 0, 0, 0, 1, 0 ]/************************/[ 6, 1, 0, 0, 0 ][ 6, 1, 0, 1, 0 ][ 6, 6, 0, 0, 0 ][ 6, 1, 1, 1, 0 ][ 0, 0, 0, 1, 0 ]/************************/[ 6, 1, 0, 0, 0 ][ 6, 1, 0, 1, 0 ][ 6, 6, 0, 0, 0 ][ 6, 1, 1, 1, 0 ][ 6, 0, 0, 1, 0 ]/************************/[ 6, 1, 0, 0, 0 ][ 6, 1, 0, 1, 0 ][ 6, 6, 6, 0, 0 ][ 6, 1, 1, 1, 0 ][ 6, 0, 0, 1, 0 ]/************************/[ 6, 1, 0, 0, 0 ][ 6, 1, 0, 1, 0 ][ 6, 6, 6, 0, 0 ][ 6, 1, 1, 1, 0 ][ 6, 6, 0, 1, 0 ]/************************/[ 6, 1, 0, 0, 0 ][ 6, 1, 6, 1, 0 ][ 6, 6, 6, 6, 0 ][ 6, 1, 1, 1, 0 ][ 6, 6, 0, 1, 0 ]/************************/[ 6, 1, 0, 0, 0 ][ 6, 1, 6, 1, 0 ][ 6, 6, 6, 6, 0 ][ 6, 1, 1, 1, 0 ][ 6, 6, 6, 1, 0 ]/************************/[ 6, 1, 0, 0, 0 ][ 6, 1, 6, 1, 0 ][ 6, 6, 6, 6, 6 ][ 6, 1, 1, 1, 0 ][ 6, 6, 6, 1, 0 ]/************************/[ 6, 1, 6, 0, 0 ][ 6, 1, 6, 1, 0 ][ 6, 6, 6, 6, 6 ][ 6, 1, 1, 1, 0 ][ 6, 6, 6, 1, 0 ]/************************/[ 6, 1, 6, 0, 0 ][ 6, 1, 6, 1, 0 ][ 6, 6, 6, 6, 6 ][ 6, 1, 1, 1, 0 ][ 6, 6, 6, 1, 0 ]/************************/[ 6, 1, 6, 0, 0 ][ 6, 1, 6, 1, 6 ][ 6, 6, 6, 6, 6 ][ 6, 1, 1, 1, 6 ][ 6, 6, 6, 1, 0 ]/************************/[ 6, 1, 6, 6, 0 ][ 6, 1, 6, 1, 6 ][ 6, 6, 6, 6, 6 ][ 6, 1, 1, 1, 6 ][ 6, 6, 6, 1, 0 ]/************************/[ 6, 1, 6, 6, 0 ][ 6, 1, 6, 1, 6 ][ 6, 6, 6, 6, 6 ][ 6, 1, 1, 1, 6 ][ 6, 6, 6, 1, 6 ]/************************/[ 6, 1, 6, 6, 6 ][ 6, 1, 6, 1, 6 ][ 6, 6, 6, 6, 6 ][ 6, 1, 1, 1, 6 ][ 6, 6, 6, 1, 6 ]/************************/[ 6, 1, 6, 6, 6 ][ 6, 1, 6, 1, 6 ][ 6, 6, 6, 6, 6 ][ 6, 1, 1, 1, 6 ][ 6, 6, 6, 1, 6 ]/************************/4 43 42 42 32 22 12 01 00 0","tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://yl.frontjs.cc/tags/ç®—æ³•/"}]},{"title":"å†…ç½‘æœåŠ¡ç©¿é€ - ngrokæ­å»º","date":"2018-11-12T07:35:31.000Z","path":"2018/11/12/2018-11-12-ngrok/","text":"å¾®ä¿¡å¼€å‘æ—¶ï¼Œæœ¬åœ°æœåŠ¡è°ƒè¯•åŸŸåçš„é—®é¢˜ï¼Œé‚æ­å»ºngrokï¼Œå†…ç½‘ç©¿é€ã€‚å¾ˆä¹…ä»¥å‰æ­å»ºçš„ï¼Œç°æ•´ç†åˆ°åšå®¢é‡Œï¼Œæ–¹ä¾¿ä»¥åæŸ¥é˜… 1234# ubuntu 16å‚è€ƒï¼šhttps://imququ.com/post/self-hosted-ngrokd.htmlhttp://linfuyan.com/ubuntu-ngrok/ ecsåŸŸåè§£æ12Aè®°å½• ngrok.frontjs.ccCNAME *.ngrok.frontjs.cc -&gt; ngrok.frontjs.cc å®‰è£…ä¾èµ– sudo apt-get install build-essential golang mercurial1234567891011# å¤‡æ³¨ï¼šé˜¿é‡Œäº‘ä¸Šé»˜è®¤è£…çš„golangæ˜¯1.6ï¼Œç¼–è¯‘å‡ºçš„æ–‡ä»¶åœ¨macä¸ŠæŠ¥é”™ï¼Œå¯é‡‡ç”¨æºç ç¼–è¯‘å®‰è£…golanggolangç‰ˆæœ¬åœ°å€ï¼š`https://golang.org/dl/`wget -c https://dl.google.com/go/go1.10.linux-amd64.tar.gztar -C /usr/local -zxvf go1.10.linux-amd64.tar.gz# é…ç½®ç¯å¢ƒå˜é‡echo &apos;export GOROOT=/usr/local/go&apos; &gt;&gt; /etc/profileecho &apos;export PATH=$PATH:$GOROOT/bin&apos; &gt;&gt; /etc/profileecho &apos;export GOPATH=$HOME/go&apos; &gt;&gt; /etc/profileecho &apos;export GOROOT_BOOTSTRAP=/usr/local/go&apos; &gt;&gt; /etc/profilesource /etc/profile ä¸‹è½½æºç 12git clone https://github.com/inconshreveable/ngrok.git ngrokcd ngrok ç”Ÿæˆå¹¶æ›¿æ¢æºç é‡Œé»˜è®¤çš„è¯ä¹¦1234567891011NGROK_DOMAIN=&quot;ngrok.frontjs.cc&quot;openssl genrsa -out base.key 2048openssl req -new -x509 -nodes -key base.key -days 10000 -subj &quot;/CN=$NGROK_DOMAIN&quot; -out base.pemopenssl genrsa -out server.key 2048openssl req -new -key server.key -subj &quot;/CN=$NGROK_DOMAIN&quot; -out server.csropenssl x509 -req -in server.csr -CA base.pem -CAkey base.key -CAcreateserial -days 10000 -out server.crtcp base.pem assets/client/tls/ngrokroot.crtcp server.crt assets/server/tls/snakeoil.crtcp server.key assets/server/tls/snakeoil.key ç¼–è¯‘åŒ…1234GOOS=linux GOARCH=amd64 make release-server release-clientGOOS=darwin GOARCH=amd64 make release-clientGOOS=windows GOARCH=amd64 make release-client# ç¼–è¯‘åçš„æ–‡ä»¶åœ¨ bin/ï¼Œngroked ä¸ºæœåŠ¡å™¨ä½¿ç”¨ï¼Œå…¶ä»–æ‹·è´åˆ°å¯¹åº”å®¢æˆ·ç«¯ä½¿ç”¨ å¯åŠ¨æœåŠ¡1234./bin/ngrokd -tlsKey=server.key -tlsCrt=server.crt -domain=&quot;ngrok.frontjs.cc&quot; -httpAddr=&quot;:7098&quot; -httpsAddr=&quot;:7099&quot;# åå°è¿è¡Œnohup ./bin/ngrokd -tlsKey=server.key -tlsCrt=server.crt -domain=&quot;ngrok.frontjs.cc&quot; -httpAddr=&quot;:7098&quot; -httpsAddr=&quot;:7099&quot; &amp; é…ç½®å¹¶å¯åŠ¨å®¢æˆ·ç«¯1234567891011121314151617# vim ngrok.cfgserver_addr: ngrok.frontjs.cc:4443trust_host_root_certs: false# æŒ‡å®šå­åŸŸå./ngrok -subdomain test -proto=http -config=ngrok.cfg 7001# éšæœºå­åŸŸå./ngrok -proto=http -config=ngrok.cfg 7001# æ‰“å°å¦‚ä¸‹ä¿¡æ¯Tunnel Status onlineVersion 1.7/1.7Forwarding http://test.ngrok.frontjs.cc:7098 -Web Interface 127.0.0.1:4040# Conn 0Avg Conn Time 0.00ms nginx è½¬å‘é…ç½®åˆ°è¿™é‡Œæ²¡é‡åˆ°é—®é¢˜ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡http://test.ngrok.frontjs.cc:7098æ¥è®¿é—®æœ¬åœ°7001ç«¯å£çš„æœåŠ¡äº†ï¼Œä¸‹é¢é…ç½®nginxæ¥å¿½ç•¥ç«¯å£å·è®¿é—®, æ·»åŠ 7098çš„vhost12345678910111213141516server &#123; listen 80; listen [::]:80; server_name *.ngrok.frontjs.cc; proxy_set_header &quot;Host&quot; $host:7098; root /mnt/portal-cms; index index.html index.htm; location / &#123; proxy_pass_header Server; proxy_pass http://127.0.0.1:7098; proxy_redirect off; &#125;&#125; é‡å¯nginxï¼ˆservice nginx restartï¼‰http://test.ngrok.frontjs.ccè®¿é—®æœ¬åœ°7001ç«¯å£æœåŠ¡ æŠ¥é”™åŠè§£å†³æ–¹æ³•121. 26958 segmentation faultå‡çº§golangåˆ°æœ€æ–°ç‰ˆ(å‚è€ƒæœ€ä¸Šé¢ç¬¬äºŒä¸ªé“¾æ¥ï¼Œä¸‹è½½æºç å®‰è£…golang)","tags":[{"name":"ngrok","slug":"ngrok","permalink":"https://yl.frontjs.cc/tags/ngrok/"}]},{"title":"mongooseåˆ†ç»„æŸ¥è¯¢è®°å½•","date":"2018-11-01T07:35:31.000Z","path":"2018/11/01/2018-11-01-mongoose-aggregate-gruop/","text":"mongooseèšåˆåˆ†ç»„(aggregate, group)çš„ç®€å•ä½¿ç”¨è®°å½•ï¼Œç›´æ¥ä¸Šä»£ç  æ•°æ®æ¨¡å‹12345678910111213# model/report.jsmodule.exports = (&#123; Schema, db &#125;, app) =&gt; &#123; const Report = new Schema(&#123; platform: String, cname: String, url: String, floor: String &#125;, &#123; timestamps: true &#125;) return db.model('Report', Report, 'Report')&#125; ä»¥æŸä¸ªå­—æ®µåˆ†ç»„ aggregate groupä½¿ç”¨ï¼šå¦‚æœéœ€è¦åˆ†ç»„çš„å­—æ®µä¸ºcnameï¼Œé‚£ä¹ˆ_idå¯¹åº”çš„å€¼å°±ä¸º$cname 1234567const dataByDate = await this.model('report').aggregate([ &#123; $match: queryCondition &#125;, &#123; $group: &#123; _id: '$cname', count: &#123; $sum: 1 &#125; &#125; &#125;]) è¾“å‡ºç»“æœ 1234567891011121314[ &#123; \"_id\": \"title2\", \"count\": 22 &#125;, &#123; \"_id\": \"title3\", \"count\": 8 &#125;, &#123; \"_id\": \"title4\", \"count\": 10 &#125;] å¤šä¸ªç»´åº¦ä¸Šé¢æ˜¯é€šè¿‡å­—æ®µcnameæ¥åˆ†ç»„ï¼Œå¦‚æœæˆ‘ä»¬åŒæ—¶æƒ³ç»Ÿè®¡æ¯å¤©çš„æ¯ä¸ªcnameçš„æ•°é‡å‘¢ï¼Ÿå¦‚ä¸‹ï¼Œ_idé‡ŒæŒ‡å®šä¸¤ä¸ªåˆ†ç»„æ¡ä»¶ï¼Œç„¶åä½¿ç”¨$projectç»™åˆ†ç»„åæ•°æ®å­—æ®µé‡å‘½åï¼Œç„¶åç»§ç»­åˆ†ç»„ 12345678910111213141516171819202122232425const data = await this.model('report').aggregate([ &#123; $match: queryCondition &#125;, &#123; $group: &#123; _id: &#123; [dimension]: '$' + dimension, date: &#123; $dateToString: &#123; format: '%Y-%m-%d', date: '$createdAt' &#125; &#125; &#125;, count: &#123; $sum: 1 &#125; &#125; &#125;, &#123; $project: &#123; _id: 0, date: '$_id.date', [dimension]: &#123; [dimension]: `$_id.$&#123;dimension&#125;`, count: '$count' &#125; &#125; &#125;, &#123; $group: &#123; _id: '$date', [dimension]: &#123; $push: `$$&#123;dimension&#125;` &#125; &#125; &#125;]) è¾“å‡º 12345678910111213141516171819202122232425262728[ &#123; \"_id\": \"2018-10-30\", \"cname\": [ &#123; \"cname\": \"title4\", \"count\": 2 &#125; ] &#125;, &#123; \"_id\": \"2018-10-31\", \"cname\": [ &#123; \"cname\": \"title4\", \"count\": 8 &#125;, &#123; \"cname\": \"title3\", \"count\": 8 &#125;, &#123; \"cname\": \"title2\", \"count\": 22 &#125; ] &#125;] æ›´å¤šç”¨æ³•ï¼Œå‚è€ƒå®˜æ–¹æ–‡æ¡£ å‚è€ƒ https://docs.mongodb.com/manual/aggregation/ https://mongoosejs.com/docs/api.html#Aggregate","tags":[{"name":"mongoose","slug":"mongoose","permalink":"https://yl.frontjs.cc/tags/mongoose/"}]},{"title":"ç§‘å­¦ä¸Šç½‘ï¼švultræ­å»ºshadowsocksé‡‡å‘è®°å½•","date":"2018-10-30T07:35:31.000Z","path":"2018/10/30/2018-10-30-vultr-ss/","text":"è¯´æ˜ï¼šç½‘ä¸Šå¾ˆå¤šç›¸å…³æ•™ç¨‹ï¼Œå¤§å¤šæ•°æ˜¯åŸºäºcentosçš„ï¼Œæœ¬æ•™ç¨‹åŸºäºUbuntu(ä¸»è¦æ˜¯å¤šè´¦å·è®¾ç½®) æ³¨å†Œvutrlè´¦å·ï¼Œè´­ä¹°æœåŠ¡å™¨ æ³¨å†Œvutrl https://www.vultr.com æ–°ç”¨æˆ·æ³¨å†Œä½¿ç”¨PayPalï¼Œå……å€¼å¤šå°‘é€å¤šå°‘ï¼Œæœ€å¤šé€100åˆ€(æœæ–­å……å€¼äº†100åˆ€ï¼Œåé¢å‘ç°èµ é€çš„100åˆ€æœ‰æ•ˆæœŸæ˜¯1å¹´) è´­ä¹°æœåŠ¡å™¨ï¼Œé€‰æ‹©æœ€æ–°çš„Ubuntuï¼ŒèŠ‚ç‚¹é€‰æ—¥æœ¬ä¸œäº¬ é…ç½®é€‰æœ€å°çš„ï¼Œä¸è¿‡$2.5æ¯æœˆçš„åªæ”¯æŒIPV6ï¼Œä¸å»ºè®®é€‰æ‹©ï¼Œæˆ‘è¿™é‡Œé€‰çš„æ¯æœˆ5åˆ€çš„ï¼Œé€‰æ‹©å®Œåç‚¹å‡»deploy nowï¼Œç„¶åç­‰å¾…æœåŠ¡å™¨é…ç½®å¹¶å¯åŠ¨ å¯åŠ¨å®Œæˆåï¼Œåœ¨Serversé‡Œå°±å¯ä»¥çœ‹åˆ°åˆšæ‰è´­ä¹°çš„vpsäº† ç‚¹å‡»æœåŠ¡å™¨ï¼ŒæŸ¥çœ‹æœåŠ¡å™¨çš„ipï¼Œç”¨æˆ·åï¼Œä»¥åŠå¯†ç  å®‰è£…shadowsocks sshç™»å½•æœåŠ¡å™¨ï¼Œè´¦å·å¯†ç æ¥æºäºä¸Šå›¾ å®‰è£…shadowsocksï¼Œç½‘ä¸Šæ•™ç¨‹å¾ˆå¤šï¼Œè¿™é‡Œç›´æ¥copyè¿‡æ¥å®‰è£…è„šæœ¬ 123$ wget --no-check-certificate https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks.sh$ chmod +x shadowsocks.sh$ ./shadowsocks.sh 2&gt;&amp;1 | tee shadowsocks.log å¦‚ä¸Šä¸‰æ­¥æ‰§è¡Œå®Œæˆåï¼Œä¸­é€”ä¼šè®©ä½ è®¾ç½®ä¸€ä¸ªå¯†ç ï¼Œé€‰æ‹©ä¸€ä¸ªç«¯å£ï¼Œè¿˜æœ‰é€‰æ‹©ä¸€ä¸ªåè®®(å¿˜äº†æˆªå›¾äº†â€¦)ï¼Œåè®®æˆ‘é€‰çš„ç¬¬7ä¸ªaes-256-cfbï¼Œç­‰å¾…ä¸€ä¼šåï¼Œshadowsockså°±å®‰è£…å¥½äº†ï¼Œæ§åˆ¶å°å¯ä»¥çœ‹åˆ°shadowsocksæœåŠ¡çš„ç›¸å…³ä¿¡æ¯ï¼Œå¤§è‡´å¦‚ä¸‹ï¼Œè‡³æ­¤ï¼ŒssæœåŠ¡å°±å·²ç»å¯ç”¨äº† 1234Your Server IP : IPYour Server Port : PortYour Password : PasswordYour Encryption Method: aes-256-cfb å®‰è£…shadowsockså®¢æˆ·ç«¯ ShadowsocksX-NG Macç‰ˆ windowsç‰ˆ æ·»åŠ shadowsocksæœåŠ¡å™¨ä¿¡æ¯ å¤§åŠŸå‘Šæˆï¼Œå¯ä»¥å°è¯•è®¿é—®https://www.google.comï¼Œç„¶åå¯ä»¥æ„‰å¿«çš„å·¥ä½œäº† TCPåŠ é€Ÿä¸å¤šè´¦å·é…ç½® æ‰“å¼€TCP Fast Open 1$ vim /etc/rc.local æ·»åŠ å¦‚ä¸‹å†…å®¹åˆ°ä¸Šé¢æ‰“å¼€çš„æ–‡ä»¶ 1echo 3 &gt; /proc/sys/net/ipv4/tcp_fastopen å‚ç…§ä¸Šé¢æ–¹æ³•ï¼Œæ·»åŠ net.ipv4.tcp_fastopen = 3åˆ°/etc/sysctl.confæ–‡ä»¶ ä¿®æ”¹shadowsocksé…ç½®æ–‡ä»¶çš„fast_opené€‰é¡¹ä¸ºtrueï¼Œå‚è€ƒä¸‹é¢å¤šè´¦å·é…ç½®é‡Œçš„ä¿®æ”¹ å¤šè´¦å·ç«¯å£é…ç½®ï¼šä¿®æ”¹shadowsocksé…ç½®ï¼Œé…ç½®æ–‡ä»¶åœ°å€ä¸º/etc/shadowsocks.jsonï¼Œæ·»åŠ å¤šä¸ªç«¯å£å’Œå¯¹åº”çš„å¯†ç  12345678910111213141516171819202122232425# åŸé…ç½®&#123; &quot;server&quot;:&quot;0.0.0.0&quot;, &quot;server_port&quot;:port, &quot;local_address&quot;:&quot;127.0.0.1&quot;, &quot;local_port&quot;:1080, &quot;password&quot;:&quot;password&quot;, &quot;timeout&quot;:300, &quot;method&quot;:&quot;aes-256-cfb&quot;, &quot;fast_open&quot;:false&#125;# ä¿®æ”¹åçš„é…ç½®&#123; &quot;server&quot;:&quot;0.0.0.0&quot;, &quot;local_address&quot;:&quot;127.0.0.1&quot;, &quot;local_port&quot;:1080, &quot;port_password&quot;: &#123; &quot;port1&quot;:&quot;psw1&quot;, &quot;port2&quot;:&quot;psw2&quot; &#125;, &quot;timeout&quot;:300, &quot;method&quot;:&quot;aes-256-cfb&quot;, &quot;fast_open&quot;:true&#125; é‡å¯shadowsocksæœåŠ¡ 1$ /etc/init.d/shadowsocks restart è‡³æ­¤ï¼ŒåŠ é€Ÿä¸å¤šè´¦å·ç«¯å£é…ç½®å°±å®Œæˆäº†ï¼Œç„¶åæˆ‘ä»¬åœ¨shadowsockså®¢æˆ·ç«¯é‡Œæ·»åŠ è¿™ä¸¤ä¸ªè´¦å·ï¼Œé“¾æ¥è¯•è¯•ã€‚æƒŠå–œçš„å‘ç°ï¼Œåªæœ‰æœ€åé…ç½®çš„é‚£ä¸ªå¯ä»¥æˆåŠŸè¿æ¥ï¼Œå‰é¢çš„è¿æ¥ä¸Šåè¿˜æ˜¯ä¼šå›°åœ¨å¢™é‡Œã€‚æ²¡é”™ï¼Œéœ€è¦ä¿®æ”¹é˜²ç«å¢™çš„é…ç½® é˜²ç«å¢™é…ç½®ä¿®æ”¹ vultré˜²ç«å¢™é…ç½® protocolé€‰æ‹©TCP(æˆ‘åŒæ—¶å¼€å¯äº†UDP)ï¼Œporté€‰æ‹©shadowsocksé‡Œå¼€å¯çš„å¤šä¸ªç«¯å£ï¼Œæœ‰å¤šå°‘ä¸ªç«¯å£å°±é…ç½®å¤šå°‘ä¸ªrule(PS: æˆ‘çœ‹Portæ—è¾¹æ˜¾ç¤ºçš„or rangeï¼Œä¸è¿‡è®¾ç½®rangeåæ— æ•ˆï¼Œæœ‰åŒå­¦å¯ä»¥è®¾ç½®rangçš„è¯ï¼Œéº»çƒ¦ç•™è¨€æŒ‡æ•™ä¸‹ï¼Œæ„Ÿè°¢æ„Ÿè°¢)ã€‚rulesè®¾ç½®åï¼Œåœ¨Linked Instancesé‡Œé€‰æ‹©ä½ çš„å®ä¾‹è¿›è¡Œå…³è” æœåŠ¡å™¨é˜²ç«å¢™é…ç½® ç™»å½•æœåŠ¡å™¨åï¼Œæ§åˆ¶å°å®‰è£…ufw 1apt-get install ufw allowéœ€è¦å¼€æ”¾çš„ç«¯å£ 12345$ ufw enable$ ufw default deny$ ufw allow 22/tcp$ ufw allow port1$ ufw allow port2 é‡å¯ufwæœåŠ¡ 1$ ufw reload é‡å¯shadowsocksæœåŠ¡ 1$ /etc/init.d/shadowsocks restart ç„¶åä½¿ç”¨shadowsockså®¢æˆ·ç«¯è¿æ¥å¤šä¸ªè´¦å·ï¼Œå‘ç°éƒ½èƒ½æˆåŠŸè¿æ¥äº† è¯´æ˜ ç§‘å­¦ä¸Šç½‘ï¼Œæ–‡æ˜ä¸Šç½‘ å¦‚è‹¥æœ¬æ•™ç¨‹è¿åç›¸å…³æ³•å¾‹æ³•è§„ï¼Œè¯·è”ç³»æœ¬äººè¿›è¡Œåˆ é™¤ å‚è€ƒ ç§‘å­¦ä¸Šç½‘ä¹‹vultrå®‰è£…shadowsocks ufwç”¨æ³•","tags":[{"name":"vultr","slug":"vultr","permalink":"https://yl.frontjs.cc/tags/vultr/"},{"name":"vps","slug":"vps","permalink":"https://yl.frontjs.cc/tags/vps/"},{"name":"shadowsocks","slug":"shadowsocks","permalink":"https://yl.frontjs.cc/tags/shadowsocks/"}]},{"title":"GitHubå¤šè´¦å·ç®¡ç†è¸©å‘è®°å½•","date":"2018-07-24T07:35:31.000Z","path":"2018/07/24/2018-07-24-manage-git-account/","text":"èƒŒæ™¯ æ–°å¢äº†ä¸€ä¸ªGithubè´¦å·ï¼Œå¹¶pushè¿‡ä»£ç ï¼Œç„¶åç”¨ä»¥å‰çš„githubè´¦å·pushæ—¶ï¼Œæ­»æ´»pushä¸ä¸Šå» å¯»æ‰¾è§£å†³åŠæ³• ä½¿ç”¨ssh key æ¯ä¸ªè´¦å·å¯¹åº”ä¸€ä¸ªkey, Githubä¸Šå¡«å†™å¯¹åº”çš„keyï¼ˆå¦‚ï¼šid_rsa.github.yl2014.pubæ–‡ä»¶å†…å®¹ï¼‰ 1234567891011121314151617181920212223242526272829# ç”Ÿæˆkeyæ–‡ä»¶ssh-keygen -t rsa -f ~/.ssh/id_rsa.github.yl2014 -C &quot;yl2014@xx.com&quot;ssh-keygen -t rsa -f ~/.ssh/id_rsa.github.test -C &quot;test@xx.com&quot;# æ·»åŠ keyæ–‡ä»¶ssh-add ~/.ssh/id_rsa.github.yl2014ssh-add ~/.ssh/id_rsa.github.test# é…ç½®configvim ~/.ssh/configHost yl2014 HostName github.com IdentityFile ~/.ssh/id_rsa.github.yl2014 User gitHost test HostName github.com IdentityFile ~/.ssh/id_rsa.github.test User git# æµ‹è¯•ssh -T yl2014&gt; Hi YL2014! You&apos;ve successfully authenticated, but GitHub does not provide shell access.ssh -T test&gt; Hi test! You&apos;ve successfully authenticated, but GitHub does not provide shell access.ssh -T git@github.com&gt; Hi YL2014! You&apos;ve successfully authenticated, but GitHub does not provide shell access. å¦‚æœå‡ºç° ermission denied (publickey)ï¼Œåˆ™è¡¨ç¤ºkeyæ²¡æ·»åŠ æˆåŠŸï¼Œæ‰§è¡Œssh-add ~/.ssh/id_rsa.github.yl2014ï¼Œæˆ–ç”¨debugæ¨¡å¼æŸ¥çœ‹å…·ä½“å‡ºé”™ä¿¡æ¯ssh -vT git@github.com å¦‚æœå‘ç°æ¨é€æ—¶ä¸€ç›´æ˜¯æŸä¸ªGitHubè´¦å·ï¼Œæ— æ³•åˆ‡æ¢æˆå¦ä¸€ä¸ªï¼Œå¯ä»¥é‡‡å–å¦‚ä¸‹æ“ä½œï¼š123# åˆ é™¤æ‰€æœ‰sessionï¼Œå¹¶æ·»åŠ éœ€è¦è®¤è¯çš„$ ssh-add -D$ ssh-add id_rsa.github.yl2014 å‚è€ƒï¼šhttp://www.barretlee.com/blog/2016/03/09/config-in-ssh-after-troubling-git-connection/","tags":[{"name":"git","slug":"git","permalink":"https://yl.frontjs.cc/tags/git/"}]},{"title":"Let's Encrypt é€šé…ç¬¦è¯ä¹¦é…ç½®","date":"2018-03-30T07:35:31.000Z","path":"2018/03/30/2018-03-30-Let's Encrypt https/","text":"æœ¬æ–‡åªæ˜¯å¯¹é…ç½®è¿‡ç¨‹çš„è®°å½•ï¼Œå¦‚æœ‰é—®é¢˜ï¼Œæ¬¢è¿ç•™è¨€ ç¯å¢ƒä¸ä¾èµ– é˜¿é‡Œäº‘ECS ubunt16.0.412345$ sudo apt-get update$ sudo apt-get install software-properties-common$ sudo add-apt-repository ppa:certbot/certbot$ sudo apt-get update$ sudo apt-get install python-certbot-nginx ç”Ÿæˆè¯ä¹¦1$ certbot -d *.frontjs.cc --server https://acme-v02.api.letsencrypt.org/directory --manual --preferred-challenges dns-01 æŒ‰æç¤ºæ“ä½œï¼Œæ³¨æ„äº‹é¡¹å¦‚ä¸‹ï¼šæ³¨æ„ä¸Šé¢åšè®°å·çš„åœ°æ–¹ï¼Œåˆ°äº†è¿™é‡Œå…ˆä¸è¦Enterï¼Œå…ˆå»é˜¿é‡Œäº‘ä¸ŠåŸŸåè§£æå“ªé‡Œæ·»åŠ ä¸€æ¡è§£ææ·»åŠ å®Œæˆåï¼Œæ–°å¼€ä¸€ä¸ªçª—å£æµ‹è¯•ä¸‹æ˜¯å¦æˆåŠŸ1$ dig _acme-challenge.frontjs.cc txt å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè¡¨ç¤ºæˆåŠŸäº†ç„¶åå›åˆ°å®‰è£…çš„çª—å£ï¼ŒæŒ‰EnterOKï¼Œè¯ä¹¦ç”Ÿæˆå®Œæˆ è¯ä¹¦æœ‰æ•ˆæœŸ3ä¸ªæœˆï¼Œè®¾ç½®å®šæ—¶ä»»åŠ¡æ¥æ›´æ–°è¯ä¹¦ ç¼–å†™å®šæ—¶ä»»åŠ¡è„šæœ¬12$ vim /etc/letsencrypt/live/renew.sh# å†…å®¹ï¼šcertbot renew --pre-hook &quot;service nginx stop&quot; --post-hook &quot;service nginx start&quot; è®¾ç½®å®šæ—¶ä»»åŠ¡12$ crontab -e# æ·»åŠ å¦‚ä¸‹å†…å®¹ 0 0 1 * * /etc/letsencrypt/live/renew.sh &gt;/dev/null 2&gt;&amp;1 nginxé…ç½®12345678910111213141516171819server &#123; listen 80; listen [::]:80; listen 443 ssl; # ssl off æ”¯æŒhttpå’Œhttps # ssl on; ssl_certificate /etc/letsencrypt/live/frontjs.cc/fullchain.pem; ssl_certificate_key /etc/letsencrypt/live/frontjs.cc/privkey.pem; server_name frontjs.cc; # å¼ºåˆ¶https # rewrite ^(.*)$ https://$host$1 permanent; location / &#123; proxy_pass http://127.0.0.1:7000; &#125;&#125; é‡å¯nginx1$ service nginx restart enjoy yourself!å‚è€ƒhttps://letsencrypt.org/https://certbot.eff.org/lets-encrypt/ubuntuxenial-nginxhttps://certbot.eff.org/docs/using.html","tags":[{"name":"let's encrype","slug":"let-s-encrype","permalink":"https://yl.frontjs.cc/tags/let-s-encrype/"},{"name":"https","slug":"https","permalink":"https://yl.frontjs.cc/tags/https/"}]},{"title":"ECSä¸Šnodejså‡çº§(7.2.0)è®°å½•","date":"2016-12-08T09:40:31.000Z","path":"2016/12/08/2016-12-08-ecs-nodejs/","text":"æ›´æ–°ï¼šæ­¤æ–‡ä½œåºŸï¼Œç”¨nvmå°±å¥½äº†ï¼Œå“ªé‚£ä¹ˆå¤šç ´äº‹â€¦ å¸è½½å¦‚æœä¹‹å‰æ˜¯é€šè¿‡ apt-get install nodejs npmå®‰è£…çš„ï¼Œç›´æ¥æ‰§è¡Œ apt-get remove nodejs npm -yå¸è½½ï¼Œè‹¥åŸæ¥æ˜¯é€šè¿‡æºç ç¼–è¯‘å®‰è£…çš„(æˆ‘ä¹‹å‰å°±æ˜¯)ï¼Œå‚è€ƒè¿™ä¸ªè¿›è¡Œå¸è½½https://hungred.com/how-to/completely-removing-nodejs-npm/ å®‰è£… 12curl -sL https://deb.nodesource.com/setup_7.x | sudo -E bash -sudo apt-get install -y nodejs å‚è€ƒï¼šhttps://nodejs.org/en/download/package-manager/#debian-and-ubuntu-based-linux-distributions æ˜¯å¦æˆåŠŸï¼Ÿ1234root@yl:/etc# node -v-bash: /usr/local/bin/node: No such file or directoryroot@yl:/etc# npm -v-bash: /usr/local/bin/npm: No such file or directory å¾ˆæ˜æ˜¾æ²¡æˆåŠŸ(æ³¨ï¼šåœ¨çœŸå®çš„ubuntué‡Œï¼Œå·²ç»æˆåŠŸäº†ï¼Œè¿™ä¸ªæ˜¯ECSä¸Šæ˜¾ç¤ºäº†) çœ‹çœ‹nodeè£…åœ¨å“ªäº†1234root@yl:/etc# which node/usr/bin/noderoot@yl:/etc# which npm/usr/bin/npm å¯ä»¥çœ‹åˆ°ï¼Œå…¶å®æ˜¯å®‰è£…æˆåŠŸäº†ï¼Œåªæ˜¯å‘½ä»¤çš„å¯¹åº”ç›®å½•ä¸å¯¹ï¼Œè¿™å°±å¥½åŠäº† è½¯é“¾123456root@yl:/etc# ln -s /usr/bin/nodejs /usr/local/bin/noderoot@yl:/etc# node -vv7.2.0root@yl:/etc# ln -s /usr/bin/npm /usr/local/bin/npmroot@yl:/etc# npm -v3.10.9 å¯ä»¥æ„‰å¿«çš„ç©è€äº†~~","tags":[{"name":"ecs","slug":"ecs","permalink":"https://yl.frontjs.cc/tags/ecs/"},{"name":"ubuntu","slug":"ubuntu","permalink":"https://yl.frontjs.cc/tags/ubuntu/"},{"name":"nodejs","slug":"nodejs","permalink":"https://yl.frontjs.cc/tags/nodejs/"}]},{"title":"ubuntuä¸Šæ­å»ºftpæœåŠ¡å™¨","date":"2016-06-13T09:40:15.000Z","path":"2016/06/13/2016-06-13-ubuntu-ftp/","text":"ä¹°é˜¿é‡Œäº‘çš„ECSæœ‰æ®µæ—¶é—´äº†ï¼Œä¹ŸæŠ˜è…¾äº†ä¸€æ®µæ—¶é—´ï¼Œè¿‡æ®µæ—¶é—´å†™ä¸€å†™æŠ˜è…¾çš„ä¸€äº›ä¸œä¸œã€‚æ˜¨å¤©æœ‰ä¸ªæƒ³æ³•ï¼ŒæœåŠ¡å™¨ä¸Šå·²ç»æ­å»ºäº†ä¸€äº›ä¸œè¥¿ï¼Œå¦‚æœéœ€è¦åˆä½œå¼€å‘ï¼Œå¿…ç„¶éœ€è¦ç»™å›¢é˜Ÿçš„å¼€å‘äººå‘˜æœåŠ¡å™¨çš„è´¦å·å’Œå¯†ç ã€‚ä½†æ˜¯è¿™é‡Œæ¶‰åŠåˆ°ä¸€ä¸ªæƒé™é—®é¢˜ï¼Œæ¯”å¦‚ï¼Œå½“æŸä¸ªé¡¹ç›®çš„å‰ç«¯å¼€å‘äººå‘˜åªéœ€è¦å°†å‰ç«¯ä»£ç ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œå°±æ²¡å¿…è¦ç»™æœåŠ¡å™¨çš„æ‰€æœ‰æƒé™ã€‚è„‘æµ·ä¸­ç¬¬ä¸€ååº”å°±æ˜¯ftpäº†ï¼Œåˆšä½¿ç”¨ECSä¹Ÿæ˜¯ç”¨ftpæ¥ç®¡ç†æ–‡ä»¶çš„ã€‚å½“ç„¶ï¼Œjekinsçš„è‡ªåŠ¨åŒ–éƒ¨ç½²ä¹Ÿèƒ½è§£å†³è¿™æ ·çš„éœ€æ±‚ï¼Œè¿™ä¸ªä»¥åæœ‰æ—¶é—´åœ¨å†™ä¸€ç¯‡ã€‚ åœ¨ç½‘ä¸Šæ‰¾äº†ä¸€äº›èµ„æ–™ï¼Œä»¥åŠæŸ¥é˜…ECSçš„å®˜æ–¹æ–‡æ¡£ï¼Œä¹Ÿç¡®å®æ‰¾åˆ°äº†æˆ‘æƒ³è¦çš„ä¸œè¥¿ï¼Œä¾‹å¦‚è¿™ä¸ªLinuxä¸‹å¦‚ä½•è¿›è¡ŒFTPè®¾ç½®ï¼Œè¿˜æœ‰è¿™ä¸ªECS Linuxé…ç½®vsftpdé™åˆ¶FTPè´¦æˆ·è®¿é—®å…¶å®ƒç›®å½•ã€‚ çœ‹å®Œè¿™ä¸¤ç¯‡æ–‡ç« ï¼Œå‘ç°æ²¡ä»€ä¹ˆå¥½å†™çš„ï¼Œåªå‰©ä¸‹å®è·µäº†ã€‚æ‰€ä»¥æˆ‘æ‰“ç®—åœ¨æœ¬åœ°å…ˆæµ‹è¯•ä¸€éï¼Œå¦‚æœæ²¡é—®é¢˜ï¼Œç„¶åå°±åœ¨ECSä¸Šå»æ·»åŠ ftpç”¨æˆ·ï¼Œå¹¶è®¾ç½®è®¿é—®æƒé™ï¼Œä¸‹é¢å¼€å§‹å®è·µã€‚ æŒ‰ç…§åˆšæ‰ç»™å‡ºçš„ç¬¬ä¸€ä»½æ–‡æ¡£ï¼Œ 1234567root@yl:/# apt-get install vsftpd -yroot@yl:/# useradd -d /usr/yl -m -s /usr/sbin/nologin testroot@yl:/# passwd testè¾“å…¥æ–°çš„ UNIX å¯†ç ï¼š é‡æ–°è¾“å…¥æ–°çš„ UNIX å¯†ç ï¼š passwdï¼šå·²æˆåŠŸæ›´æ–°å¯†ç root@yl:/# chown -R test.test /usr/yl ç„¶åå°±æ˜¯ä¿®æ”¹vsftpd.confå’Œshellsæ–‡ä»¶ 12root@yl:/# vim /etc/vsftpd.confroot@yl:/# vim /etc/shells shellsæ–‡ä»¶çš„ä¿®æ”¹ï¼Œåœ¨æ–‡ä»¶åé¢åŠ ä¸Š/usr/sbin/nologinï¼Œvsftpd.confçš„å…³é”®ä¿®æ”¹å¦‚ä¸‹ï¼Œ 1234chroot_local_user=YESchroot_list_enable=YES# (default follows)chroot_list_file=/etc/vsftpd.chroot_list è¿™é‡Œç®€å•è¯´æ˜ä¸‹(æ¥æºäºç½‘ç»œ)ï¼šchroot_local_user=YES #æ˜¯å¦å°†æ‰€æœ‰ç”¨æˆ·é”å®šåœ¨ä¸»ç›®å½•,YESä¸ºå¯ç”¨ NOç¦ç”¨.(åŒ…æ‹¬æ³¨é‡Šæ‰ä¹Ÿä¸ºç¦ç”¨)chroot_list_enable=YES #æ˜¯å¦å¯åŠ¨é”å®šç”¨æˆ·çš„åå• YESä¸ºå¯ç”¨ NOç¦ç”¨(åŒ…æ‹¬æ³¨é‡Šæ‰ä¹Ÿä¸ºç¦ç”¨)chroot_list_file=/etc/vsftpd.chroot_list #ç¦ç”¨çš„åˆ—è¡¨åå• æ ¼å¼ä¸ºä¸€è¡Œä¸€ä¸ªç”¨æˆ·, å¦‚æœåå•é‡Œé¢æœ‰ä¸€ä¸ªftpuserçš„ç”¨æˆ·, åˆ™ftpuserç”¨æˆ·ä¸ä¼šé”å®šåœ¨ä¸»ç›®å½•,ç”¨æˆ·å°†å¯ä»¥è‡ªç”±åˆ‡æ¢ç›®å½•. ç„¶åé‡å¯ftpæœåŠ¡ 1root@yl:/# service vsftpd restart å°è¯•è¿æ¥ 12345678root@yl:/usr# ftp 127.0.0.1Connected to 127.0.0.1.220 (vsFTPd 3.0.2)Name (127.0.0.1:yl): test331 Please specify the password.Password:500 OOPS: vsftpd: refusing to run with writable root inside chroot()Login failed. å¥½å§ï¼Œçœ‹åˆ°æŠ¥500äº†ï¼Œå“ˆå“ˆã€‚é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œchromeäº†ä¸€ç•ªï¼Œå¾—åˆ°çš„ç­”æ¡ˆæ˜¯æœ€æ–°çš„vsftpå¯¹å—é™ç”¨æˆ·çš„ä¸»ç›®å½•ä¸èƒ½è®¾ç½®writableæƒé™ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬åˆ›å»ºç”¨æˆ·å¹¶åªå…è®¸å…¶è®¿é—®è‡ªå·±çš„ä¸»ç›®å½•ï¼Œè¿™é‡Œåˆä¸èƒ½ç»™ä»–å¯å†™çš„æƒé™ï¼Œå¥½åƒçŸ›ç›¾äº†ã€‚æ²¡é”™ï¼Œç¡®å®çŸ›ç›¾äº†ã€‚æ—¢ç„¶å®˜æ–¹è¯´äº†ä¸èƒ½ç»™ä¸»ç›®å½•å¯å†™æƒé™ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç»™ä»–çš„å­ç›®å½•å¯å†™çš„æƒé™ï¼Œç”¨æˆ·åœ¨å­ç›®å½•é‡Œè¿›è¡Œå¯¹åº”çš„æ“ä½œå°±å¯ä»¥äº†ï¼Œå¦‚ä¸‹ 123456root@yl:/# chmod a-w /usr/ylroot@yl:/# cd /usr/ylroot@yl:/usr/yl# mkdir wwwroot@yl:/usr/yl# lswwwroot@yl:/usr/yl# chmod 777 www æˆ‘ä»¬å†æ¥è¿æ¥è¯•è¯• 12345678910root@yl:/usr# ftp 127.0.0.1Connected to 127.0.0.1.220 (vsFTPd 3.0.2)Name (127.0.0.1:yl): test331 Please specify the password.Password:230 Login successful.Remote system type is UNIX.Using binary mode to transfer files.ftp&gt; è¿æ¥æˆåŠŸï¼ ç„¶åæˆ‘ä½¿ç”¨xftpåœ¨windowsé‡Œä½¿ç”¨åˆšæ‰æ–°å»ºçš„è´¦å·è¿æ¥è™šæ‹Ÿæœºé‡Œçš„æœåŠ¡å™¨ä¹Ÿæ­£å¸¸è¿æ¥äº†ï¼Œå¹¶ä¸”åªèƒ½è®¿é—®è‡ªå·±çš„ä¸»ç›®å½•ï¼Œä¸èƒ½è·³å‡ºå½“å‰ç›®å½•ï¼Œæƒé™ä¹Ÿè·Ÿåˆšæ‰è®¾ç½®çš„ä¸€æ ·ï¼Œåªèƒ½åœ¨å­ç›®å½•é‡Œä¸Šä¼ æ–‡æ¡£ã€‚å‰©ä¸‹çš„å°±æ˜¯æŠŠè¿™äº›æ“ä½œåœ¨ECSä¸Šcopyä¸€æ¬¡äº†ï¼Œå¦‚æœé‡åˆ°äº†æ–°çš„é—®é¢˜ä¼šåœ¨ç•™è¨€é‡Œè´´å‡ºï¼Œå¦‚æœ‰ç–‘é—®ï¼Œæ¬¢è¿ç•™è¨€ã€‚","tags":[{"name":"linux","slug":"linux","permalink":"https://yl.frontjs.cc/tags/linux/"},{"name":"ecs","slug":"ecs","permalink":"https://yl.frontjs.cc/tags/ecs/"},{"name":"ftp","slug":"ftp","permalink":"https://yl.frontjs.cc/tags/ftp/"},{"name":"ubuntu","slug":"ubuntu","permalink":"https://yl.frontjs.cc/tags/ubuntu/"}]},{"title":"FormData API ä¸Šä¼ æ–‡ä»¶åˆ°åˆæ‹äº‘","date":"2016-04-25T09:39:33.000Z","path":"2016/04/25/2016-04-25-upload-pic-upyun/","text":"æœ€è¿‘åˆé‡åˆ°äº†ä¸Šä¼ æ–‡ä»¶çš„éœ€æ±‚ï¼Œä»¥å‰ä¹Ÿå†™è¿‡ä¸€ç¯‡å…³äºåˆ©ç”¨formdataä¸Šä¼ æ–‡ä»¶çš„æ–‡ç« (å¦‚éœ€æµè§ˆï¼Œè¯·ç‚¹å‡»è¿™é‡Œ)ï¼Œè¿™æ¬¡ä¸Šä¼ çš„åœ°å€æ˜¯åˆæ‹äº‘ï¼Œåœ¨æ“ä½œè¿‡ç¨‹ä¸­ç¨å¾®é‡åˆ°äº†ä¸€äº›å‘ï¼Œè¿™é‡Œç®€å•è®°å½•ä¸‹ã€‚ è¿™é‡Œä½¿ç”¨çš„æ˜¯åˆæ‹äº‘çš„HTTP FORM APIï¼Œä½¿ç”¨æµç¨‹å¤§æ¦‚å¦‚ä¸‹ è¯·æ±‚å®¢æˆ·æœåŠ¡å™¨ï¼Œç”Ÿæˆã€è·å–ä¸Šä¼ æ‰€éœ€çš„ signatureã€policy å‚æ•°ã€‚ä¸ºäº†æå‡ä¸Šä¼ æˆåŠŸç‡ï¼ˆé¿å…ç­¾åè¿‡æœŸï¼‰ã€å®‰å…¨æ€§(è®¾ç½®å°½å¯èƒ½çŸ­çš„æˆæƒæœ‰æ•ˆæœŸ)ï¼Œæˆ‘ä»¬å»ºè®®åœ¨æ¯æ¬¡æ‰§è¡Œä¸Šä¼ æ“ä½œä¹‹å‰ï¼Œéƒ½é‡æ–°æ‰§è¡Œæœ¬æ­¥éª¤è·å–ç›¸å…³å‚æ•°ï¼› è¯·æ±‚ UPYUN API ä¸Šä¼ æ–‡ä»¶ï¼Œæ ¡éªŒè¿”å›ç»“æœ/å¼‚æ­¥å›è°ƒé€šçŸ¥å®¢æˆ·æœåŠ¡å™¨ï¼› å¤„ç†å¸¸è§„å®¢æˆ·ä¸šåŠ¡æµç¨‹ã€‚ æ²¡é”™ï¼Œæˆ‘ä»¬é¦–å…ˆè¦è·å–ä¸Šä¼ åˆ°åˆæ‹äº‘æ‰€éœ€è¦çš„å­—æ®µï¼Œè¿™ä¸ªç”±è‡ªå·±çš„æœåŠ¡ç«¯è¿”å›ï¼Œç„¶åå°†è¿™ä¸¤ä¸ªå‚æ•°å’Œæ–‡ä»¶å‚æ•°ä¸€èµ·è¯·æ±‚åˆæ‹äº‘çš„apiæ¥å£å³å¯ï¼Œå¦‚ä¸‹ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758Utils.ajaxGet('/upload/sign',&#123;mod: 'serverSite'&#125;, function(data)&#123; /*data &#123;\"signature\":xxx, \"policy\":xxxx&#125;*/ upload(data);&#125;);function upload(data)&#123; var file, fd = new FormData(), xhr = new XMLHttpRequest(), loaded, total, pre, url, input; if(document.getElementById('myUploadInput'))&#123; input = document.getElementById('myUploadInput'); &#125;else&#123; input = document.createElement('input'); input.setAttribute('id', 'myUploadInput'); input.setAttribute('type', 'file'); input.setAttribute('name', 'file'); document.body.appendChild(input); input.style.display = 'none'; &#125; url = 'http://v0.api.upyun.com/xxx'; input.click(); input.onchange = function()&#123; file = input.files[0]; fd.append('signature', data.signature); fd.append('policy', data.policy); fd.append('file', file); xhr.open('post', url); xhr.send(fd); xhr.onreadystatechange = function()&#123; console.log(xhr); if(xhr.status == 200)&#123; if(xhr.readyState == 4)&#123; if(option.callback instanceof Function)&#123; console.log(xhr.responseText); if(typeof xhr.responseText == 'string')&#123; option.callback(JSON.parse(xhr.responseText)) &#125;else&#123; option.callback(xhr.responseText); &#125; xhr = null; &#125; &#125; &#125;else&#123; Utils.showTips('ä¸Šä¼ å¤±è´¥') &#125; &#125;; xhr.upload.onprogress = function(event)&#123; loaded = event.loaded; total = event.total; pre = Math.floor(100 * loaded / total); if(option.uploading instanceof Function)&#123; option.uploading(pre); &#125; &#125; &#125;&#125; ä¸Šé¢ä»£ç ä¸­urlä¸­çš„xxxï¼Œæ˜¯åˆæ‹äº‘é…ç½®é‡Œçš„bucket-nameï¼Œå…·ä½“çš„å¯ä»¥æŸ¥çœ‹åˆæ‹äº‘çš„ç›¸å…³apiæ–‡æ¡£ã€‚ ä¸€åˆ‡çœ‹ä¼¼å¾ˆæ­£å¸¸ï¼Œæˆ‘å¼€å§‹ä¹Ÿæ˜¯è¿™ä¹ˆè§‰å¾—çš„ï¼Œç„¶åï¼Œbugå‘ç”Ÿäº†ã€‚å½“æˆ‘ä»¬åœ¨é¡µé¢ä¸Šç‚¹å‡»æŒ‰é’®è°ƒç”¨ä¸Šè¿°æ–¹æ³•çš„æ—¶å€™ï¼Œå‘ç°ä»€ä¹ˆä¹Ÿæ²¡æœ‰å‘ç”Ÿï¼ŒæŒ‰å¸¸ç†åº”è¯¥ä¼šæ‰“å¼€æœ¬åœ°çš„èµ„æºç®¡ç†å™¨çš„ã€‚ç„¶ååœ¨æ§åˆ¶å°çœ‹çœ‹ï¼Œå‘ç°åªå‘è‡ªå·±çš„æœåŠ¡ç«¯å‘é€äº†è¯·æ±‚ï¼Œåˆ›å»ºçš„è¡¨å•å…ƒç´ çš„changeäº‹ä»¶æ²¡æœ‰å‘ç”Ÿï¼Œè¿™ä¸ªæ–­ç‚¹å¯ä»¥çœ‹åˆ°ã€‚ ä¸ºä»€ä¹ˆchangeæ²¡æœ‰å‘ç”Ÿï¼Ÿåˆæ­¥çŒœæµ‹ï¼Œajaxå‘èµ·çš„ç½‘ç»œè¯·æ±‚ä¼šé˜»å¡æˆ–è€…å½±å“æµè§ˆå™¨UIå±‚çš„æ¸²æŸ“ï¼Œç„¶åè°·æ­ŒæŸ¥é˜…ç›¸å…³èµ„æ–™ï¼Œä¹Ÿæ‰¾åˆ°äº†ç›¸å…³çš„è§£é‡Šã€‚ èµ„æ–™ä¸€ èµ„æ–™äºŒ æ—¢ç„¶æ‰¾åˆ°äº†åŸå› ï¼Œè§£å†³åŠæ³•ä¹Ÿå¾ˆæ˜æ˜¾äº†ï¼Œå¦‚æœä½¿ç”¨çš„jQueryçš„ajaxï¼Œå¯ä»¥å°è¯•ä¸Šè¿°èµ„æ–™é‡Œçš„æ–¹æ³•ï¼Œæˆ‘è¿™é‡Œå·äº†ä¸ªæ‡’ï¼Œä»æœåŠ¡ç«¯è·å–signatureã€policyçš„æ–¹æ³•æ”¾åˆ°äº†è¡¨å•å…ƒç´ çš„changeäº‹ä»¶é‡Œã€‚ ä»£ç å¦‚ä¸‹ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071Utils.uploadFile = function (option)&#123; var file, fd = new FormData(), xhr = new XMLHttpRequest(), loaded, total, pre, url, input; if(document.getElementById('myUploadInput'))&#123; input = document.getElementById('myUploadInput'); &#125;else&#123; input = document.createElement('input'); input.setAttribute('id', 'myUploadInput'); input.setAttribute('type', 'file'); input.setAttribute('name', 'file'); document.body.appendChild(input); input.style.display = 'none'; &#125; url = 'http://v0.api.upyun.com/xxx'; input.click(); input.onchange = function()&#123; var fileType = ['gif','png','jpg','jpge']; var type = input.value.split('.').pop(); if(fileType.indexOf(type.toLocaleLowerCase()) == -1)&#123; Utils.showTips('è¯¥ç±»å‹æ–‡ä»¶ä¸æ”¯æŒï¼Œè¯·é€‰æ‹©å›¾ç‰‡æ–‡ä»¶'); return; &#125; if(option.maxSize &amp;&amp; input.files[0].size &gt; option.maxSize * 1024 * 1024)&#123; Utils.showTips('è¯·ä¸Šä¼ å°äº'+option.maxSize+'Mçš„æ–‡ä»¶'); return; &#125; if(option.beforeSend instanceof Function)&#123; if(option.beforeSend(file) === false)&#123; return false; &#125; &#125; Utils.ajaxGet('/upload/sign',&#123;mod: 'serverSite'&#125;, function(data)&#123; file = input.files[0]; fd.append('signature', data.signature); fd.append('policy', data.policy); fd.append('file', file); xhr.open('post', url); xhr.send(fd); xhr.onreadystatechange = function()&#123; console.log(xhr); if(xhr.status == 200)&#123; if(xhr.readyState == 4)&#123; if(option.callback instanceof Function)&#123; console.log(xhr.responseText); if(typeof xhr.responseText == 'string')&#123; option.callback(JSON.parse(xhr.responseText)) &#125;else&#123; option.callback(xhr.responseText); &#125; xhr = null; &#125; &#125; &#125;else&#123; Utils.showTips('ä¸Šä¼ å¤±è´¥') &#125; &#125;; xhr.upload.onprogress = function(event)&#123; loaded = event.loaded; total = event.total; pre = Math.floor(100 * loaded / total); if(option.uploading instanceof Function)&#123; option.uploading(pre); &#125; &#125; &#125;); &#125;&#125; è¿™å°±å®Œäº†ï¼Ÿ å…¶å®å¹¶æ²¡æœ‰ï¼Œè¿˜é‡åˆ°ä¸€ä¸ªå¥‡è‘©é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯åˆšæ‰è¯´çš„changeäº‹ä»¶æ²¡å‘ç”Ÿçš„æ—¶å€™ï¼Œè¯·æ±‚åˆæ‹äº‘æ‹¿åˆ°çš„xhr.statusä¸º0ï¼Œå¯èƒ½æ˜¯æˆ‘å­¤é™‹å¯¡é—»äº†ï¼Œè¿˜æ²¡å¬è¿‡çŠ¶æ€ç å¯ä»¥ä¸º0ã€‚åªèƒ½è¯´æ˜è°·æ­Œå¾ˆå¼ºå¤§ï¼Œé©¬ä¸Šå°±æ‰¾åˆ°ç›¸å…³èµ„æ–™äº†ï¼Œå› ä¸ºæ²¡æœ‰sendã€‚æœ€å¼€å§‹çš„æ—¶å€™ï¼Œåˆæ‹äº‘çš„è¯·æ±‚è·¯å¾„é”™äº†ä¹Ÿæ‹¿åˆ°äº†ä¸º0çš„statusï¼Œä»¥åé‡åˆ°ç±»ä¼¼çš„æƒ…å†µå¯ä»¥ä»è¿™å‡ ä¸ªæ–¹é¢å»æŸ¥æ‰¾åŸå› äº†ã€‚ ä¸Šä¼ æ–‡ä»¶åˆ°åˆæ‹äº‘åï¼Œåˆæ‹äº‘æ¥å£çš„è¿”å›å‚æ•°é‡Œæœ‰ä¸ªurlï¼Œå…·ä½“çš„æ–‡ä»¶è®¿é—®è·¯å¾„ä¸º &quot;http://xxx.b0.upaiyun.com/&quot;+urlï¼Œxxxä¸ºbucket-nameï¼Œç›¸å…³æ–‡æ¡£å¯ä»¥çœ‹è¿™é‡Œã€‚ å·®ä¸å¤šå°±è¿™ä¹ˆå¤šäº†ï¼Œå¦‚æœ‰ç–‘é—®æ¬¢è¿ç•™è¨€ã€‚","tags":[{"name":"js","slug":"js","permalink":"https://yl.frontjs.cc/tags/js/"},{"name":"åˆæ‹äº‘","slug":"åˆæ‹äº‘","permalink":"https://yl.frontjs.cc/tags/åˆæ‹äº‘/"}]},{"title":"å¾®ä¿¡jssdkä½¿ç”¨è®°å½•","date":"2016-04-11T09:39:13.000Z","path":"2016/04/11/2016-04-11-wx-use/","text":"è¯è¯´æ¥è§¦å¾®ä¿¡å¼€å‘æ˜¯æ¯•ä¸šå‰çš„ç¬¬ä¸€ä»½å·¥ä½œï¼Œå½“æ—¶æ‰€åšçš„å°±æ˜¯ä¸€äº›å¾®ä¿¡ä¸Šçš„æ´»åŠ¨æ¨å¹¿é¡µé¢ï¼Œç”¨åˆ°çš„jssdkå°±åªæœ‰å¾®ä¿¡åˆ†äº«è·Ÿç½‘é¡µç™»å½•æˆæƒå§ã€‚è®°å¾—å¾ˆä¹…ä»¥å‰å¾®ä¿¡åˆ†äº«æ˜¯ä¸éœ€è¦åç«¯æ”¯æŒçš„ï¼Œåæ¥ä¸–ç•Œå˜äº†ï¼Œä¸èƒ½åªé å‰ç«¯æ¥æ‹¯æ•‘ä¸–ç•Œäº†â€¦ æœ€è¿‘çš„é¡¹ç›®å°±æ˜¯å¾®ä¿¡ç«¯çš„ï¼Œé¦–å…ˆç”¨åˆ°çš„å°±æ˜¯jssdkã€‚ä¸‹é¢æ•´ç†å‡ ä¸ªï¼Œè¿˜æ²¡ç”¨ä¸Šçš„ç­‰ç”¨ä¸Šäº†å†æ¥è¡¥å……ã€‚ é¦–å…ˆè´´ä¸Šå¾®ä¿¡jssdkåœ°å€ï¼šhttp://mp.weixin.qq.com/wiki/7/aaa137b55fb2e0456bf8dd9148dd613f.html åˆå§‹é…ç½®12345678910111213141516171819202122232425262728293031323334353637383940414243444546function wxConfig(option)&#123; wx.config(&#123; debug: false, appId: option.appId, timestamp: option.timestamp, nonceStr: option.nonceStr, signature: option.signature, jsApiList: [ 'onMenuShareTimeline', 'onMenuShareAppMessage', 'onMenuShareQQ', 'onMenuShareWeibo', 'onMenuShareQZone', 'startRecord', 'stopRecord', 'onVoiceRecordEnd', 'playVoice', 'pauseVoice', 'stopVoice', 'onVoicePlayEnd', 'uploadVoice', 'downloadVoice', 'chooseImage', 'previewImage', 'uploadImage', 'downloadImage', 'translateVoice', 'getNetworkType', 'openLocation', 'getLocation', //è·å–ä½ç½®ä¿¡æ¯ 'hideOptionMenu', 'showOptionMenu', 'hideMenuItems', 'showMenuItems', 'hideAllNonBaseMenuItem', 'showAllNonBaseMenuItem', 'closeWindow', 'scanQRCode', 'chooseWXPay', //æ”¯ä»˜ 'openProductSpecificView', 'addCard', 'chooseCard', 'openCard' ] &#125;);&#125; æœ‰ option çš„å‚æ•°æ˜¯åç«¯ç»™çš„ï¼Œå…·ä½“çš„åç«¯å®ç°å¯ä»¥å‚è€ƒå¾®ä¿¡çš„å®˜æ–¹demo è·å–ä½ç½®ä¿¡æ¯12345678910111213141516171819202122232425function getLocation()&#123; wx.ready(function()&#123; wx.getLocation(&#123; type: 'gcj02', success: function (data) &#123; var res = data; if(data.res)&#123; res = data.res; &#125; var latitude = res.latitude; var longitude = res.longitude; Utils.setData('position',JSON.stringify(&#123; latitude: latitude, longitude: longitude &#125;)); //if(latitude &amp;&amp; longitude)&#123; getDetailAddr(latitude, longitude); //&#125; &#125;, fail: function(res)&#123; page.location = page.locationFailTip; &#125; &#125;); &#125;);&#125; ä»¥ä¸Šä»£ç é€šè¿‡å¾®ä¿¡æ‹¿åˆ°ç»çº¬åº¦åï¼Œå‘åç«¯å‘èµ·è¯·æ±‚æ‹¿è¯¦ç»†åœ°å€(æƒ³å‰ç«¯è‡ªå·±æ‹¿è¯¦ç»†åœ°å€ï¼Œå¯ä»¥å€ŸåŠ©äºç™¾åº¦åœ°å›¾çš„apiï¼Œç™¾åº¦åœ°å›¾åœ¨å¾®ä¿¡é‡Œèƒ½å¦ä½¿ç”¨è¿˜æ²¡åšå°è¯•) å¾®ä¿¡æ”¯ä»˜1234567891011121314151617function wxPays(option)&#123; wx.ready(function()&#123; wx.chooseWXPay(&#123; timestamp: option.timeStamp, // æ”¯ä»˜ç­¾åæ—¶é—´æˆ³ï¼Œæ³¨æ„å¾®ä¿¡jssdkä¸­çš„æ‰€æœ‰ä½¿ç”¨timestampå­—æ®µå‡ä¸ºå°å†™ã€‚ä½†æœ€æ–°ç‰ˆçš„æ”¯ä»˜åå°ç”Ÿæˆç­¾åä½¿ç”¨çš„timeStampå­—æ®µåéœ€å¤§å†™å…¶ä¸­çš„Så­—ç¬¦ nonceStr: option.nonceStr, // æ”¯ä»˜ç­¾åéšæœºä¸²ï¼Œä¸é•¿äº 32 ä½ package: option.package, // ç»Ÿä¸€æ”¯ä»˜æ¥å£è¿”å›çš„prepay_idå‚æ•°å€¼ï¼Œæäº¤æ ¼å¼å¦‚ï¼šprepay_id=***ï¼‰ signType: option.signType, // ç­¾åæ–¹å¼ï¼Œé»˜è®¤ä¸º'SHA1'ï¼Œä½¿ç”¨æ–°ç‰ˆæ”¯ä»˜éœ€ä¼ å…¥'MD5' paySign: option.paySign, // æ”¯ä»˜ç­¾å success: function (res) &#123; // æ”¯ä»˜æˆåŠŸåçš„å›è°ƒå‡½æ•°,è¯·æ±‚æœåŠ¡å™¨æŸ¥è¯¢æ”¯ä»˜ç»“æœ var prepayId = option.package.split('=')[1]; checkPayResult(prepayId); &#125;, fail: function(res)&#123;&#125; &#125;); &#125;);&#125; ä»¥ä¸Šå¸¦optionçš„å‚æ•°éœ€æœåŠ¡ç«¯æä¾›ï¼Œå‘èµ·å¾®ä¿¡æ”¯ä»˜åï¼Œä¼šè‡ªåŠ¨è°ƒå‡ºå¾®ä¿¡æ”¯ä»˜çš„é¢æ¿ï¼Œå®Œæˆæ”¯ä»˜æˆ–å–æ¶ˆæ”¯ä»˜ä¼šè¿›å…¥ç›¸åº”çš„å›è°ƒï¼Œæ ¹æ®å¾®ä¿¡å®˜æ–¹æä¾›çš„æ”¯ä»˜æ–‡æ¡£(ä¸šåŠ¡æµç¨‹è¯´æ˜)ï¼Œæ”¯ä»˜å®Œæˆåï¼ŒæœåŠ¡ç«¯éœ€ç¡®è®¤æ˜¯å¦æ”¯ä»˜æˆåŠŸï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜å¾—å‘æœåŠ¡ç«¯å‘é€ä¸€æ¬¡æ”¯ä»˜ç»“æœç¡®è®¤è¯·æ±‚ã€‚ å½“æ—¶è°ƒæ”¯ä»˜æ—¶ä¸€ä¸ªå¾ˆå°çš„é”™è¯¯å¯¼è‡´æ”¯ä»˜é¢æ¿æ²¡å¼¹å‡ºï¼Œå°±ä½¿ç”¨äº†æ”¯ä»˜æ–‡æ¡£é‡Œçš„ç¤ºä¾‹demoï¼Œå¦‚ä¸‹ 123456789101112131415161718192021222324252627282930313233343536373839404142function wxPays(option)&#123; //alert('å¾®ä¿¡æ”¯ä»˜é…ç½®å‚æ•°:'+JSON.stringify(option)); onBridgeReady(option); function onBridgeReady(option)&#123; WeixinJSBridge.invoke( 'getBrandWCPayRequest', &#123; \"appId\" : option.appId, //å…¬ä¼—å·åç§°ï¼Œç”±å•†æˆ·ä¼ å…¥ \"timeStamp\" : option.timeStamp, //æ—¶é—´æˆ³ï¼Œè‡ª1970å¹´ä»¥æ¥çš„ç§’æ•° \"nonceStr\" : option.nonceStr, //éšæœºä¸² \"package\" : option.package, \"signType\" : option.signType, //å¾®ä¿¡ç­¾åæ–¹å¼ï¼š \"paySign\" : option.paySign //å¾®ä¿¡ç­¾å &#125;, function(res)&#123; // ä½¿ç”¨ä»¥ä¸Šæ–¹å¼åˆ¤æ–­å‰ç«¯è¿”å›,å¾®ä¿¡å›¢é˜Ÿéƒ‘é‡æç¤ºï¼šres.err_msgå°†åœ¨ç”¨æˆ·æ”¯ä»˜æˆåŠŸåè¿”å› okï¼Œä½†å¹¶ä¸ä¿è¯å®ƒç»å¯¹å¯é ã€‚ //if(/ok/.test(res.err_msg)) &#123; if(res.err_msg == \"get_brand_wcpay_request:ok\") &#123; var prepayId = option.package.split('=')[1]; checkPayResult(prepayId); &#125;else&#123; Utils.alert(&#123; title: 'æ‡‚å¸ˆå‚…æç¤ºæ‚¨', content: 'æ”¯ä»˜å¤±è´¥ï¼Œè¯·é‡æ–°æ”¯ä»˜', callback: function()&#123; window.location.reload(); &#125; &#125;); &#125; &#125; ); &#125; if (typeof WeixinJSBridge == \"undefined\")&#123; if( document.addEventListener )&#123; document.addEventListener('WeixinJSBridgeReady', onBridgeReady, false); &#125;else if (document.attachEvent)&#123; document.attachEvent('WeixinJSBridgeReady', onBridgeReady); document.attachEvent('onWeixinJSBridgeReady', onBridgeReady); &#125; &#125;else&#123; onBridgeReady(); &#125;&#125; è¯¥æ–¹æ³•åœ¨androidæœºä¸Šæµ‹è¯•æ˜¯æœ‰æ•ˆçš„ï¼Œåœ¨iosæœºä¸Šæµ‹è¯•æ˜¯æç¤ºè°ƒç”¨jsApiæ—¶æ²¡æœ‰ä¼ timeStampï¼Œä¸çŸ¥é“æ˜¯ä»€ä¹ˆé¬¼ï¼Œå“ªä½æœ‹å‹çŸ¥é“æ€ä¹ˆè§£å†³çš„ï¼Œæ¬¢è¿ç•™è¨€å‘ŠçŸ¥ï¼Œä¸èƒœæ„Ÿè°¢ é€‰æ‹©å›¾ç‰‡ä¸ä¸Šä¼ å›¾ç‰‡é€‰æ‹©å›¾ç‰‡12345678910111213141516171819function uploadImage()&#123; wx.ready(function()&#123; wx.chooseImage(&#123; count: 3-page.photos.length, // é»˜è®¤9 sizeType: ['original', 'compressed'], // å¯ä»¥æŒ‡å®šæ˜¯åŸå›¾è¿˜æ˜¯å‹ç¼©å›¾ï¼Œé»˜è®¤äºŒè€…éƒ½æœ‰ sourceType: ['album', 'camera'], // å¯ä»¥æŒ‡å®šæ¥æºæ˜¯ç›¸å†Œè¿˜æ˜¯ç›¸æœºï¼Œé»˜è®¤äºŒè€…éƒ½æœ‰ success: function (res) &#123; var localIds = res.localIds; // è¿”å›é€‰å®šç…§ç‰‡çš„æœ¬åœ°IDåˆ—è¡¨ï¼ŒlocalIdå¯ä»¥ä½œä¸ºimgæ ‡ç­¾çš„srcå±æ€§æ˜¾ç¤ºå›¾ç‰‡ localIds.forEach(function(item)&#123; if(page.photos.indexOf(item) == -1)&#123; page.photos.push(item); uploadToWx(item); &#125; &#125;) &#125;, fail: function(res)&#123;&#125; &#125;); &#125;);&#125; ä¸Šä¼ å›¾ç‰‡123456789function uploadToWx(localId)&#123; wx.uploadImage(&#123; localId: localId, // éœ€è¦ä¸Šä¼ çš„å›¾ç‰‡çš„æœ¬åœ°IDï¼Œç”±chooseImageæ¥å£è·å¾— isShowProgressTips: 0, // é»˜è®¤ä¸º1ï¼Œæ˜¾ç¤ºè¿›åº¦æç¤º success: function (res) &#123; page.serverIds.push(res.serverId); // è¿”å›å›¾ç‰‡çš„æœåŠ¡å™¨ç«¯ID &#125; &#125;);&#125; æ„Ÿè§‰å¾®ä¿¡æä¾›çš„èƒ½å¤Ÿè°ƒç”¨æ‰‹æœºæ‹ç…§å’Œç›¸å†Œçš„æ–¹æ³•è›®å®ç”¨çš„ï¼Œä¸€èˆ¬è¿™ä¸ªåœ¨appé‡Œæ‰èƒ½å®ç°ï¼Œæµè§ˆå™¨ä¸€èˆ¬ä¹Ÿåªèƒ½é€‰æ‹©æ–‡ä»¶ã€‚é€‰æ‹©äº†å›¾ç‰‡åï¼Œå¯ä»¥åœ¨å›è°ƒé‡Œæ‹¿åˆ°å›¾ç‰‡çš„idåˆ—è¡¨,æœ¬åœ°çš„å›¾ç‰‡idåœ¨å¾®ä¿¡é‡Œæ˜¯å¯ä»¥ç”¨æ¥æ˜¾ç¤ºå›¾ç‰‡çš„ï¼Œé€šè¿‡è¯¥idåˆ—è¡¨çš„æ¯ä¸ªid(æ³¨æ„ï¼Œè¿™é‡Œæ˜¯å•ä¸ªidï¼Œä¸æ˜¯åˆ—è¡¨)ï¼Œå°±å¯ä»¥è°ƒç”¨å¾®ä¿¡ä¸Šä¼ å›¾ç‰‡çš„æ¥å£ï¼Œå°†å›¾ç‰‡ä¸Šä¼ åˆ°å¾®ä¿¡æœåŠ¡å™¨ä¸Šï¼Œå¾®ä¿¡æœåŠ¡å™¨ç›®å‰å¯¹å›¾ç‰‡çš„ä¿ç•™æ—¶é—´æ˜¯3å¤©ï¼Œä¸Šä¼ æˆåŠŸåå›è°ƒé‡Œå¯ä»¥æ‹¿åˆ°serverIdï¼ŒæœåŠ¡ç«¯é€šè¿‡serverIdå°†å¾®ä¿¡æœåŠ¡å™¨ä¸Šçš„å›¾ç‰‡èµ„æºä¸‹è½½åˆ°è‡ªå·±çš„æœåŠ¡å™¨æˆ–ç¬¬ä¸‰æ–¹è¿›è¡Œå­˜å‚¨ã€‚ ç›®å‰ç”¨çš„å¾®ä¿¡jssdkå°±è¿™å‡ ä¸ªï¼Œåç»­æœ‰ç”¨ä¸Šä¼šå†è¡¥ä¸Šã€‚ ä¸‹é¢è¯´ä¸‹æœ€è¿‘å¼€å‘ä¸­é‡åˆ°çš„é—®é¢˜ï¼Œé¿å…ä»¥åè¸©åŒæ ·çš„å‘ã€‚ å…³äºå¾®ä¿¡é‡Œçš„åˆ·æ–°è¿™ä¸ªé—®é¢˜å›°æ‰°äº†å¥½ä¹…ï¼Œä¹Ÿå°è¯•è¿‡å¾ˆå¤šæ–¹æ³•ã€‚é—®é¢˜åœºæ™¯ï¼šæœ‰ä¸€ä¸ªè®¢å•çŠ¶æ€é¡µé¢ï¼šè®¢å•æäº¤æˆåŠŸï¼Œæ¥å•æˆåŠŸï¼Œå¾…æ”¯ä»˜ï¼Œæ”¯ä»˜æˆåŠŸå¾…è¯„ä»·ï¼Œè¯„ä»·æˆåŠŸã€‚æˆ‘ç”¨äº†ä¸€ä¸ªé¡µé¢ï¼Œé€šè¿‡è®¢å•çŠ¶æ€å€¼æ¥æ¸²æŸ“å¯¹åº”çš„templateï¼Œæ‰€ä»¥ç”¨æˆ·æ”¯ä»˜ååˆ·æ–°é¡µé¢å°±åº”è¯¥çœ‹åˆ°å¾…è¯„ä»·çš„å†…å®¹ï¼Œå› ä¸ºæ”¯ä»˜æˆåŠŸåé¡µé¢åˆ·æ–°ï¼Œè®¢å•çŠ¶æ€å€¼å°±æ”¹å˜äº†ï¼Œè¯„ä»·ååˆ·æ–°æ˜¯åŒæ ·çš„é“ç†ã€‚å°è¯•è¿‡çš„æ–¹æ³•ï¼š window.location.reload(); window.location.href = window.location.href; window.location.href = window.location.href + â€˜&amp;r=â€™ + æ—¶é—´æˆ³ ç»“æœå‡ä»¥å¤±è´¥å‘Šç»ˆï¼Œé¡µé¢åˆ·æ–°ï¼Œæ•°æ®æ²¡åˆ·æ–°ï¼Œé€šè¿‡fiddleræŸ¥çœ‹ç½‘ç»œè¯·æ±‚å‘ç°ï¼Œåˆ·æ–°é¡µé¢æ—¶æ²¡æœ‰å‘æœåŠ¡å™¨æ‹¿é¡µé¢ï¼Œè¯´æ˜æ‹¿çš„åªæ˜¯ç¼“å­˜ï¼Œè¿™ç§æƒ…å†µä»¥å‰ç¡®å®æ²¡é‡åˆ°è¿‡ï¼ŒåŠæ—¶ç¼“å­˜ä¸¥é‡ï¼Œç”¨æ—¶é—´æˆ³çš„æ–¹æ³•ä¹Ÿä¸€èˆ¬å¯ä»¥è§£å†³ã€‚åæ¥åœ¨ä¸€ä¸ªå‰ç«¯ç¾¤é‡Œæ±‚åŠ©ï¼Œå¾—åˆ°äº†è§£å†³æ–¹æ³•ï¼šwindow.location.reload(true)ï¼Œä¼ trueå¼ºåˆ¶åˆ·æ–°ï¼Œå¥½å§ï¼Œçœ‹æ¥è¿˜æ˜¯å¾—å¤šçœ‹çœ‹åŸºç¡€ï¼Œä¸€ç›´ä¸çŸ¥é“è¿™ä¸ªæ–¹æ³•è¿˜æœ‰ä¸ªå‚æ•°ã€‚è¿™é‡Œä¹Ÿè¦æ„Ÿè°¢ç¾¤é‡Œçš„é‚£ä½æœ‹å‹ã€‚ å…³äºjsçš„äº‹ä»¶ä»£ç†ä»¥å‰ä¸€ç›´æœ‰ç”¨jsçš„äº‹ä»¶ä»£ç†ï¼Œè¿™æ¬¡åœºæ™¯è·Ÿä»¥å‰ç¨å¾®æœ‰ç‚¹ä¸åŒï¼Œå…ˆçœ‹ä»£ç  123456789101112131415&lt;ul class=\"equipments-list\" @click=\"toStatusPage($event)\"&gt; &lt;li v-for=\"item in orders\" class=\"equipments-item\" :orderId=\"item.id\"&gt; &lt;p&gt; &lt;span class=\"order-no\" v-text=\"'å•å·'+item.orderNo\"&gt;&lt;/span&gt; &lt;span class=\"order-status\" v-text=\"item.statusStr\"&gt;&lt;/span&gt; &lt;/p&gt; &lt;p class=\"equipments-detail\" v-for=\"subItem in item.equipments\"&gt; &lt;span v-text=\"subItem.type+'å®‰è£…'\"&gt;&lt;/span&gt; &lt;span v-text=\"subItem.brand+subItem.productNo\"&gt;&lt;/span&gt; &lt;span v-text=\"subItem.installWay\"&gt;&lt;/span&gt; &lt;span v-text=\"'è´¹ç”¨ï¼š'+item.price+'å…ƒ'\"&gt;&lt;/span&gt; &lt;/p&gt; &lt;p v-text=\"item.createTime+'ä¸‹å•'\"&gt;&lt;/p&gt; &lt;/li&gt;&lt;/ul&gt; 12345678toStatusPage: function(event)&#123; var target = event.target; while(target.tagName != 'LI')&#123; target = target.parentNode; &#125; var id = target.getAttribute('orderId'); window.location.href = Utils.baseUrl + '/html/orderStatus.html?id='+id; &#125; å¾ˆç®€å•çš„ä¸€ä¸ªåˆ—è¡¨è¿›è¯¦æƒ…ï¼Œä¸ºäº†èŠ‚çœå†…å­˜ï¼Œä½¿ç”¨äº†ä»£ç†çš„æ–¹å¼ï¼Œç”¨ulæ¥ä»£ç†äº‹ä»¶ï¼Œæœ€åˆçš„æƒ³æ³•æ˜¯liç‚¹å‡»çš„æ—¶å€™è·å–ä»–çš„orderIdï¼Œç„¶åè·³è½¬åˆ°å¯¹åº”çš„è¯¦æƒ…é¡µï¼Œå½“ä½¿ç”¨ä»£ç†æ–¹å¼æ‹¿åˆ°çš„targetå¯èƒ½æ˜¯spanï¼Œä¹Ÿå¯èƒ½æ˜¯pï¼Œå¦‚æœå±‚çº§å¾ˆå¤šå°±å¾ˆå¯èƒ½æ˜¯åˆ«çš„ä»€ä¹ˆäº†ã€‚é‚£ä¹ˆè¿™é‡Œå¾—æƒ³æ³•å§æ‹¿åˆ°liï¼Œæ‰€ä»¥ä½¿ç”¨äº†parentNodeè¿™ä¸ªä¸œä¸œï¼Œå»åˆ¤æ–­liåœ¨å“ªï¼Œç”¨äº†ä¸€ä¸ªç®€å•çš„å¾ªç¯ï¼Œæ‹¿åˆ°liåç»“æŸå¾ªç¯ï¼Œæ‰§è¡Œåé¢çš„æ“ä½œï¼Œæš‚æ—¶è¿™æ ·è§£å†³äº†ï¼Œè¿˜æ²¡æœ‰æƒ³åˆ°æ›´å¥½çš„æ–¹æ³•ï¼Œæœ‰æ›´å¥½çš„æ–¹æ³•çš„æœ‹å‹æ¬¢è¿ç•™è¨€ï¼Œè®©å¤§å®¶éƒ½å­¦ä¹ ä¸‹ï¼Œè°¢å•¦ï¼ å¥½äº†ï¼Œæš‚æ—¶å°±æ€»ç»“è¿™ä¹ˆå¤šå§ï¼Œæ–‡ä¸­å¦‚æœ‰é”™è¯¯ä¹‹å¤„éº»çƒ¦æŒ‡æ­£ï¼Œè°¢è°¢ï¼","tags":[{"name":"js","slug":"js","permalink":"https://yl.frontjs.cc/tags/js/"},{"name":"å¾®ä¿¡","slug":"å¾®ä¿¡","permalink":"https://yl.frontjs.cc/tags/å¾®ä¿¡/"}]},{"title":"addEventå’ŒremoveEvent","date":"2016-03-21T09:38:46.000Z","path":"2016/03/21/2016-03-21-add-event/","text":"æœ€è¿‘åœ¨çœ‹ã€Šç²¾é€šJavaScriptã€‹è¿™æœ¬ä¹¦ï¼Œæ„Ÿè§‰è¿˜ä¸é”™ï¼Œè¿™é‡Œè®°å½•ä¸‹é‡Œé¢çš„äº‹ä»¶ç›‘å¬ä¸ç§»é™¤çš„æ–¹æ³•ï¼Œä»¥å¤‡æ—¥åå¼€å‘æ—¶å‚è€ƒã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667function addEvent(element, type, handler)&#123; //ä¸ºæ¯ä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°èµ‹äºˆä¸€ä¸ªç‹¬ç«‹çš„ID if(!handler.$$guid)&#123; handler.$$guid = addEvent.guid++; &#125; //ä¸ºå…ƒç´ å»ºç«‹ä¸€ä¸ªäº‹ä»¶ç±»å‹çš„æ•£åˆ—è¡¨ if(!element.events)&#123; element.events = &#123;&#125;; &#125; //ä¸ºæ¯å¯¹å…ƒç´ /äº‹ä»¶å»ºç«‹ä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°çš„æ•£åˆ—è¡¨ var handlers = element.events[type]; if(!handlers)&#123; handlers = element.events[type] = &#123;&#125;; //å­˜å‚¨å·²æœ‰çš„äº‹ä»¶å¤„ç†å‡½æ•°(å¦‚æœå·²å­˜åœ¨ä¸€ä¸ª) if(element[\"on\"+type])&#123; handlers[0] = element[\"on\"+type]; &#125; &#125; //åœ¨æ•£åˆ—è¡¨ä¸­å­˜å‚¨è¯¥äº‹ä»¶å¤„ç†å‡½æ•° handlers[handler.$$guid] = handler; //èµ‹äºˆä¸€ä¸ªå…¨å±€äº‹ä»¶å¤„ç†å‡½æ•°æ¥å¤„ç†æ‰€æœ‰å·¥ä½œ element[\"on\"+type] = handleEvent;&#125;;//åˆ›å»ºç‹¬ç«‹IDçš„è®¡æ•°å™¨addEvent.guid = 1;function removeEvent(element, type, handler)&#123; //ä»æ•£åˆ—è¡¨ä¸­åˆ é™¤äº‹ä»¶å¤„ç†å‡½æ•° if(element.events &amp;&amp; element.events[type])&#123; delete element.events[type][handler.$$guid]; &#125;&#125;function handleEvent(event)&#123; var returnValue = true; //è·å–äº‹ä»¶å¯¹è±¡(IEä½¿ç”¨å…¨å±€çš„äº‹ä»¶å¯¹è±¡) event = event || fixEvent(window.event); //è·å–äº‹ä»¶å¤„ç†å‡½æ•°æ•£åˆ—è¡¨çš„å¼•ç”¨ var handlers = this.events[event.type]; //ä¾æ¬¡æ‰§è¡Œæ¯ä¸ªäº‹ä»¶å¤„ç†å‡½æ•° for(var i in handlers)&#123; this.$$handleEvent = handlers[i]; if(this.$$handleEvent(event) === false)&#123; returnValue = false; &#125; &#125; return returnValue;&#125;;//å¢åŠ ä¸€äº›IEäº‹ä»¶å¯¹è±¡çš„ç¼ºä¹çš„æ–¹æ³•function fixEvent(event)&#123; //å¢åŠ W3Cæ ‡å‡†äº‹ä»¶æ–¹æ³• event.preventDefault = fixEvent.preventDefault; event.stopPropagation = fixEvent.stopPropagation; return event;&#125;;fixEvent.preventDefault = function()&#123; this.returnValue = false;&#125;;fixEvent.stopPropagation = function()&#123; this.cancelBulle = true;&#125;/*test*/ addEvent(document.body, \"click\", function()&#123; console.log('a');&#125;)document.body.click();","tags":[{"name":"js","slug":"js","permalink":"https://yl.frontjs.cc/tags/js/"}]},{"title":"å®ç¢4752gæ¢ssdï¼Œå…‰é©±ä½è£…ç¡¬ç›˜(å¤šå›¾æ…å…¥)","date":"2016-03-14T09:38:27.000Z","path":"2016/03/14/2016-03-14-note-ssd/","text":"èƒŒæ™¯ç¬”è®°æœ¬å·²ç»ä¹°äº†4å¹´äº†ï¼Œæœ€è¿‘ç‰¹åˆ«å¡ï¼Œæ‰“å¼€IDEéƒ½è¦ç­‰åŠå¤©ï¼Œè¿‘æœŸä¹Ÿæ²¡æœ‰æ¢ç¬”è®°æœ¬çš„æ‰“ç®—ï¼Œå°±ç´¢æ€§æ¢ä¸ªssdå§ æ‹†ç¡¬ç›˜æ¢ssd å‡†å¤‡ï¼šç¬”è®°æœ¬ï¼Œå·¥å…·ç®±ï¼Œssdï¼Œç¡¬ç›˜æ‰˜æ¶ æ‰“å¼€ç¬”è®°æœ¬åç›–ï¼Œå¯ä»¥çœ‹åˆ°ç¡¬ç›˜ï¼Œæ‹†ä¸‹å›ºå®šç¡¬ç›˜çš„å‡ ä¸ªèºä¸ï¼Œå¦‚å›¾ æ‹†ä¸‹ç¡¬ç›˜ å°†ssdè£…åœ¨ç¡¬ç›˜ä½ ç›–ä¸Šç¡¬ç›˜å›ºå®šç›–ï¼Œä¸Šå¥½èºä¸ ç›–ä¸Šç¬”è®°æœ¬åç›–ï¼Œssdå°±è£…å¥½äº† å…‰é©±ä½è£…ç¡¬ç›˜ç°åœ¨å…‰é©±çš„ä½œç”¨è¶Šæ¥è¶Šå°äº†ï¼Œåˆšæ‰ä»ç¬”è®°æœ¬ä¸‹ä¸‹æ¥çš„æœºæ¢°ç¡¬ç›˜å¯ä»¥ä½œä¸ºç¬”è®°æœ¬çš„å­˜å‚¨ï¼Œssdå°±ç”¨æ¥è£…ç³»ç»Ÿè£…è½¯ä»¶ï¼Œæ‰€ä»¥å¯ä»¥å°†å…‰é©±æ‹†ä¸‹æ¥ï¼ŒæŠŠç©ºé—´ç•™ç»™ç¡¬ç›˜ æ‹†å…‰é©±ï¼šæ‹§ä¸‹å›ºå®šå…‰é©±çš„èºä¸ï¼Œå¦‚å›¾ï¼Œç„¶åç”¨é’ˆ(ä¹°ç¡¬ç›˜æ‰˜æ¶ä¸€èˆ¬éƒ½ä¼šé€ä¸€ä¸ªç»†å°çš„å·¥å…·)åœ¨é‡Œé¢æ…ä¸€ä¸‹ï¼ŒåŒæ—¶ç¨å¾®ç”¨ç‚¹åŠ›å¾€å¤–æ‹‰å…‰é©±ï¼Œå…‰é©±å°±æ‹†ä¸‹æ¥äº† ç¡¬ç›˜æ‰˜æ¶å’Œå…‰é©±å¯¹æ¯” å°†ç¡¬ç›˜æ”¾å…¥æ‰˜æ¶ï¼ŒæŠŠåŸå…‰é©±è¾¹æ²¿çš„å°ç›–æ¡æ‹†ä¸‹è£…åœ¨ç¡¬ç›˜æ‰˜æ¶ä¸Šï¼Œç„¶åæ”¾å…¥å…‰é©±ä½ï¼Œä¸€åˆ‡å°±okäº† åè®°å…¨éƒ¨å¼„å¥½åï¼Œå¼€æœºï¼ŒF2ï¼Œå¼€æœºé¦–é€‰é¡¹è®¾ç½®ä¸ºå…‰é©±ä½çš„ç¡¬ç›˜ï¼ˆä¹Ÿå°±æ˜¯è¿›å…¥åŸæ¥çš„æ“ä½œç³»ç»Ÿï¼‰ï¼Œå¼€æœºååœ¨ç£ç›˜ç®¡ç†å¯ä»¥çœ‹åˆ°ssdçš„æœªåˆ†é…çš„ç©ºé—´ï¼Œå°±è¯´æ˜ssdå®‰è£…æˆåŠŸï¼Œç¡¬ç›˜ä¹Ÿåœ¨å…‰é©±ä½æ­£å¸¸ä½¿ç”¨äº†ã€‚ç„¶åå°±æ˜¯å°†ç³»ç»Ÿå®‰è£…åœ¨ssdï¼Œå¹¶è®¾ç½®ssdä¸ºç¬¬ä¸€å¯åŠ¨é¡¹äº†ã€‚å®‰è£…ç³»ç»Ÿçš„å†…å®¹è¿™é‡Œå°±ä¸å¤šè¯´äº†ï¼Œç½‘ä¸Šå¾ˆå¤šæ•™ç¨‹ã€‚ æœ¬æ•™ç¨‹å°±è¯´åˆ°è¿™é‡Œï¼Œå¤§å®¶æœ‰ä»€ä¹ˆé—®é¢˜æ¬¢è¿ç•™è¨€ã€‚","tags":[{"name":"ssd","slug":"ssd","permalink":"https://yl.frontjs.cc/tags/ssd/"}]},{"title":"å…³äºjavascriptå‡½æ•°å£°æ˜æå‡å’Œå˜é‡å£°æ˜æå‡","date":"2016-03-12T09:37:36.000Z","path":"2016/03/12/2016-03-13-define-upgrade/","text":"ä¸€ç›´çŸ¥é“javascriptå˜é‡å’Œå‡½æ•°éƒ½ä¼šåœ¨è‡ªå·±çš„ä½œç”¨äºå†…å£°æ˜æå‡ï¼Œä½†æ˜¯å½“å˜é‡åå’Œå‡½æ•°åç›¸åŒæ—¶ï¼Œè°ä¼šè¦†ç›–è°å‘¢ï¼Ÿ 1234alert(a);var a = 1;function a()&#123;&#125;;alert(a); ç»“æœï¼šfunction a(){} 1 1234alert(a);function a()&#123;&#125;;var a = 1;alert(a); ç»“æœï¼šfunction a(){} 1 1234alert(a);function a()&#123;&#125;;var a;alert(a); ç»“æœï¼šfunction a(){} function a(){} ç»“è®ºï¼šåŒä¸€ä¸ªåç§°æ ‡è¯†aï¼Œå³æœ‰å˜é‡å£°æ˜var aï¼Œåˆæœ‰å‡½æ•°å£°æ˜function a() {}ï¼Œä¸ç®¡äºŒè€…å£°æ˜çš„é¡ºåºï¼Œå‡½æ•°å£°æ˜ä¼šè¦†ç›–å˜é‡å£°æ˜ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ­¤æ—¶açš„å€¼æ˜¯å£°æ˜çš„å‡½æ•°function a() {}ã€‚å¦‚æœåœ¨å˜é‡å£°æ˜çš„åŒæ—¶åˆå§‹åŒ–aï¼Œæˆ–æ˜¯ä¹‹åå¯¹aè¿›è¡Œèµ‹å€¼ï¼Œæ­¤æ—¶açš„å€¼å°±æ˜¯å˜é‡çš„å€¼","tags":[{"name":"js","slug":"js","permalink":"https://yl.frontjs.cc/tags/js/"}]},{"title":"CRMå‰ç«¯æ¶æ„åˆ†äº«","date":"2016-03-09T09:36:27.000Z","path":"2016/03/09/2016-03-09-crm-share/","text":"crm-app å¼€å‘å·¥å…·ï¼šhbuilder ä½¿ç”¨çš„æŠ€æœ¯ï¼šmui arttemplate.js h5+ native.js å‚è€ƒæ–‡æ¡£ è¯¦ç»†è®²è§£ é¡¹ç›®ç»“æ„ mainfist.json é…ç½® åº”ç”¨ä¿¡æ¯ å›¾æ ‡ï¼Œå¯åŠ¨å›¾ç‰‡ sdk(å…³é”®ç‚¹) æ¨¡å—æƒé™(å…³é”®ç‚¹) ç‰ˆæœ¬å‡çº§ ä¿®æ”¹manifest.jsonæ–‡ä»¶çš„ç‰ˆæœ¬å· ä¿®æ”¹update.jsonæ–‡ä»¶çš„ç‰ˆæœ¬å·ï¼Œä»¥åŠæ›´æ–°èµ„æºè·¯å¾„ å¼€å‘ä¸­å¸¸ç”¨åŠŸèƒ½åŠå¡«å‘æ–¹æ³• ä¸‹æ‹‰åˆ·æ–°+ä¸Šæ‹‰åŠ è½½ htmlç»“æ„ 12345&lt;div id=\"refreshContainer\" class=\"mui-content mui-scroll-wrapper\"&gt; &lt;div class=\"mui-scroll\"&gt; &lt;/div&gt;&lt;/div&gt; jsä»£ç  1234567891011121314$.init(&#123; pullRefresh:&#123; container:'#refreshContainer', down: &#123; contentdown : \"ä¸‹æ‹‰å¯ä»¥åˆ·æ–°\", contentover : \"é‡Šæ”¾ç«‹å³åˆ·æ–°\", contentrefresh : \"æ­£åœ¨åˆ·æ–°...\", callback:process.pullDownList &#125;, up: &#123; callback: process.pullUpList &#125; &#125;&#125;); é¡µé¢è·³è½¬ é¡µé¢ç±»å‹ï¼šç»„è£…é¡µé¢ ç‹¬ç«‹é¡µé¢ (ä¸¾ä¸ªæ —å­ returnæ¨¡å—)è·³è½¬é¡µé¢äº‹ä»¶è§¦å‘ï¼šfire mui.back() ç›¸å…³sdk (åœ°å›¾ã€å¤åˆ¶ã€ç²˜è´´ã€æ–‡ä»¶ä¸Šä¼ ã€æ‹ç…§ã€åˆ†äº«) è°ƒè¯•ï¼Œç›´æ¥è¿æ‰‹æœº æ‰“åŒ… ï¼ˆäº‘ç«¯æ‰“åŒ…ç”Ÿæˆapkå’Œipaæ–‡ä»¶ï¼‰ iosæ‰“åŒ…éœ€è¦ç›¸å…³è´¦å·ä¿¡æ¯åŠè¯ä¹¦(å¼€å‘è¯ä¹¦æœ‰è¿‡æœŸæ—¶é—´)ï¼Œandroidå¯ä»¥ä½¿ç”¨dcloudçš„å…¬ç”¨è¯ä¹¦ä¹Ÿå¯ä»¥ç”¨è‡ªå·±çš„è¯ä¹¦ å…¨å±€æ–¹æ³• å¸¸ç”¨çš„æ–¹æ³•å¯ä»¥å†™åœ¨app.jsåœ¨(å…¬å…±æ–‡ä»¶)æ–‡ä»¶ä¸­ï¼Œæ¯”å¦‚å…¨å±€ajaxç­‰ crm-pc å¼€å‘å·¥å…· ï¼šwebstorm æ’ä»¶é…ç½®ï¼šscssï¼ˆé…ç½®åï¼Œsassè‡ªåŠ¨è½¬cssï¼‰ å¼€å‘ç¯å¢ƒæ­å»ºï¼š å®‰è£…nodejsï¼Œæ¨è4.2ä»¥ä¸Šç‰ˆæœ¬ å®‰è£…gulpï¼Œæ„å»ºå·¥å…· å®‰è£…å…¶ä»–æ‰“åŒ…æ’ä»¶(package.jsonå·²ç»é…ç½®å¥½æ„å»ºæ’ä»¶çš„ä¾èµ–ï¼Œç›´æ¥æ‰§è¡Œnpm installå³å¯å®‰è£…ï¼Œå®‰è£…ä¸äº†ï¼Œè¯·ç¿»å¢™) é¡¹ç›®ç»“æ„ å¼€å‘è§„èŒƒ jsã€cssã€htmlã€ç­‰èµ„æºå•ç‹¬æ–‡ä»¶å¤¹æ”¾ç½® ä¸€ä¸ªæ¨¡å—ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ¯ç§èµ„æºéƒ½ä¸€è‡´ï¼Œcss(scssæ–‡ä»¶)èµ„æºç»Ÿä¸€å¼•å…¥å…¬å…±æ ·å¼ @import &quot;../subBase&quot;; bodyæ ‡ç­¾ç»Ÿè®¡åŠ ä¸Šç±»åä¸ºæ¨¡å—åå­—ï¼Œæ–¹ä¾¿æ„å»ºåç‰¹æ®Šæ ·å¼åŒºåˆ† æš‚æ—¶æ²¡åšä¾èµ–ç®¡ç†ï¼ŒæŒ‰éœ€å¼•å…¥ç»„ä»¶ï¼šåº“-&gt;æ’ä»¶(ç»„ä»¶)-&gt;è‡ªå®šä¹‰ å¼€å‘ç›®å½•srcï¼Œå‘å¸ƒç›®å½•dist UIåŠåº“ uiä½¿ç”¨bootstrapï¼Œå¼•å…¥jqueryä¸»è¦æ˜¯ä¸ºäº†æ”¯æŒbootstrap ä½¿ç”¨vue.js vueå¸¸ç”¨åŠŸèƒ½ä»‹ç» æ•°æ®ç»‘å®šï¼Œè®¡ç®—å±æ€§ï¼Œæ–¹æ³•ç»‘å®šï¼Œå±æ€§ï¼Œç»„ä»¶åŒ–(stateAnalysisæ¨¡å—) æ„å»ºæ–¹æ³•åŠå¸¸ç”¨gulpæ’ä»¶ï¼š(è§gulpfileæ–‡ä»¶) å…¶ä»–","tags":[{"name":"crm","slug":"crm","permalink":"https://yl.frontjs.cc/tags/crm/"}]},{"title":"å…³äºjså¼‚æ­¥ä¸Šä¼ æ–‡ä»¶","date":"2016-03-08T09:34:59.000Z","path":"2016/03/08/2016-03-08-file-upload/","text":"æœ¬æ–‡é¦–å‘åœ¨æˆ‘çš„åšå®¢å›­ï¼šhttps://www.cnblogs.com/yuanlong1012/p/5127497.html æœ€è¿‘é¡¹ç›®é‡Œæœ‰ä¸ªéœ€æ±‚ï¼Œä¸Šä¼ æ–‡ä»¶ï¼ˆå¥½å§ï¼Œè¿™ç§éœ€æ±‚å¾ˆå¸¸è§ï¼Œè¿™ä¹Ÿä¸æ˜¯ç¬¬ä¸€æ¬¡é‡åˆ°äº†ï¼‰ã€‚å½“æ—¶ç¬¬ä¸€æƒ³æ³•å°±æ˜¯ç›´æ¥ç”¨formè¡¨å•æäº¤ï¼ˆåŸè°…æˆ‘ä»¥å‰å°±æ˜¯è¿™ä¹ˆå¹²çš„ï¼‰ï¼Œä¸è¿‡è¡¨å•é‡Œä¸ä»…æœ‰æ–‡ä»¶è¿˜æœ‰åˆ«çš„ä¿¡æ¯éœ€è¦äº¤äº’ï¼Œè·Ÿåç«¯å•†é‡åå†³å®šæ–‡ä»¶å•ç‹¬ä¸Šä¼ ï¼Œè·å–åˆ°æœåŠ¡å™¨ç«¯è¿”å›çš„æ–‡ä»¶åœ°å€åœ¨å’Œè¡¨å•ä¸€èµ·æäº¤ã€‚è¿™é‡Œå°±éœ€è¦å¼‚æ­¥ä¸Šä¼ æ–‡ä»¶ã€‚ åœ¨ç½‘ä¸Šæ‰’äº†æ‰’ç›¸å…³çš„å†…å®¹ï¼Œå‘ç°è¿˜çœŸä¸å°‘ï¼Œé˜®ä¸€å³°è€å¸ˆçš„è¿™ç¯‡æ–‡ç« æ–‡ä»¶ä¸Šä¼ çš„æ¸è¿›å¼å¢å¼ºå°±ä»‹ç»çš„å¾ˆå…·ä½“ï¼Œä¸‹é¢å°±è°ˆè°ˆè‡ªå·±åœ¨å®æˆ˜ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜çš„æ„Ÿå—å§ã€‚ å…ˆçœ‹çœ‹æ•ˆæœï¼Œå®ç°äº†å“ªäº›åŠŸèƒ½ ï¼ˆå¥½å§ï¼Œå°±ä¸€ä¸ªæŒ‰é’®è€Œå·²ï¼Œæå¾—ç¥ç¥ç§˜ç§˜ï¼Œå˜¿å˜¿ï¼‰ 1&lt;button type=\"button\" class=\"btn\" @click=\"upload\"&gt;ç‚¹å‡»ä¸Šä¼ æ–‡ä»¶&lt;/button&gt; ç»™æŒ‰é’®ç»‘å®šäº†ä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼Œä¸‹é¢çœ‹çœ‹ç‚¹å‡»äº‹ä»¶æ–¹æ³•é‡Œåšäº†ä»€ä¹ˆ 1234567891011121314151617181920methods: &#123; upload: function()&#123; myUpload(&#123; url: window.location.protocol + '//' + window.location.host + '/crm/upload', maxSize: 10, beforeSend: function(file)&#123; &#125;, callback: function(res)&#123; var data = JSON.parse(res); pageCont.attachmentUrl = data.url; &#125;, uploading: function(pre)&#123; pageCont.uploadCont.display = 'block'; pageCont.uploadStyle.width = pre * 2 + 'px'; pageCont.pre = pre; &#125; &#125;); &#125;&#125; æŒ‰é’®ç»‘å®šçš„ç‚¹å‡»äº‹ä»¶æ‰§è¡Œäº†uploadæ–¹æ³•ï¼Œåœ¨uploadæ–¹æ³•é‡Œè°ƒç”¨äº†ä¸€ä¸‹myUploadæ–¹æ³•ï¼Œå¹¶ä¼ é€’äº†ä¸€äº›é…ç½®ä¿¡æ¯è¿›å»ï¼Œç¨åè¯´ä¸‹è¿™äº›é…ç½®ä¿¡æ¯ã€‚å…ˆçœ‹çœ‹myUploadçš„å…·ä½“å®ç°ï¼š åˆå§‹åŒ–äº†ä¸€ä¸ªFormDataå¯¹è±¡å’Œä¸€ä¸ªXMHttpResquestå¯¹è±¡ï¼Œåˆ›å»ºä¸€ä¸ªtypeä¸ºfileçš„inputï¼Œå¹¶è§¦å‘ä¸€æ¬¡è¯¥inputçš„clickï¼Œå¦‚ä¸‹ 12345678910var fd = new FormData(), xhr = new XMLHttpRequest(), input;input = document.createElement('input');input.setAttribute('id', 'myUploadInput');input.setAttribute('type', 'file');input.setAttribute('name', 'file');document.body.appendChild(input);input.style.display = 'none';input.click(); ç›‘å¬åˆšæ‰åˆ›å»ºçš„inputçš„changeäº‹ä»¶ï¼Œå¹¶ä½œåœ¨é‡Œé¢åšç›¸åº”å¤„ç† 123456789101112131415161718192021222324252627282930313233343536373839404142434445input.onchange = function()&#123; if(!input.value)&#123;return;&#125; if(option.maxSize &amp;&amp; input.files[0].size &gt; option.maxSize * 1024 * 1024)&#123; dialog(&#123; title: 'æç¤º', content: 'è¯·ä¸Šä¼ å°äº'+option.maxSize+'Mçš„æ–‡ä»¶', okValue: 'ç¡®å®š', ok: function () &#123;&#125; &#125;).showModal(); return; &#125; if(option.beforeSend instanceof Function)&#123; if(option.beforeSend(input) === false)&#123; return false; &#125; &#125; fd.append('file', input.files[0]); xhr.open('post', option.url); xhr.onreadystatechange = function()&#123; if(xhr.status == 200)&#123; if(xhr.readyState == 4)&#123; if(option.callback instanceof Function)&#123; option.callback(xhr.responseText); &#125; &#125; &#125;else&#123; if(!(dialog.get('uploadfail')))&#123; dialog(&#123; id: 'uploadfail', title: 'æç¤º', content: 'ä¸Šä¼ å¤±è´¥', okValue: 'ç¡®å®š', ok: function () &#123;&#125; &#125;).showModal(); &#125; &#125; &#125; xhr.upload.onprogress = function(event)&#123; var pre = Math.floor(100 * event.loaded / event.total); if(option.uploading instanceof Function)&#123; option.uploading(pre); &#125; &#125; xhr.send(fd);&#125; è§£é‡Šä¸‹ä¸Šé¢çš„ä»£ç ã€‚inputçš„changeäº‹ä»¶è§¦å‘åï¼Œé¦–å…ˆåˆ¤æ–­äº†ä¸‹å½“å‰æ˜¯å¦é€‰æ‹©äº†æ–‡ä»¶ 1if(!input.value)&#123;return;&#125; ä¸€å¼€å§‹æˆ‘æ˜¯æ²¡åšè¿™ä¸ªåˆ¤æ–­çš„ï¼Œåœ¨åæ¥çš„æµ‹è¯•è¿‡ç¨‹ä¸­å‘ç°ï¼Œå½“ä¸Šä¼ ä¸€æ¬¡æ–‡ä»¶åï¼Œå†æ¬¡ç‚¹å‡»æŒ‰é’®ä¸Šä¼ ï¼Œæ‰“å¼€æ–‡ä»¶é€‰æ‹©æ¡†ï¼Œç„¶åä¸é€‰æ‹©æ–‡ä»¶ï¼Œè€Œæ˜¯ç‚¹å‡»å–æ¶ˆæŒ‰é’®ï¼Œchangeäº‹ä»¶ä¹Ÿè§¦å‘äº†ï¼Œå¯¼è‡´åé¢çš„ä»£ç ä¹Ÿä¼šæ‰§è¡Œï¼Œæ˜¾ç„¶è¿™ä¸åˆç†ï¼Œæ•…åŠ äº†è¿™ä¸ªåˆ¤æ–­ã€‚ ç„¶åé™åˆ¶äº†ä¸‹ä¸Šä¼ æ–‡ä»¶çš„å¤§å°ï¼ˆè¿™æ ·çš„äº‹èƒ½å¤Ÿå‰ç«¯å¤„ç†å°±ä¸è¦äº¤ç»™æœåŠ¡ç«¯æ¥éªŒè¯äº†ï¼‰ï¼Œå½“æ–‡ä»¶å¤§å°è¶…è¿‡æœ€å¤§é™åˆ¶ï¼Œå°±ä¼šå¼¹æ¡†æç¤º 123456789if(option.maxSize &amp;&amp; input.files[0].size &gt; option.maxSize * 1024 * 1024)&#123; dialog(&#123; title: 'æç¤º', content: 'è¯·ä¸Šä¼ å°äº'+option.maxSize+'Mçš„æ–‡ä»¶', okValue: 'ç¡®å®š', ok: function () &#123;&#125; &#125;).showModal(); return;&#125; ç„¶ååŠ äº†ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ å‰çš„æ“ä½œï¼Œå¯ä»¥åœ¨æ–‡ä»¶ä¸Šä¼ å‰åšä¸€äº›å¤„ç†ï¼Œå¦‚è¿›åº¦æ¡çš„æ˜¾ç¤ºï¼Œå›¾ç‰‡é¢„è§ˆç­‰ç­‰ 12345if(option.beforeSend instanceof Function)&#123; if(option.beforeSend(input) === false)&#123; return false; &#125;&#125; æ¥ä¸‹æ¥å°†æ–‡ä»¶appendåˆ°formDataå¯¹è±¡é‡Œï¼Œä½¿ç”¨å­—æ®µåâ€˜fileâ€™ï¼Œè¯¥å­—æ®µåæ˜¯æœåŠ¡ç«¯æ¥æ”¶æ–‡ä»¶æ—¶ä½¿ç”¨çš„å­—æ®µå 1fd.append('file', input.files[0]); ç„¶åå°±æ˜¯ä½¿ç”¨XMLHttpRequestå¯¹è±¡å‘æœåŠ¡ç«¯å‘é€æ•°æ®äº† 123456789101112131415161718192021222324252627xhr.open('post', option.url);xhr.onreadystatechange = function()&#123; if(xhr.status == 200)&#123; if(xhr.readyState == 4)&#123; if(option.callback instanceof Function)&#123; option.callback(xhr.responseText); &#125; &#125; &#125;else&#123; if(!(dialog.get('uploadfail')))&#123; dialog(&#123; id: 'uploadfail', title: 'æç¤º', content: 'ä¸Šä¼ å¤±è´¥', okValue: 'ç¡®å®š', ok: function () &#123;&#125; &#125;).showModal(); &#125; &#125;&#125;xhr.upload.onprogress = function(event)&#123; var pre = Math.floor(100 * event.loaded / event.total); if(option.uploading instanceof Function)&#123; option.uploading(pre); &#125;&#125;xhr.send(fd); å†å‘æœåŠ¡ç«¯å‘é€æ•°æ®æ—¶ï¼Œä½¿ç”¨äº†ç›‘å¬äº†ä¸€ä¸‹progressäº‹ä»¶ï¼Œä¸»è¦æ˜¯ä¸ºäº†è¿›è¡Œä¸Šä¼ è¿›åº¦çš„æ˜¾ç¤ºï¼Œä¸Šè¿°ä»£ç ä¸­ï¼Œ 1var pre = Math.floor(100 * event.loaded / event.total); è·å–ä¸Šä¼ çš„ç™¾åˆ†æ¯”ï¼Œèƒ½å¤Ÿæ‹¿åˆ°è¿™ä¸ªå€¼ï¼Œé¡µé¢ä¸Šå°±å¯ä»¥å±•ç¤ºå„ç§å„æ ·çš„ä¸Šä¼ è¿›åº¦æ•ˆæœäº†ã€‚ å·®ä¸å¤šä»‹ç»å®Œäº†ï¼Œä¸‹é¢è¡¥å……ä¸€ä¸‹ä½¿ç”¨ä¸­é‡åˆ°çš„é—®é¢˜ï¼š é—®é¢˜ä¸€ï¼šæ–‡ä»¶åœ¨ä¸Šä¼ çš„è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨JSON.parse()åºåˆ—åŒ–æœåŠ¡ç«¯è¿”å›çš„jsonå­—ç¬¦ä¸²æŠ¥é”™(å‚»å•Šï¼Œæ–‡ä»¶è¿˜åœ¨ä¸Šä¼ ï¼ŒæœåŠ¡ç«¯æ€ä¹ˆä¼šè¿”å›æ•°æ®å•Š)ã€‚ äº‹æƒ…æ˜¯è¿™æ ·çš„ï¼Œä¸€å¼€å§‹ï¼Œæˆ‘åœ¨readystatechangeé‡Œåªç›‘å¬äº†çŠ¶æ€ç æ˜¯å¦æ˜¯200ï¼Œå¦‚æœæ˜¯å°±è¯´æ˜é€šäº†ï¼Œç„¶åæ‰§è¡Œå›è°ƒï¼Œåœ¨å›è°ƒé‡Œå¤„ç†æœåŠ¡ç«¯è¿”å›çš„æ•°æ®ï¼Œä½†æ˜¯é€šäº†ä¸ä¸€å®šä»£è¡¨æœåŠ¡ç«¯å·²ç»è¿”å›äº†æ•°æ®ï¼Œæ‰€ä»¥å°±å‡ºç°äº†ä¸Šé¢çš„é”™è¯¯ï¼Œæ‰€ä»¥åæ¥åœ¨åˆ¤æ–­äº†statusæ˜¯å¦ä¸º200åï¼Œè¿˜åˆ¤æ–­äº†readyStateï¼Œä»¥ç¡®ä¿æœåŠ¡ç«¯å·²å¤„ç†å®Œæ¯•å¹¶è¿”å›æ•°æ®åœ¨æ‰§è¡Œå›è°ƒ 12345if(xhr.status == 200)&#123; if(option.callback instanceof Function)&#123; option.callback(xhr.responseText); &#125;&#125; é—®é¢˜äºŒï¼šé‡å¤åˆ›å»ºinputã€‚æ¯æ¬¡ç‚¹å‡»æŒ‰é’®ä¸Šä¼ æ–‡ä»¶åï¼Œé¡µé¢éƒ½ä¼šå¤šä¸€ä¸ªtype=fileçš„inputæ„Ÿè§‰ä¸æ˜¯å¾ˆå¥½ï¼ˆä¸ªäººç™–å¥½å§ï¼‰ï¼Œæ‰€ä»¥å¯¹æœ€å¼€å§‹çš„åˆå§‹åŒ–ä»£ç åšäº†ä¸‹ä¼˜åŒ–ï¼Œåˆ¤æ–­å½“å‰é¡µé¢æ˜¯å¦å­˜åœ¨åˆšæ‰åˆ›å»ºçš„inputï¼Œå­˜åœ¨å°±ç›´æ¥ä½¿ç”¨ï¼Œä¸å­˜åœ¨å°±åˆ›å»ºï¼Œå¦‚ä¸‹ 12345678910if(document.getElementById('myUploadInput'))&#123; input = document.getElementById('myUploadInput');&#125;else&#123; input = document.createElement('input'); input.setAttribute('id', 'myUploadInput'); input.setAttribute('type', 'file'); input.setAttribute('name', 'file'); document.body.appendChild(input); input.style.display = 'none';&#125; å¥½äº†ï¼Œå°±è¿™ä¹ˆå¤šäº†ã€‚çœ‹çœ‹æ•ˆæœ åˆšæ‰åŠ äº†ä¸ªéœ€æ±‚ï¼Œé™åˆ¶ä¸Šä¼ æ–‡ä»¶ç±»å‹ï¼Œä½œäº†å¦‚ä¸‹ä¿®æ”¹ï¼š myUploadæ–¹æ³•ï¼Œåˆå§‹åŒ–æ—¶å¢åŠ äº†æ”¯æŒæ–‡ä»¶ç±»å‹ï¼Œå¦‚ä¸‹ 1fileType = ['doc','docx','xls','xlsx','pdf','jpg','png','ppt','pptx'] changeå‘ç”Ÿåï¼Œæ£€æŸ¥æ–‡ä»¶ç±»å‹ï¼Œå¦‚ä¸‹ 12345678910var type = input.value.split('.').pop();if(fileType.indexOf(type.toLocaleLowerCase()) == -1)&#123; dialog(&#123; title: 'æç¤º', content: 'æš‚ä¸æ”¯æŒè¯¥ç±»å‹çš„æ–‡ä»¶ï¼Œè¯·é‡æ–°é€‰æ‹©!', okValue: 'ç¡®å®š', ok: function () &#123;&#125; &#125;).showModal(); return;&#125; å› ä¸ªäººçŸ¥è¯†é¢æœ‰é™ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œè¿˜è¯·æŒ‡æ­£ã€‚","tags":[{"name":"js","slug":"js","permalink":"https://yl.frontjs.cc/tags/js/"},{"name":"æ–‡ä»¶ä¸Šä¼ ","slug":"æ–‡ä»¶ä¸Šä¼ ","permalink":"https://yl.frontjs.cc/tags/æ–‡ä»¶ä¸Šä¼ /"}]},{"title":"chromeä½¿ç”¨æŠ€å·§ä¹‹snippets","date":"2016-03-06T09:36:00.000Z","path":"2016/03/06/2016-03-06-chrome-tip-snippets/","text":"åœ¨å¹³æ—¶å¼€å‘ä¸­ï¼Œä½¿ç”¨çš„æœ€å¤šçš„å·¥å…·åº”è¯¥æ˜¯chromeäº†(å‰ç«¯è€Œè¨€)ï¼Œchromeæœ‰å¾ˆå¤šä½¿ç”¨æŠ€å·§ï¼Œä¸‹é¢æˆ‘ä»¬è¦èŠçš„æ­£æ˜¯snippets,ä¸ªäººè®¤ä¸ºæ¯”æ§åˆ¶å°çš„consoleå¥½ç”¨(ä¹Ÿåªæ˜¯åœ¨æŸäº›åœºæ™¯ä¸‹é¢)ã€‚ ä¾‹å¦‚å¹³æ—¶æµè§ˆåšå®¢å›­ç­‰ç½‘ç«™æ—¶ï¼Œçœ‹åˆ°æŸäº›å¤§ç¥å†™çš„ä¸€äº›å¾ˆé«˜å¤§ä¸Šçš„ä»£ç ï¼Œæƒ³äº²æ‰‹å®è·µä¸‹æ­£ç¡®æ€§ï¼Œæˆ–æ˜¯æƒ³è°ƒè¯•ä¸‹ï¼Œé‚£ä¹ˆä¸€èˆ¬äººéƒ½ä¼šæ‰“å¼€sublimeç­‰å¼€å‘å·¥å…·ï¼Œå»ºä¸€ä¸ªé¡µé¢æ–‡æ¡£ï¼Œåœ¨scriptæ ‡ç­¾é‡Œç²˜è´´æˆ–è€…æ•²å‡ºé‚£ä¸€å¨js(ä¹Ÿæœ‰å¯èƒ½åœ¨jsé‡ŒåŠ å‡ ä¸ªconsole.log)ï¼Œç„¶ååœ¨æµè§ˆå™¨æ‰“å¼€ï¼ŒF12ï¼Œçœ‹æ§åˆ¶å°ä¿¡æ¯ï¼Œå¦‚æœéœ€è¦è°ƒè¯•ä¹Ÿå¯èƒ½åœ¨sourceé‡Œæ‰¾åˆ°æ–‡ä»¶æ‰“ä¸Šæ–­ç‚¹ã€‚ å›é¡¾ä¸‹åˆšæ‰æè¿°çš„è¿‡ç¨‹ï¼Œä¸å…è§‰å¾—æœ‰ç‚¹éº»çƒ¦ã€‚ä¹Ÿæœ‰äººè¯´ç›´æ¥åœ¨æµè§ˆå™¨çš„æ§åˆ¶å°é‡Œè¿›è¡Œç ä»£ç ï¼Œenteråå°±å¯ä»¥çœ‹åˆ°ç»“æœäº†ã€‚æ²¡é”™ï¼Œè¦çœ‹ç»“æœè¿™æˆ–è®¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œå¯æ˜¯ï¼Œå¦‚æœè¦å¯¹ä»£ç è¿›è¡Œè°ƒè¯•å‘¢? è¿™é‡Œå°±è¦è¯·å‡ºæˆ‘ä»¬çš„snippetsäº†ã€‚snippetsåœ¨å“ªï¼Ÿè¯·çœ‹ä¸‹é¢æˆªå›¾ çœ‹äº†ä¸Šé¢çš„å›¾ç‰‡ï¼Œå„ä½çœ‹å®˜åº”è¯¥å·²ç»äº†äº†è§£äº†å¦‚ä½•ä½¿ç”¨snippetsäº†ï¼Œåœ¨ç©ºç™½åŒºåŸŸå³é”®é€‰æ‹©newå¯ä»¥æ–°å»ºæ–‡ä»¶ï¼Œå³é”®åˆšæ‰æ–°å»ºçš„æ–‡ä»¶é€‰æ‹©runå¯ä»¥è¿è¡Œå†™çš„æµ‹è¯•ä»£ç ï¼Œæ–­ç‚¹çš„æ–¹æ³•è¿™é‡Œå°±ä¸å¤šä»‹ç»äº†ï¼Œç›¸ä¿¡ä½¿ç”¨chromeå¼€å‘çš„æœ‹å‹éƒ½åº”è¯¥å¾ˆç†Ÿäº†ã€‚ å…³äºsnippetså°±ä»‹ç»è¿™ä¹ˆå¤šï¼Œchromeé‡Œæ‰¾ä¸åˆ°snippetsçš„åŒå­¦å¯ä»¥å»å‡çº§ä¸€ä¸‹æµè§ˆå™¨ã€‚ å…¶å®chromeçš„ä½¿ç”¨æŠ€å·§è¿˜æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚workspaceï¼Œè¿™é‡Œé¡ºå¸¦æä¸€ä¸‹ï¼Œä¹Ÿä¸å•ç‹¬å¼„ç¯‡æ–‡ç« è®¨è®ºäº†ã€‚è¯·çœ‹ä¸‹å›¾ æ²¡é”™ï¼Œæ‰¾åˆ°åœ°æ–¹åï¼Œå³é”®å°±å¯ä»¥çœ‹åˆ°è¿™ä¸ªworkspaceäº†ï¼Œè¿™ä¸ªæ˜¯å¹²å˜›çš„ï¼Ÿè¿™ä¸ªæ˜¯æŠŠä½ æœ¬åœ°çš„èµ„æºåŠ è½½åˆ°å½“å‰ç«™ç‚¹ï¼Œè¯´æ˜ç™½ç‚¹å°±æ˜¯â€œjsâ€æ³¨å…¥(èƒ¡ä¹±å–çš„åå­—)ï¼Œå…·ä½“çš„å°±ä¸å±•å¼€äº†ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥å»å®è·µä¸‹ã€‚","tags":[{"name":"chrome","slug":"chrome","permalink":"https://yl.frontjs.cc/tags/chrome/"},{"name":"snippets","slug":"snippets","permalink":"https://yl.frontjs.cc/tags/snippets/"}]},{"title":"ä½¿ç”¨jekyllæ­å»ºåšå®¢åŠjekyllæ¨¡æ¿easybookä½¿ç”¨æ–¹æ³•","date":"2016-03-05T09:34:10.000Z","path":"2016/03/05/2016-03-05-build-jekyll-blog/","text":"ç½‘ä¸Šå…³äºåœ¨githubä¸Šæ­å»ºé™æ€åšå®¢çš„æ–‡ç« å¾ˆå¤šï¼Œä¹Ÿå¾ˆè¯¦ç»†ï¼Œè¿™é‡Œåªæ˜¯ç®€å•è®°å½•ä¸‹æœ¬ç«™çš„æ­å»ºè¿‡ç¨‹ã€‚ åœ¨githubä¸Šåˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼Œé¡¹ç›®åä¸ºusername.github.ioï¼Œusernameå°±æ˜¯ä½ githubçš„åå­—ï¼Œç„¶åä¸€æ­¥æ­¥çš„æŒ‰æç¤ºæ“ä½œâ€¦ ä¸æƒ³è‡ªå·±æŠ˜è…¾çš„è¯å¯ä»¥é€‰æ‹©åšå®¢æ¨¡æ¿ï¼Œåˆšæ‰åœ¨githubä¸Šåˆ›å»ºé¡¹ç›®å¹¶autoloadpageåæ˜¯å¯ä»¥é€‰æ‹©æ¨¡æ¿çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ç½‘ä¸Šæ‰¾jekyllçš„ç›¸å…³æ¨¡æ¿ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©çš„æ˜¯easybook ä¸‹è½½easybookåï¼Œå°†å…¶æ–‡ä»¶æ‹·è´åˆ°ä½ æœ¬åœ°çš„username.github.ioä¸‹ï¼ˆå…ˆè¦cloneä½ åˆšæ‰åœ¨githubä¸Šå»ºçš„é¡¹ç›®ï¼‰ å®‰è£…rubyã€gemã€jekyllï¼ˆè‡ªè¡Œç™¾åº¦ï¼‰,ç„¶åæœ¬åœ°å¯åŠ¨æŸ¥çœ‹æ•ˆæœï¼Œæµè§ˆå™¨æ‰“å¼€127.0.0.1:4000å°±å¯ä»¥çœ‹åˆ°æ•ˆæœ 1jekyll server å¯¹easybookæ¨¡æ¿è¿›è¡Œä¿®æ”¹ä¸‹é¢æŒ‰ç…§è‡ªå·±çš„éœ€æ±‚ä¸ªæ€§åŒ–ä¸€ä¸‹è¿™ä¸ªæ¨¡æ¿ã€‚æ‰€è°“çš„ä¸ªæ€§åŒ–ï¼ŒæŒ‡çš„æ˜¯æ ¹æ®åˆšæ‰æ˜¾ç¤ºçš„æ•ˆæœæŸ¥çœ‹å¯¹åº”çš„æ–‡ä»¶ï¼Œäº†è§£é¡µé¢çš„æ˜¾ç¤ºæ–¹å¼æ‰€å¯¹åº”çš„ç¼–å†™æ–¹æ³•ï¼ˆåŸè°…æˆ‘æ²¡æœ‰æ·±å…¥çš„ç©¶å…¶åŸç†ï¼Œåªæ˜¯ç ”ç©¶äº†è¿™å¥—æ¨¡æ¿è€Œå·²ï¼‰ã€‚ å…ˆçœ‹_config.ymlæ–‡ä»¶ï¼Œè¿™é‡Œé¢å®šä¹‰çš„ä¸œä¸œç®€å•ç†è§£å°±æ˜¯å®šä¹‰çš„å…¨å±€çš„å˜é‡ï¼Œç„¶åå…¶ä»–æ–‡ä»¶å¯ä»¥ä½¿ç”¨ï¼Œè¿™é‡Œæˆ‘ä¹Ÿä¸ä»‹ç»å¾ˆä»”ç»†äº†ï¼Œç®€å•çš„æä¸‹è‡ªå·±æ”¹çš„åœ°æ–¹ã€‚title:ç½‘ç«™æ ‡é¢˜description:æè¿°ï¼Œseoç”¨çš„ï¼Œç”Ÿæˆçš„é¡µé¢é‡Œçš„metaæ ‡ç­¾é‡Œå¯ä»¥çœ‹åˆ°avatar:å¤´åƒå¯¹åº”çš„å›¾ç‰‡åœ°å€ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å°†å›¾ç‰‡æ”¾åœ¨é¡¹ç›®é‡Œå¼•å…¥æˆ–è€…ç›´æ¥ä¿®æ”¹sidebar.htmlé‡Œçš„å¤´åƒåœ°å€å…¶ä»–å¯¹åº”å‚æ•°çš„ä¿®æ”¹å¯ä»¥çœ‹ä¸‹é¢æˆ‘çš„githubä¸Šè¯¥é¡¹ç›®çš„å…·ä½“ä¿®æ”¹ å‘å¸ƒæ–‡ç« ä¹‹å‰çœ‹ç½‘ä¸Šçš„ï¼Œä½¿ç”¨markdownè¯­æ³•ç¼–å†™å¥½åšå®¢åï¼Œè¿˜éœ€è¦æ‰§è¡Œjekyllçš„ç›¸å…³å‘½ä»¤è¿›è¡Œç”Ÿäº§å¯¹åº”çš„æ–‡æ¡£ï¼Œä½†æ˜¯æˆ‘è¿™é‡Œæ²¡æœ‰è¿™ä¹ˆåšã€‚æ–‡ç« åœ¨æœ¬åœ°å†™å¥½åä½¿ç”¨jekyll serverè¿›è¡Œæœ¬åœ°é¢„è§ˆï¼Œé¢„è§ˆæˆåŠŸåï¼Œç›´æ¥å°†æœ¬åœ°ä¿®æ”¹pushåˆ°githubä¸Šå°±å¯ä»¥äº†ï¼Œç›´æ¥ä½¿ç”¨masteråˆ†æ”¯ï¼Œæ–‡æ¡£çš„ç±»å‹æ˜¯markdownä¸æ˜¯mdï¼Œå¦åˆ™ä¸Šä¼ åä¸æ˜¾ç¤º(mdç±»å‹çš„æ–‡æ¡£æœ¬åœ°æ˜¯å¯ä»¥é¢„è§ˆæ˜¾ç¤ºçš„ï¼Œå…·ä½“åŸå› è¿˜ä¸çŸ¥)ï¼Œè¿˜è¦æ³¨æ„æ–‡æ¡£çš„æ—¥æœŸæ ¼å¼ã€‚ ç»“è¯­æ„Ÿè§‰ä½¿ç”¨jekyllæ¥å†™é™æ€åšå®¢è¿˜æ˜¯è›®æ–¹ä¾¿çš„ï¼Œè¿™ä¹Ÿç»™äº†æ‡’äººä¸€ä¸ªå†™åšå®¢çš„ç†ç”± - - å½“ç„¶ï¼Œeasybooké‡Œæ–‡ç« çš„åˆ†é¡µä»¥åŠåˆ†ç±»éƒ½å·²ç»å®ç°äº†ï¼Œæ¯ç¯‡mdæ–‡æ¡£æœ€ä¸Šè¾¹çš„categorieså°±æ˜¯åˆ†ç±»æ ‡è¯†ï¼Œä¹Ÿå¯ä»¥ä¸€ç¯‡æ–‡ç« å¤„äºå¤šä¸ªåˆ†ç±»é‡Œã€‚å…³äºåšå®¢çš„è¯„è®ºåŠŸèƒ½æœ‰æ—¶é—´å†çœ‹çœ‹æ€ä¹ˆå¼•å…¥ã€‚å¸Œæœ›è‡ªå·±èƒ½å°†è¿™ä¸ªä¹ æƒ¯åšæŒä¸‹å» é™„ä¸Šä¿®æ”¹åçš„é¡¹ç›®çš„githubåœ°å€ï¼Œhttps://github.com/YL2014/YL2014.github.ioï¼Œæ¬¢è¿Star","tags":[{"name":"jekyll","slug":"jekyll","permalink":"https://yl.frontjs.cc/tags/jekyll/"},{"name":"blog","slug":"blog","permalink":"https://yl.frontjs.cc/tags/blog/"}]}]